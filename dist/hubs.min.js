function e(e,t){const n=Object.create(null),r=e.split(",");for(let e=0;e<r.length;e++)n[r[e]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}const t=e("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function n(e){return!!e||""===e}function r(e){if(b(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],s=N(i)?o(i):r(i);if(s)for(const e in s)t[e]=s[e]}return t}return N(e)||T(e)?e:void 0}const i=/;(?![^(]*\))/g,s=/:(.+)/;function o(e){const t={};return e.split(i).forEach((e=>{if(e){const n=e.split(s);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function a(e){let t="";if(N(e))t=e;else if(b(e))for(let n=0;n<e.length;n++){const r=a(e[n]);r&&(t+=r+" ")}else if(T(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const u=e=>null==e?"":b(e)||T(e)&&(e.toString===C||!M(e.toString))?JSON.stringify(e,c,2):String(e),c=(e,t)=>t&&t.__v_isRef?c(e,t.value):_(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:E(t)?{[`Set(${t.size})`]:[...t.values()]}:!T(t)||b(t)||z(t)?t:String(t),h={},l=[],p=()=>{},f=()=>!1,d=/^on[^a-z]/,m=e=>d.test(e),g=e=>e.startsWith("onUpdate:"),y=Object.assign,v=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},x=Object.prototype.hasOwnProperty,w=(e,t)=>x.call(e,t),b=Array.isArray,_=e=>"[object Map]"===A(e),E=e=>"[object Set]"===A(e),M=e=>"function"==typeof e,N=e=>"string"==typeof e,S=e=>"symbol"==typeof e,T=e=>null!==e&&"object"==typeof e,O=e=>T(e)&&M(e.then)&&M(e.catch),C=Object.prototype.toString,A=e=>C.call(e),z=e=>"[object Object]"===A(e),R=e=>N(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,D=e(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),k=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},I=/-(\w)/g,L=k((e=>e.replace(I,((e,t)=>t?t.toUpperCase():"")))),B=/\B([A-Z])/g,F=k((e=>e.replace(B,"-$1").toLowerCase())),P=k((e=>e.charAt(0).toUpperCase()+e.slice(1))),U=k((e=>e?`on${P(e)}`:"")),j=(e,t)=>!Object.is(e,t),V=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},q=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},H=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let $;const W=()=>$||($="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});let G;const Y=[];class Z{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&G&&(this.parent=G,this.index=(G.scopes||(G.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}}on(){this.active&&(Y.push(this),G=this)}off(){this.active&&(Y.pop(),G=Y[Y.length-1])}stop(e){if(this.active){if(this.effects.forEach((e=>e.stop())),this.cleanups.forEach((e=>e())),this.scopes&&this.scopes.forEach((e=>e.stop(!0))),this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}const X=e=>{const t=new Set(e);return t.w=0,t.n=0,t},J=e=>(e.w&te)>0,Q=e=>(e.n&te)>0,K=new WeakMap;let ee=0,te=1;const ne=[];let re;const ie=Symbol(""),se=Symbol("");class oe{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],function(e,t){(t=t||G)&&t.active&&t.effects.push(e)}(this,n)}run(){if(!this.active)return this.fn();if(!ne.includes(this))try{return ne.push(re=this),ce.push(ue),ue=!0,te=1<<++ee,ee<=30?(({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=te})(this):ae(this),this.fn()}finally{ee<=30&&(e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];J(i)&&!Q(i)?i.delete(e):t[n++]=i,i.w&=~te,i.n&=~te}t.length=n}})(this),te=1<<--ee,le(),ne.pop();const e=ne.length;re=e>0?ne[e-1]:void 0}}stop(){this.active&&(ae(this),this.onStop&&this.onStop(),this.active=!1)}}function ae(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let ue=!0;const ce=[];function he(){ce.push(ue),ue=!1}function le(){const e=ce.pop();ue=void 0===e||e}function pe(e,t,n){if(!fe())return;let r=K.get(e);r||K.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=X()),de(i)}function fe(){return ue&&void 0!==re}function de(e,t){let n=!1;ee<=30?Q(e)||(e.n|=te,n=!J(e)):n=!e.has(re),n&&(e.add(re),re.deps.push(e))}function me(e,t,n,r,i,s){const o=K.get(e);if(!o)return;let a=[];if("clear"===t)a=[...o.values()];else if("length"===n&&b(e))o.forEach(((e,t)=>{("length"===t||t>=r)&&a.push(e)}));else switch(void 0!==n&&a.push(o.get(n)),t){case"add":b(e)?R(n)&&a.push(o.get("length")):(a.push(o.get(ie)),_(e)&&a.push(o.get(se)));break;case"delete":b(e)||(a.push(o.get(ie)),_(e)&&a.push(o.get(se)));break;case"set":_(e)&&a.push(o.get(ie))}if(1===a.length)a[0]&&ge(a[0]);else{const e=[];for(const t of a)t&&e.push(...t);ge(X(e))}}function ge(e,t){for(const t of b(e)?e:[...e])(t!==re||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const ye=e("__proto__,__v_isRef,__isVue"),ve=new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter(S)),xe=Me(),we=Me(!1,!0),be=Me(!0),_e=Ee();function Ee(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=ct(this);for(let e=0,t=this.length;e<t;e++)pe(n,0,e+"");const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(ct)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){he();const n=ct(this)[t].apply(this,e);return le(),n}})),e}function Me(e=!1,t=!1){return function(n,r,i){if("__v_isReactive"===r)return!e;if("__v_isReadonly"===r)return e;if("__v_raw"===r&&i===(e?t?tt:et:t?Ke:Qe).get(n))return n;const s=b(n);if(!e&&s&&w(_e,r))return Reflect.get(_e,r,i);const o=Reflect.get(n,r,i);if(S(r)?ve.has(r):ye(r))return o;if(e||pe(n,0,r),t)return o;if(lt(o)){return!s||!R(r)?o.value:o}return T(o)?e?it(o):rt(o):o}}function Ne(e=!1){return function(t,n,r,i){let s=t[n];if(!e&&(r=ct(r),s=ct(s),!b(t)&&lt(s)&&!lt(r)))return s.value=r,!0;const o=b(t)&&R(n)?Number(n)<t.length:w(t,n),a=Reflect.set(t,n,r,i);return t===ct(i)&&(o?j(r,s)&&me(t,"set",n,r):me(t,"add",n,r)),a}}const Se={get:xe,set:Ne(),deleteProperty:function(e,t){const n=w(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&me(e,"delete",t,void 0),r},has:function(e,t){const n=Reflect.has(e,t);return S(t)&&ve.has(t)||pe(e,0,t),n},ownKeys:function(e){return pe(e,0,b(e)?"length":ie),Reflect.ownKeys(e)}},Te={get:be,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},Oe=y({},Se,{get:we,set:Ne(!0)}),Ce=e=>T(e)?rt(e):e,Ae=e=>T(e)?it(e):e,ze=e=>e,Re=e=>Reflect.getPrototypeOf(e);function De(e,t,n=!1,r=!1){const i=ct(e=e.__v_raw),s=ct(t);t!==s&&!n&&pe(i,0,t),!n&&pe(i,0,s);const{has:o}=Re(i),a=r?ze:n?Ae:Ce;return o.call(i,t)?a(e.get(t)):o.call(i,s)?a(e.get(s)):void(e!==i&&e.get(t))}function ke(e,t=!1){const n=this.__v_raw,r=ct(n),i=ct(e);return e!==i&&!t&&pe(r,0,e),!t&&pe(r,0,i),e===i?n.has(e):n.has(e)||n.has(i)}function Ie(e,t=!1){return e=e.__v_raw,!t&&pe(ct(e),0,ie),Reflect.get(e,"size",e)}function Le(e){e=ct(e);const t=ct(this);return Re(t).has.call(t,e)||(t.add(e),me(t,"add",e,e)),this}function Be(e,t){t=ct(t);const n=ct(this),{has:r,get:i}=Re(n);let s=r.call(n,e);s||(e=ct(e),s=r.call(n,e));const o=i.call(n,e);return n.set(e,t),s?j(t,o)&&me(n,"set",e,t):me(n,"add",e,t),this}function Fe(e){const t=ct(this),{has:n,get:r}=Re(t);let i=n.call(t,e);i||(e=ct(e),i=n.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return i&&me(t,"delete",e,void 0),s}function Pe(){const e=ct(this),t=0!==e.size,n=e.clear();return t&&me(e,"clear",void 0,void 0),n}function Ue(e,t){return function(n,r){const i=this,s=i.__v_raw,o=ct(s),a=t?ze:e?Ae:Ce;return!e&&pe(o,0,ie),s.forEach(((e,t)=>n.call(r,a(e),a(t),i)))}}function je(e,t,n){return function(...r){const i=this.__v_raw,s=ct(i),o=_(s),a="entries"===e||e===Symbol.iterator&&o,u="keys"===e&&o,c=i[e](...r),h=n?ze:t?Ae:Ce;return!t&&pe(s,0,u?se:ie),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:a?[h(e[0]),h(e[1])]:h(e),done:t}},[Symbol.iterator](){return this}}}}function Ve(e){return function(...t){return"delete"!==e&&this}}function qe(){const e={get(e){return De(this,e)},get size(){return Ie(this)},has:ke,add:Le,set:Be,delete:Fe,clear:Pe,forEach:Ue(!1,!1)},t={get(e){return De(this,e,!1,!0)},get size(){return Ie(this)},has:ke,add:Le,set:Be,delete:Fe,clear:Pe,forEach:Ue(!1,!0)},n={get(e){return De(this,e,!0)},get size(){return Ie(this,!0)},has(e){return ke.call(this,e,!0)},add:Ve("add"),set:Ve("set"),delete:Ve("delete"),clear:Ve("clear"),forEach:Ue(!0,!1)},r={get(e){return De(this,e,!0,!0)},get size(){return Ie(this,!0)},has(e){return ke.call(this,e,!0)},add:Ve("add"),set:Ve("set"),delete:Ve("delete"),clear:Ve("clear"),forEach:Ue(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{e[i]=je(i,!1,!1),n[i]=je(i,!0,!1),t[i]=je(i,!1,!0),r[i]=je(i,!0,!0)})),[e,n,t,r]}const[He,$e,We,Ge]=qe();function Ye(e,t){const n=t?e?Ge:We:e?$e:He;return(t,r,i)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get(w(n,r)&&r in t?n:t,r,i)}const Ze={get:Ye(!1,!1)},Xe={get:Ye(!1,!0)},Je={get:Ye(!0,!1)},Qe=new WeakMap,Ke=new WeakMap,et=new WeakMap,tt=new WeakMap;function nt(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>A(e).slice(8,-1))(e))}function rt(e){return e&&e.__v_isReadonly?e:st(e,!1,Se,Ze,Qe)}function it(e){return st(e,!0,Te,Je,et)}function st(e,t,n,r,i){if(!T(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const o=nt(e);if(0===o)return e;const a=new Proxy(e,2===o?r:n);return i.set(e,a),a}function ot(e){return at(e)?ot(e.__v_raw):!(!e||!e.__v_isReactive)}function at(e){return!(!e||!e.__v_isReadonly)}function ut(e){return ot(e)||at(e)}function ct(e){const t=e&&e.__v_raw;return t?ct(t):e}function ht(e){return q(e,"__v_skip",!0),e}function lt(e){return Boolean(e&&!0===e.__v_isRef)}function pt(e){return lt(e)?e.value:e}const ft={get:(e,t,n)=>pt(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return lt(i)&&!lt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function dt(e){return ot(e)?e:new Proxy(e,ft)}class mt{constructor(e,t,n){this._setter=t,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new oe(e,(()=>{var e;this._dirty||(this._dirty=!0,(e=ct(e=this)).dep&&ge(e.dep))})),this.__v_isReadonly=n}get value(){const e=ct(this);var t;return t=e,fe()&&((t=ct(t)).dep||(t.dep=X()),de(t.dep)),e._dirty&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function gt(e,t){let n,r;M(e)?(n=e,r=p):(n=e.get,r=e.set);return new mt(n,r,M(e)||!e.set)}let yt;Promise.resolve();const vt=bt("component:added"),xt=bt("component:updated"),wt=bt("component:removed");function bt(e){return t=>{yt&&yt.emit(e,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}function _t(e,t,...n){const r=e.vnode.props||h;let i=n;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in r){const e=`${"modelValue"===o?"model":o}Modifiers`,{number:t,trim:s}=r[e]||h;s?i=n.map((e=>e.trim())):t&&(i=n.map(H))}let a;__VUE_PROD_DEVTOOLS__&&function(e,t,n){yt&&yt.emit("component:emit",e.appContext.app,e,t,n)}(e,t,i);let u=r[a=U(t)]||r[a=U(L(t))];!u&&s&&(u=r[a=U(F(t))]),u&&yr(u,e,6,i);const c=r[a+"Once"];if(c){if(e.emitted){if(e.emitted[a])return}else e.emitted={};e.emitted[a]=!0,yr(c,e,6,i)}}function Et(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(void 0!==i)return i;const s=e.emits;let o={},a=!1;if(__VUE_OPTIONS_API__&&!M(e)){const r=e=>{const n=Et(e,t,!0);n&&(a=!0,y(o,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return s||a?(b(s)?s.forEach((e=>o[e]=null)):y(o,s),r.set(e,o),o):(r.set(e,null),null)}function Mt(e,t){return!(!e||!m(t))&&(t=t.slice(2).replace(/Once$/,""),w(e,t[0].toLowerCase()+t.slice(1))||w(e,F(t))||w(e,t))}let Nt=null,St=null;function Tt(e){const t=Nt;return Nt=e,St=e&&e.type.__scopeId||null,t}function Ot(e){St=e}function Ct(){St=null}function At(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:u,emit:c,render:h,renderCache:l,data:p,setupState:f,ctx:d,inheritAttrs:m}=e;let y;const v=Tt(e);try{let e;if(4&n.shapeFlag){const t=i||r;y=er(h.call(t,t,l,s,f,p,d)),e=u}else{const n=t;0,y=er(n.length>1?n(s,{attrs:u,slots:a,emit:c}):n(s,null)),e=t.props?u:zt(u)}let v=y;if(e&&!1!==m){const t=Object.keys(e),{shapeFlag:n}=v;t.length&&7&n&&(o&&t.some(g)&&(e=Rt(e,o)),v=Qn(v,e))}0,n.dirs&&(v.dirs=v.dirs?v.dirs.concat(n.dirs):n.dirs),n.transition&&(v.transition=n.transition),y=v}catch(t){Fn.length=0,vr(t,e,1),y=Jn(Ln)}return Tt(v),y}const zt=e=>{let t;for(const n in e)("class"===n||"style"===n||m(n))&&((t||(t={}))[n]=e[n]);return t},Rt=(e,t)=>{const n={};for(const r in e)g(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function Dt(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!Mt(n,s))return!0}return!1}function kt(e,t,n=!1){const r=ur||Nt;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&M(t)?t.call(r.proxy):t}}const It=e=>!!e.type.__asyncLoader,Lt=e=>e.type.__isKeepAlive;function Bt(e,t){Pt(e,"a",t)}function Ft(e,t){Pt(e,"da",t)}function Pt(e,t,n=ur){const r=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}e()});if(jt(t,r,n),n){let e=n.parent;for(;e&&e.parent;)Lt(e.parent.vnode)&&Ut(r,t,n,e),e=e.parent}}function Ut(e,t,n,r){const i=jt(t,e,r,!0);Yt((()=>{v(r[t],i)}),n)}function jt(e,t,n=ur,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...r)=>{if(n.isUnmounted)return;he(),cr(n);const i=yr(t,n,e,r);return hr(),le(),i});return r?i.unshift(s):i.push(s),s}}const Vt=e=>(t,n=ur)=>(!pr||"sp"===e)&&jt(e,t,n),qt=Vt("bm"),Ht=Vt("m"),$t=Vt("bu"),Wt=Vt("u"),Gt=Vt("bum"),Yt=Vt("um"),Zt=Vt("sp"),Xt=Vt("rtg"),Jt=Vt("rtc");function Qt(e,t=ur){jt("ec",e,t)}let Kt=!0;function en(e){const t=rn(e),n=e.proxy,r=e.ctx;Kt=!1,t.beforeCreate&&tn(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:a,provide:u,inject:c,created:h,beforeMount:l,mounted:f,beforeUpdate:d,updated:m,activated:g,deactivated:y,beforeDestroy:v,beforeUnmount:x,destroyed:w,unmounted:_,render:E,renderTracked:N,renderTriggered:S,errorCaptured:O,serverPrefetch:C,expose:A,inheritAttrs:z,components:R,directives:D,filters:k}=t;if(c&&function(e,t,n=p,r=!1){b(e)&&(e=un(e));for(const n in e){const i=e[n];let s;s=T(i)?"default"in i?kt(i.from||n,i.default,!0):kt(i.from||n):kt(i),lt(s)&&r?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:e=>s.value=e}):t[n]=s}}(c,r,null,e.appContext.config.unwrapInjectedRef),o)for(const e in o){const t=o[e];M(t)&&(r[e]=t.bind(n))}if(i){const t=i.call(n,n);T(t)&&(e.data=rt(t))}if(Kt=!0,s)for(const e in s){const t=s[e],i=gt({get:M(t)?t.bind(n,n):M(t.get)?t.get.bind(n,n):p,set:!M(t)&&M(t.set)?t.set.bind(n):p});Object.defineProperty(r,e,{enumerable:!0,configurable:!0,get:()=>i.value,set:e=>i.value=e})}if(a)for(const e in a)nn(a[e],r,n,e);if(u){const e=M(u)?u.call(n):u;Reflect.ownKeys(e).forEach((t=>{!function(e,t){if(ur){let n=ur.provides;const r=ur.parent&&ur.parent.provides;r===n&&(n=ur.provides=Object.create(r)),n[e]=t}}(t,e[t])}))}function I(e,t){b(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(h&&tn(h,e,"c"),I(qt,l),I(Ht,f),I($t,d),I(Wt,m),I(Bt,g),I(Ft,y),I(Qt,O),I(Jt,N),I(Xt,S),I(Gt,x),I(Yt,_),I(Zt,C),b(A))if(A.length){const t=e.exposed||(e.exposed={});A.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});E&&e.render===p&&(e.render=E),null!=z&&(e.inheritAttrs=z),R&&(e.components=R),D&&(e.directives=D)}function tn(e,t,n){yr(b(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function nn(e,t,n,r){const i=r.includes(".")?Hr(n,r):()=>n[r];if(N(e)){const n=t[e];M(n)&&jr(i,n)}else if(M(e))jr(i,e.bind(n));else if(T(e))if(b(e))e.forEach((e=>nn(e,t,n,r)));else{const r=M(e.handler)?e.handler.bind(n):t[e.handler];M(r)&&jr(i,r,e)}}function rn(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let u;return a?u=a:i.length||n||r?(u={},i.length&&i.forEach((e=>sn(u,e,o,!0))),sn(u,t,o)):u=t,s.set(t,u),u}function sn(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&sn(e,s,n,!0),i&&i.forEach((t=>sn(e,t,n,!0)));for(const i in t)if(r&&"expose"===i);else{const r=on[i]||n&&n[i];e[i]=r?r(e[i],t[i]):t[i]}return e}const on={data:an,props:hn,emits:hn,methods:hn,computed:hn,beforeCreate:cn,created:cn,beforeMount:cn,mounted:cn,beforeUpdate:cn,updated:cn,beforeDestroy:cn,beforeUnmount:cn,destroyed:cn,unmounted:cn,activated:cn,deactivated:cn,errorCaptured:cn,serverPrefetch:cn,components:hn,directives:hn,watch:function(e,t){if(!e)return t;if(!t)return e;const n=y(Object.create(null),e);for(const r in t)n[r]=cn(e[r],t[r]);return n},provide:an,inject:function(e,t){return hn(un(e),un(t))}};function an(e,t){return t?e?function(){return y(M(e)?e.call(this,this):e,M(t)?t.call(this,this):t)}:t:e}function un(e){if(b(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function cn(e,t){return e?[...new Set([].concat(e,t))]:t}function hn(e,t){return e?y(y(Object.create(null),e),t):t}function ln(e,t,n,r=!1){const i={},s={};q(s,Gn,1),e.propsDefaults=Object.create(null),pn(e,t,i,s);for(const t in e.propsOptions[0])t in i||(i[t]=void 0);n?e.props=r?i:st(i,!1,Oe,Xe,Ke):e.type.props?e.props=i:e.props=s,e.attrs=s}function pn(e,t,n,r){const[i,s]=e.propsOptions;let o,a=!1;if(t)for(let u in t){if(D(u))continue;const c=t[u];let h;i&&w(i,h=L(u))?s&&s.includes(h)?(o||(o={}))[h]=c:n[h]=c:Mt(e.emitsOptions,u)||c!==r[u]&&(r[u]=c,a=!0)}if(s){const t=ct(n),r=o||h;for(let o=0;o<s.length;o++){const a=s[o];n[a]=fn(i,t,a,r[a],e,!w(r,a))}}return a}function fn(e,t,n,r,i,s){const o=e[n];if(null!=o){const e=w(o,"default");if(e&&void 0===r){const e=o.default;if(o.type!==Function&&M(e)){const{propsDefaults:s}=i;n in s?r=s[n]:(cr(i),r=s[n]=e.call(null,t),hr())}else r=e}o[0]&&(s&&!e?r=!1:!o[1]||""!==r&&r!==F(n)||(r=!0))}return r}function dn(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const s=e.props,o={},a=[];let u=!1;if(__VUE_OPTIONS_API__&&!M(e)){const r=e=>{u=!0;const[n,r]=dn(e,t,!0);y(o,n),r&&a.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!s&&!u)return r.set(e,l),l;if(b(s))for(let e=0;e<s.length;e++){const t=L(s[e]);mn(t)&&(o[t]=h)}else if(s)for(const e in s){const t=L(e);if(mn(t)){const n=s[e],r=o[t]=b(n)||M(n)?{type:n}:n;if(r){const e=vn(Boolean,r.type),n=vn(String,r.type);r[0]=e>-1,r[1]=n<0||e<n,(e>-1||w(r,"default"))&&a.push(t)}}}const c=[o,a];return r.set(e,c),c}function mn(e){return"$"!==e[0]}function gn(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function yn(e,t){return gn(e)===gn(t)}function vn(e,t){return b(t)?t.findIndex((t=>yn(t,e))):M(t)&&yn(t,e)?0:-1}const xn=e=>"_"===e[0]||"$stable"===e,wn=e=>b(e)?e.map(er):[er(e)],bn=(e,t,n)=>{const r=function(e,t=Nt,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&Vn(-1);const i=Tt(t),s=e(...n);return Tt(i),r._d&&Vn(1),__VUE_PROD_DEVTOOLS__&&xt(t),s};return r._n=!0,r._c=!0,r._d=!0,r}(((...e)=>wn(t(...e))),n);return r._c=!1,r},_n=(e,t,n)=>{const r=e._ctx;for(const n in e){if(xn(n))continue;const i=e[n];if(M(i))t[n]=bn(0,i,r);else if(null!=i){const e=wn(i);t[n]=()=>e}}},En=(e,t)=>{const n=wn(t);e.slots.default=()=>n};function Mn(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let u=a.dir[r];u&&(he(),yr(u,n,8,[e.el,a,e,t]),le())}}function Nn(){return{app:null,config:{isNativeTag:f,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sn=0;function Tn(e,t){return function(n,r=null){null==r||T(r)||(r=null);const i=Nn(),s=new Set;let o=!1;const a=i.app={_uid:Sn++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Wr,get config(){return i.config},set config(e){},use:(e,...t)=>(s.has(e)||(e&&M(e.install)?(s.add(e),e.install(a,...t)):M(e)&&(s.add(e),e(a,...t))),a),mixin:e=>(__VUE_OPTIONS_API__&&(i.mixins.includes(e)||i.mixins.push(e)),a),component:(e,t)=>t?(i.components[e]=t,a):i.components[e],directive:(e,t)=>t?(i.directives[e]=t,a):i.directives[e],mount(s,u,c){if(!o){const h=Jn(n,r);return h.appContext=i,u&&t?t(h,s):e(h,s,c),o=!0,a._container=s,s.__vue_app__=a,__VUE_PROD_DEVTOOLS__&&(a._instance=h.component,function(e,t){yt&&yt.emit("app:init",e,t,{Fragment:kn,Text:In,Comment:Ln,Static:Bn})}(a,Wr)),h.component.proxy}},unmount(){o&&(e(null,a._container),__VUE_PROD_DEVTOOLS__&&(a._instance=null,function(e){yt&&yt.emit("app:unmount",e)}(a)),delete a._container.__vue_app__)},provide:(e,t)=>(i.provides[e]=t,a)};return a}}const On=function(e,t){t&&t.pendingBranch?b(e)?t.effects.push(...e):t.effects.push(e):Ir(e,Tr,Sr,Or)};function Cn(e){return function(e,t){if(function(){"boolean"!=typeof __VUE_OPTIONS_API__&&(W().__VUE_OPTIONS_API__=!0),"boolean"!=typeof __VUE_PROD_DEVTOOLS__&&(W().__VUE_PROD_DEVTOOLS__=!1)}(),__VUE_PROD_DEVTOOLS__){const e=W();e.__VUE__=!0,n=e.__VUE_DEVTOOLS_GLOBAL_HOOK__,yt=n}var n;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:u,setText:c,setElementText:f,parentNode:d,nextSibling:m,setScopeId:g=p,cloneNode:v,insertStaticContent:x}=e,b=(e,t,n,r=null,i=null,s=null,o=!1,a=null,u=!!t.dynamicChildren)=>{if(e===t)return;e&&!Wn(e,t)&&(r=re(e),Q(e,i,s,!0),e=null),-2===t.patchFlag&&(u=!1,t.dynamicChildren=null);const{type:c,ref:h,shapeFlag:l}=t;switch(c){case In:_(e,t,n,r);break;case Ln:E(e,t,n,r);break;case Bn:null==e&&M(t,n,r,o);break;case kn:B(e,t,n,r,i,s,o,a,u);break;default:1&l?T(e,t,n,r,i,s,o,a,u):6&l?P(e,t,n,r,i,s,o,a,u):(64&l||128&l)&&c.process(e,t,n,r,i,s,o,a,u,se)}null!=h&&i&&An(h,e&&e.ref,s,t||e,!t)},_=(e,t,n,i)=>{if(null==e)r(t.el=a(t.children),n,i);else{const n=t.el=e.el;t.children!==e.children&&c(n,t.children)}},E=(e,t,n,i)=>{null==e?r(t.el=u(t.children||""),n,i):t.el=e.el},M=(e,t,n,r)=>{[e.el,e.anchor]=x(e.children,t,n,r)},N=({el:e,anchor:t},n,i)=>{let s;for(;e&&e!==t;)s=m(e),r(e,n,i),e=s;r(t,n,i)},S=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=m(e),i(e),e=n;i(t)},T=(e,t,n,r,i,s,o,a,u)=>{o=o||"svg"===t.type,null==e?C(t,n,r,i,s,o,a,u):R(e,t,i,s,o,a,u)},C=(e,t,n,i,a,u,c,h)=>{let l,p;const{type:d,props:m,shapeFlag:g,transition:y,patchFlag:x,dirs:w}=e;if(e.el&&void 0!==v&&-1===x)l=e.el=v(e.el);else{if(l=e.el=o(e.type,u,m&&m.is,m),8&g?f(l,e.children):16&g&&z(e.children,l,null,i,a,u&&"foreignObject"!==d,c,h),w&&Mn(e,null,i,"created"),m){for(const t in m)"value"===t||D(t)||s(l,t,null,m[t],u,e.children,i,a,ne);"value"in m&&s(l,"value",null,m.value),(p=m.onVnodeBeforeMount)&&zn(p,i,e)}A(l,e,e.scopeId,c,i)}__VUE_PROD_DEVTOOLS__&&(Object.defineProperty(l,"__vnode",{value:e,enumerable:!1}),Object.defineProperty(l,"__vueParentComponent",{value:i,enumerable:!1})),w&&Mn(e,null,i,"beforeMount");const b=(!a||a&&!a.pendingBranch)&&y&&!y.persisted;b&&y.beforeEnter(l),r(l,t,n),((p=m&&m.onVnodeMounted)||b||w)&&On((()=>{p&&zn(p,i,e),b&&y.enter(l),w&&Mn(e,null,i,"mounted")}),a)},A=(e,t,n,r,i)=>{if(n&&g(e,n),r)for(let t=0;t<r.length;t++)g(e,r[t]);if(i){if(t===i.subTree){const t=i.vnode;A(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},z=(e,t,n,r,i,s,o,a,u=0)=>{for(let c=u;c<e.length;c++){const u=e[c]=a?tr(e[c]):er(e[c]);b(null,u,t,n,r,i,s,o,a)}},R=(e,t,n,r,i,o,a)=>{const u=t.el=e.el;let{patchFlag:c,dynamicChildren:l,dirs:p}=t;c|=16&e.patchFlag;const d=e.props||h,m=t.props||h;let g;(g=m.onVnodeBeforeUpdate)&&zn(g,n,t,e),p&&Mn(t,e,n,"beforeUpdate");const y=i&&"foreignObject"!==t.type;if(l?k(e.dynamicChildren,l,u,n,r,y,o):a||G(e,t,u,null,n,r,y,o,!1),c>0){if(16&c)I(u,t,d,m,n,r,i);else if(2&c&&d.class!==m.class&&s(u,"class",null,m.class,i),4&c&&s(u,"style",d.style,m.style,i),8&c){const o=t.dynamicProps;for(let t=0;t<o.length;t++){const a=o[t],c=d[a],h=m[a];h===c&&"value"!==a||s(u,a,c,h,i,e.children,n,r,ne)}}1&c&&e.children!==t.children&&f(u,t.children)}else a||null!=l||I(u,t,d,m,n,r,i);((g=m.onVnodeUpdated)||p)&&On((()=>{g&&zn(g,n,t,e),p&&Mn(t,e,n,"updated")}),r)},k=(e,t,n,r,i,s,o)=>{for(let a=0;a<t.length;a++){const u=e[a],c=t[a],h=u.el&&(u.type===kn||!Wn(u,c)||70&u.shapeFlag)?d(u.el):n;b(u,c,h,null,r,i,s,o,!0)}},I=(e,t,n,r,i,o,a)=>{if(n!==r){for(const u in r){if(D(u))continue;const c=r[u],h=n[u];c!==h&&"value"!==u&&s(e,u,h,c,a,t.children,i,o,ne)}if(n!==h)for(const u in n)D(u)||u in r||s(e,u,n[u],null,a,t.children,i,o,ne);"value"in r&&s(e,"value",n.value,r.value)}},B=(e,t,n,i,s,o,u,c,h)=>{const l=t.el=e?e.el:a(""),p=t.anchor=e?e.anchor:a("");let{patchFlag:f,dynamicChildren:d,slotScopeIds:m}=t;m&&(c=c?c.concat(m):m),null==e?(r(l,n,i),r(p,n,i),z(t.children,n,p,s,o,u,c,h)):f>0&&64&f&&d&&e.dynamicChildren?(k(e.dynamicChildren,d,n,s,o,u,c),(null!=t.key||s&&t===s.subTree)&&Rn(e,t,!0)):G(e,t,n,p,s,o,u,c,h)},P=(e,t,n,r,i,s,o,a,u)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,o,u):U(t,n,r,i,s,o,u):j(e,t,u)},U=(e,t,n,r,i,s,o)=>{const a=e.component=function(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||or,s={uid:ar++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,update:null,scope:new Z(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:dn(r,i),emitsOptions:Et(r,i),emit:null,emitted:null,propsDefaults:h,inheritAttrs:r.inheritAttrs,ctx:h,data:h,props:h,attrs:h,slots:h,refs:h,setupState:h,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};s.ctx={_:s},s.root=t?t.root:s,s.emit=_t.bind(null,s),e.ce&&e.ce(s);return s}(e,r,i);if(Lt(e)&&(a.ctx.renderer=se),function(e,t=!1){pr=t;const{props:n,children:r}=e.vnode,i=lr(e);ln(e,n,i,t),((e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=ct(t),q(t,"_",n)):_n(t,e.slots={})}else e.slots={},t&&En(e,t);q(e.slots,Gn,1)})(e,r);const s=i?function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=ht(new Proxy(e.ctx,sr));const{setup:r}=n;if(r){const n=e.setupContext=r.length>1?function(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=function(e){return new Proxy(e.attrs,{get:(t,n)=>(pe(e,0,"$attrs"),t[n])})}(e))},slots:e.slots,emit:e.emit,expose:t}}(e):null;cr(e),he();const i=gr(r,e,0,[e.props,n]);if(le(),hr(),O(i)){if(i.then(hr,hr),t)return i.then((t=>{fr(e,t)})).catch((t=>{vr(t,e,0)}));e.asyncDep=i}else fr(e,i)}else dr(e)}(e,t):void 0;pr=!1}(a),a.asyncDep){if(i&&i.registerDep(a,H),!e.el){const e=a.subTree=Jn(Ln);E(null,e,t,n)}}else H(a,e,t,n,i,s,o)},j=(e,t,n)=>{const r=t.component=e.component;if(function(e,t,n){const{props:r,children:i,component:s}=e,{props:o,children:a,patchFlag:u}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&u>=0))return!(!i&&!a||a&&a.$stable)||r!==o&&(r?!o||Dt(r,o,c):!!o);if(1024&u)return!0;if(16&u)return r?Dt(r,o,c):!!o;if(8&u){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(o[n]!==r[n]&&!Mt(c,n))return!0}}return!1}(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void $(r,t,n);r.next=t,function(e){const t=br.indexOf(e);t>_r&&br.splice(t,1)}(r.update),r.update()}else t.component=e.component,t.el=e.el,r.vnode=t},H=(e,t,n,r,i,s,o)=>{const a=new oe((()=>{if(e.isMounted){let t,{next:n,bu:r,u:u,parent:c,vnode:h}=e,l=n;a.allowRecurse=!1,n?(n.el=h.el,$(e,n,o)):n=h,r&&V(r),(t=n.props&&n.props.onVnodeBeforeUpdate)&&zn(t,c,n,h),a.allowRecurse=!0;const p=At(e),f=e.subTree;e.subTree=p,b(f,p,d(f.el),re(f),e,i,s),n.el=p.el,null===l&&function({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}(e,p.el),u&&On(u,i),(t=n.props&&n.props.onVnodeUpdated)&&On((()=>zn(t,c,n,h)),i),__VUE_PROD_DEVTOOLS__&&xt(e)}else{let o;const{el:u,props:c}=t,{bm:h,m:l,parent:p}=e,f=It(t);if(a.allowRecurse=!1,h&&V(h),!f&&(o=c&&c.onVnodeBeforeMount)&&zn(o,p,t),a.allowRecurse=!0,u&&ue){const n=()=>{e.subTree=At(e),ue(u,e.subTree,e,i,null)};f?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{const o=e.subTree=At(e);b(null,o,n,r,e,i,s),t.el=o.el}if(l&&On(l,i),!f&&(o=c&&c.onVnodeMounted)){const e=t;On((()=>zn(o,p,e)),i)}256&t.shapeFlag&&e.a&&On(e.a,i),e.isMounted=!0,__VUE_PROD_DEVTOOLS__&&vt(e),t=n=r=null}}),(()=>Dr(e.update)),e.scope),u=e.update=a.run.bind(a);u.id=e.uid,a.allowRecurse=u.allowRecurse=!0,u()},$=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,a=ct(i),[u]=e.propsOptions;let c=!1;if(!(r||o>0)||16&o){let r;pn(e,t,i,s)&&(c=!0);for(const s in a)t&&(w(t,s)||(r=F(s))!==s&&w(t,r))||(u?!n||void 0===n[s]&&void 0===n[r]||(i[s]=fn(u,a,s,void 0,e,!0)):delete i[s]);if(s!==a)for(const e in s)t&&w(t,e)||(delete s[e],c=!0)}else if(8&o){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];const h=t[o];if(u)if(w(s,o))h!==s[o]&&(s[o]=h,c=!0);else{const t=L(o);i[t]=fn(u,a,t,h,e,!1)}else h!==s[o]&&(s[o]=h,c=!0)}}c&&me(e,"set","$attrs")}(e,t.props,r,n),((e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,o=h;if(32&r.shapeFlag){const e=t._;e?n&&1===e?s=!1:(y(i,t),n||1!==e||delete i._):(s=!t.$stable,_n(t,i)),o=t}else t&&(En(e,t),o={default:1});if(s)for(const e in i)xn(e)||e in o||delete i[e]})(e,t.children,n),he(),Lr(void 0,e.update),le()},G=(e,t,n,r,i,s,o,a,u=!1)=>{const c=e&&e.children,h=e?e.shapeFlag:0,l=t.children,{patchFlag:p,shapeFlag:d}=t;if(p>0){if(128&p)return void X(c,l,n,r,i,s,o,a,u);if(256&p)return void Y(c,l,n,r,i,s,o,a,u)}8&d?(16&h&&ne(c,i,s),l!==c&&f(n,l)):16&h?16&d?X(c,l,n,r,i,s,o,a,u):ne(c,i,s,!0):(8&h&&f(n,""),16&d&&z(l,n,r,i,s,o,a,u))},Y=(e,t,n,r,i,s,o,a,u)=>{t=t||l;const c=(e=e||l).length,h=t.length,p=Math.min(c,h);let f;for(f=0;f<p;f++){const r=t[f]=u?tr(t[f]):er(t[f]);b(e[f],r,n,null,i,s,o,a,u)}c>h?ne(e,i,s,!0,!1,p):z(t,n,r,i,s,o,a,u,p)},X=(e,t,n,r,i,s,o,a,u)=>{let c=0;const h=t.length;let p=e.length-1,f=h-1;for(;c<=p&&c<=f;){const r=e[c],h=t[c]=u?tr(t[c]):er(t[c]);if(!Wn(r,h))break;b(r,h,n,null,i,s,o,a,u),c++}for(;c<=p&&c<=f;){const r=e[p],c=t[f]=u?tr(t[f]):er(t[f]);if(!Wn(r,c))break;b(r,c,n,null,i,s,o,a,u),p--,f--}if(c>p){if(c<=f){const e=f+1,l=e<h?t[e].el:r;for(;c<=f;)b(null,t[c]=u?tr(t[c]):er(t[c]),n,l,i,s,o,a,u),c++}}else if(c>f)for(;c<=p;)Q(e[c],i,s,!0),c++;else{const d=c,m=c,g=new Map;for(c=m;c<=f;c++){const e=t[c]=u?tr(t[c]):er(t[c]);null!=e.key&&g.set(e.key,c)}let y,v=0;const x=f-m+1;let w=!1,_=0;const E=new Array(x);for(c=0;c<x;c++)E[c]=0;for(c=d;c<=p;c++){const r=e[c];if(v>=x){Q(r,i,s,!0);continue}let h;if(null!=r.key)h=g.get(r.key);else for(y=m;y<=f;y++)if(0===E[y-m]&&Wn(r,t[y])){h=y;break}void 0===h?Q(r,i,s,!0):(E[h-m]=c+1,h>=_?_=h:w=!0,b(r,t[h],n,null,i,s,o,a,u),v++)}const M=w?function(e){const t=e.slice(),n=[0];let r,i,s,o,a;const u=e.length;for(r=0;r<u;r++){const u=e[r];if(0!==u){if(i=n[n.length-1],e[i]<u){t[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,e[n[a]]<u?s=a+1:o=a;u<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}s=n.length,o=n[s-1];for(;s-- >0;)n[s]=o,o=t[o];return n}(E):l;for(y=M.length-1,c=x-1;c>=0;c--){const e=m+c,l=t[e],p=e+1<h?t[e+1].el:r;0===E[c]?b(null,l,n,p,i,s,o,a,u):w&&(y<0||c!==M[y]?J(l,n,p,2):y--)}}},J=(e,t,n,i,s=null)=>{const{el:o,type:a,transition:u,children:c,shapeFlag:h}=e;if(6&h)return void J(e.component.subTree,t,n,i);if(128&h)return void e.suspense.move(t,n,i);if(64&h)return void a.move(e,t,n,se);if(a===kn){r(o,t,n);for(let e=0;e<c.length;e++)J(c[e],t,n,i);return void r(e.anchor,t,n)}if(a===Bn)return void N(e,t,n);if(2!==i&&1&h&&u)if(0===i)u.beforeEnter(o),r(o,t,n),On((()=>u.enter(o)),s);else{const{leave:e,delayLeave:i,afterLeave:s}=u,a=()=>r(o,t,n),c=()=>{e(o,(()=>{a(),s&&s()}))};i?i(o,a,c):c()}else r(o,t,n)},Q=(e,t,n,r=!1,i=!1)=>{const{type:s,props:o,ref:a,children:u,dynamicChildren:c,shapeFlag:h,patchFlag:l,dirs:p}=e;if(null!=a&&An(a,null,n,e,!0),256&h)return void t.ctx.deactivate(e);const f=1&h&&p,d=!It(e);let m;if(d&&(m=o&&o.onVnodeBeforeUnmount)&&zn(m,t,e),6&h)te(e.component,n,r);else{if(128&h)return void e.suspense.unmount(n,r);f&&Mn(e,null,t,"beforeUnmount"),64&h?e.type.remove(e,t,n,i,se,r):c&&(s!==kn||l>0&&64&l)?ne(c,t,n,!1,!0):(s===kn&&384&l||!i&&16&h)&&ne(u,t,n),r&&K(e)}(d&&(m=o&&o.onVnodeUnmounted)||f)&&On((()=>{m&&zn(m,t,e),f&&Mn(e,null,t,"unmounted")}),n)},K=e=>{const{type:t,el:n,anchor:r,transition:s}=e;if(t===kn)return void ee(n,r);if(t===Bn)return void S(e);const o=()=>{i(n),s&&!s.persisted&&s.afterLeave&&s.afterLeave()};if(1&e.shapeFlag&&s&&!s.persisted){const{leave:t,delayLeave:r}=s,i=()=>t(n,o);r?r(e.el,o,i):i()}else o()},ee=(e,t)=>{let n;for(;e!==t;)n=m(e),i(e),e=n;i(t)},te=(e,t,n)=>{const{bum:r,scope:i,update:s,subTree:o,um:a}=e;r&&V(r),i.stop(),s&&(s.active=!1,Q(o,e,t,n)),a&&On(a,t),On((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve()),__VUE_PROD_DEVTOOLS__&&wt(e)},ne=(e,t,n,r=!1,i=!1,s=0)=>{for(let o=s;o<e.length;o++)Q(e[o],t,n,r,i)},re=e=>6&e.shapeFlag?re(e.component.subTree):128&e.shapeFlag?e.suspense.next():m(e.anchor||e.el),ie=(e,t,n)=>{null==e?t._vnode&&Q(t._vnode,null,null,!0):b(t._vnode||null,e,t,null,null,null,n),Br(),t._vnode=e},se={p:b,um:Q,m:J,r:K,mt:U,mc:z,pc:G,pbc:k,n:re,o:e};let ae,ue;t&&([ae,ue]=t(se));return{render:ie,hydrate:ae,createApp:Tn(ie,ae)}}(e)}function An(e,t,n,r,i=!1){if(b(e))return void e.forEach(((e,s)=>An(e,t&&(b(t)?t[s]:t),n,r,i)));if(It(r)&&!i)return;const s=4&r.shapeFlag?mr(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:u}=e,c=t&&t.r,l=a.refs===h?a.refs={}:a.refs,p=a.setupState;if(null!=c&&c!==u&&(N(c)?(l[c]=null,w(p,c)&&(p[c]=null)):lt(c)&&(c.value=null)),N(u)){const e=()=>{l[u]=o,w(p,u)&&(p[u]=o)};o?(e.id=-1,On(e,n)):e()}else if(lt(u)){const e=()=>{u.value=o};o?(e.id=-1,On(e,n)):e()}else M(u)&&gr(u,a,12,[o,l])}function zn(e,t,n,r=null){yr(e,t,7,[n,r])}function Rn(e,t,n=!1){const r=e.children,i=t.children;if(b(r)&&b(i))for(let e=0;e<r.length;e++){const t=r[e];let s=i[e];1&s.shapeFlag&&!s.dynamicChildren&&((s.patchFlag<=0||32===s.patchFlag)&&(s=i[e]=tr(i[e]),s.el=t.el),n||Rn(t,s))}}const Dn=Symbol(),kn=Symbol(void 0),In=Symbol(void 0),Ln=Symbol(void 0),Bn=Symbol(void 0),Fn=[];let Pn=null;function Un(e=!1){Fn.push(Pn=e?null:[])}let jn=1;function Vn(e){jn+=e}function qn(e){return e.dynamicChildren=jn>0?Pn||l:null,Fn.pop(),Pn=Fn[Fn.length-1]||null,jn>0&&Pn&&Pn.push(e),e}function Hn(e,t,n,r,i,s){return qn(Xn(e,t,n,r,i,s,!0))}function $n(e){return!!e&&!0===e.__v_isVNode}function Wn(e,t){return e.type===t.type&&e.key===t.key}const Gn="__vInternal",Yn=({key:e})=>null!=e?e:null,Zn=({ref:e})=>null!=e?N(e)||lt(e)||M(e)?{i:Nt,r:e}:e:null;function Xn(e,t=null,n=null,r=0,i=null,s=(e===kn?0:1),o=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Yn(t),ref:t&&Zn(t),scopeId:St,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return a?(nr(u,n),128&s&&e.normalize(u)):n&&(u.shapeFlag|=N(n)?8:16),jn>0&&!o&&Pn&&(u.patchFlag>0||6&s)&&32!==u.patchFlag&&Pn.push(u),u}const Jn=function(e,t=null,n=null,i=0,s=null,o=!1){e&&e!==Dn||(e=Ln);if($n(e)){const r=Qn(e,t,!0);return n&&nr(r,n),r}u=e,M(u)&&"__vccOpts"in u&&(e=e.__vccOpts);var u;if(t){t=function(e){return e?ut(e)||Gn in e?y({},e):e:null}(t);let{class:e,style:n}=t;e&&!N(e)&&(t.class=a(e)),T(n)&&(ut(n)&&!b(n)&&(n=y({},n)),t.style=r(n))}const c=N(e)?1:(e=>e.__isSuspense)(e)?128:(e=>e.__isTeleport)(e)?64:T(e)?4:M(e)?2:0;return Xn(e,t,n,i,s,c,o,!0)};function Qn(e,t,n=!1){const{props:i,ref:s,patchFlag:o,children:u}=e,c=t?function(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const e in i)if("class"===e)t.class!==i.class&&(t.class=a([t.class,i.class]));else if("style"===e)t.style=r([t.style,i.style]);else if(m(e)){const n=t[e],r=i[e];n!==r&&(t[e]=n?[].concat(n,r):r)}else""!==e&&(t[e]=i[e])}return t}(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Yn(c),ref:t&&t.ref?n&&s?b(s)?s.concat(Zn(t)):[s,Zn(t)]:Zn(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==kn?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Qn(e.ssContent),ssFallback:e.ssFallback&&Qn(e.ssFallback),el:e.el,anchor:e.anchor}}function Kn(e=" ",t=0){return Jn(In,null,e,t)}function er(e){return null==e||"boolean"==typeof e?Jn(Ln):b(e)?Jn(kn,null,e.slice()):"object"==typeof e?tr(e):Jn(In,null,String(e))}function tr(e){return null===e.el||e.memo?e:Qn(e)}function nr(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(b(t))n=16;else if("object"==typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),nr(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||Gn in t?3===r&&Nt&&(1===Nt.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=Nt}}else M(t)?(t={default:t,_ctx:Nt},n=32):(t=String(t),64&r?(n=16,t=[Kn(t)]):n=8);e.children=t,e.shapeFlag|=n}const rr=e=>e?lr(e)?mr(e)||e.proxy:rr(e.parent):null,ir=y(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>rr(e.parent),$root:e=>rr(e.root),$emit:e=>e.emit,$options:e=>__VUE_OPTIONS_API__?rn(e):e.type,$forceUpdate:e=>()=>Dr(e.update),$nextTick:e=>Rr.bind(e.proxy),$watch:e=>__VUE_OPTIONS_API__?qr.bind(e):p}),sr={get({_:e},t){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:u}=e;let c;if("$"!==t[0]){const a=o[t];if(void 0!==a)switch(a){case 0:return r[t];case 1:return i[t];case 3:return n[t];case 2:return s[t]}else{if(r!==h&&w(r,t))return o[t]=0,r[t];if(i!==h&&w(i,t))return o[t]=1,i[t];if((c=e.propsOptions[0])&&w(c,t))return o[t]=2,s[t];if(n!==h&&w(n,t))return o[t]=3,n[t];__VUE_OPTIONS_API__&&!Kt||(o[t]=4)}}const l=ir[t];let p,f;return l?("$attrs"===t&&pe(e,0,t),l(e)):(p=a.__cssModules)&&(p=p[t])?p:n!==h&&w(n,t)?(o[t]=3,n[t]):(f=u.config.globalProperties,w(f,t)?f[t]:void 0)},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;if(i!==h&&w(i,t))i[t]=n;else if(r!==h&&w(r,t))r[t]=n;else if(w(e.props,t))return!1;return("$"!==t[0]||!(t.slice(1)in e))&&(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return void 0!==n[o]||e!==h&&w(e,o)||t!==h&&w(t,o)||(a=s[0])&&w(a,o)||w(r,o)||w(ir,o)||w(i.config.globalProperties,o)}},or=Nn();let ar=0;let ur=null;const cr=e=>{ur=e,e.scope.on()},hr=()=>{ur&&ur.scope.off(),ur=null};function lr(e){return 4&e.vnode.shapeFlag}let pr=!1;function fr(e,t,n){M(t)?e.render=t:T(t)&&(__VUE_PROD_DEVTOOLS__&&(e.devtoolsRawSetupState=t),e.setupState=dt(t)),dr(e)}function dr(e,t,n){const r=e.type;e.render||(e.render=r.render||p),__VUE_OPTIONS_API__&&(cr(e),he(),en(e),le(),hr())}function mr(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(dt(ht(e.exposed)),{get:(t,n)=>n in t?t[n]:n in ir?ir[n](e):void 0}))}function gr(e,t,n,r){let i;try{i=r?e(...r):e()}catch(e){vr(e,t,n)}return i}function yr(e,t,n,r){if(M(e)){const i=gr(e,t,n,r);return i&&O(i)&&i.catch((e=>{vr(e,t,n)})),i}const i=[];for(let s=0;s<e.length;s++)i.push(yr(e[s],t,n,r));return i}function vr(e,t,n,r=!0){t&&t.vnode;if(t){let r=t.parent;const i=t.proxy,s=n;for(;r;){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,s))return;r=r.parent}const o=t.appContext.config.errorHandler;if(o)return void gr(o,null,10,[e,i,s])}!function(e,t,n,r=!0){console.error(e)}(e,0,0,r)}let xr=!1,wr=!1;const br=[];let _r=0;const Er=[];let Mr=null,Nr=0;const Sr=[];let Tr=null,Or=0;const Cr=Promise.resolve();let Ar=null,zr=null;function Rr(e){const t=Ar||Cr;return e?t.then(this?e.bind(this):e):t}function Dr(e){br.length&&br.includes(e,xr&&e.allowRecurse?_r+1:_r)||e===zr||(null==e.id?br.push(e):br.splice(function(e){let t=_r+1,n=br.length;for(;t<n;){const r=t+n>>>1;Fr(br[r])<e?t=r+1:n=r}return t}(e.id),0,e),kr())}function kr(){xr||wr||(wr=!0,Ar=Cr.then(Pr))}function Ir(e,t,n,r){b(e)?n.push(...e):t&&t.includes(e,e.allowRecurse?r+1:r)||n.push(e),kr()}function Lr(e,t=null){if(Er.length){for(zr=t,Mr=[...new Set(Er)],Er.length=0,Nr=0;Nr<Mr.length;Nr++)Mr[Nr]();Mr=null,Nr=0,zr=null,Lr(e,t)}}function Br(e){if(Sr.length){const e=[...new Set(Sr)];if(Sr.length=0,Tr)return void Tr.push(...e);for(Tr=e,Tr.sort(((e,t)=>Fr(e)-Fr(t))),Or=0;Or<Tr.length;Or++)Tr[Or]();Tr=null,Or=0}}const Fr=e=>null==e.id?1/0:e.id;function Pr(e){wr=!1,xr=!0,Lr(e),br.sort(((e,t)=>Fr(e)-Fr(t)));try{for(_r=0;_r<br.length;_r++){const e=br[_r];e&&!1!==e.active&&gr(e,null,14)}}finally{_r=0,br.length=0,Br(),xr=!1,Ar=null,(br.length||Er.length||Sr.length)&&Pr(e)}}const Ur={};function jr(e,t,n){return Vr(e,t,n)}function Vr(e,t,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=h){const a=ur;let u,c,l=!1,f=!1;if(lt(e)?(u=()=>e.value,l=!!e._shallow):ot(e)?(u=()=>e,r=!0):b(e)?(f=!0,l=e.some(ot),u=()=>e.map((e=>lt(e)?e.value:ot(e)?$r(e):M(e)?gr(e,a,2):void 0))):u=M(e)?t?()=>gr(e,a,2):()=>{if(!a||!a.isUnmounted)return c&&c(),yr(e,a,3,[d])}:p,t&&r){const e=u;u=()=>$r(e())}let d=e=>{c=x.onStop=()=>{gr(e,a,4)}},m=f?[]:Ur;const g=()=>{if(x.active)if(t){const e=x.run();(r||l||(f?e.some(((e,t)=>j(e,m[t]))):j(e,m)))&&(c&&c(),yr(t,a,3,[e,m===Ur?void 0:m,d]),m=e)}else x.run()};let y;g.allowRecurse=!!t,y="sync"===i?g:"post"===i?()=>On(g,a&&a.suspense):()=>{!a||a.isMounted?function(e){Ir(e,Mr,Er,Nr)}(g):g()};const x=new oe(u,y);return t?n?g():m=x.run():"post"===i?On(x.run.bind(x),a&&a.suspense):x.run(),()=>{x.stop(),a&&a.scope&&v(a.scope.effects,x)}}function qr(e,t,n){const r=this.proxy,i=N(e)?e.includes(".")?Hr(r,e):()=>r[e]:e.bind(r,r);let s;M(t)?s=t:(s=t.handler,n=t);const o=ur;cr(this);const a=Vr(i,s.bind(r),n);return o?cr(o):hr(),a}function Hr(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function $r(e,t=new Set){if(!T(e)||e.__v_skip)return e;if((t=t||new Set).has(e))return e;if(t.add(e),lt(e))$r(e.value,t);else if(b(e))for(let n=0;n<e.length;n++)$r(e[n],t);else if(E(e)||_(e))e.forEach((e=>{$r(e,t)}));else if(z(e))for(const n in e)$r(e[n],t);return e}const Wr="3.2.11",Gr="undefined"!=typeof document?document:null,Yr=new Map,Zr={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?Gr.createElementNS("http://www.w3.org/2000/svg",e):Gr.createElement(e,n?{is:n}:void 0);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:e=>Gr.createTextNode(e),createComment:e=>Gr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Gr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,r){const i=n?n.previousSibling:t.lastChild;let s=Yr.get(e);if(!s){const t=Gr.createElement("template");if(t.innerHTML=r?`<svg>${e}</svg>`:e,s=t.content,r){const e=s.firstChild;for(;e.firstChild;)s.appendChild(e.firstChild);s.removeChild(e)}Yr.set(e,s)}return t.insertBefore(s.cloneNode(!0),n),[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};const Xr=/\s*!important$/;function Jr(e,t,n){if(b(n))n.forEach((n=>Jr(e,t,n)));else if(t.startsWith("--"))e.setProperty(t,n);else{const r=function(e,t){const n=Kr[t];if(n)return n;let r=L(t);if("filter"!==r&&r in e)return Kr[t]=r;r=P(r);for(let n=0;n<Qr.length;n++){const i=Qr[n]+r;if(i in e)return Kr[t]=i}return t}(e,t);Xr.test(n)?e.setProperty(F(r),n.replace(Xr,""),"important"):e[r]=n}}const Qr=["Webkit","Moz","ms"],Kr={};const ei="http://www.w3.org/1999/xlink";let ti=Date.now,ni=!1;if("undefined"!=typeof window){ti()>document.createEvent("Event").timeStamp&&(ti=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);ni=!!(e&&Number(e[1])<=53)}let ri=0;const ii=Promise.resolve(),si=()=>{ri=0};function oi(e,t,n,r,i=null){const s=e._vei||(e._vei={}),o=s[t];if(r&&o)o.value=r;else{const[n,a]=function(e){let t;if(ai.test(e)){let n;for(t={};n=e.match(ai);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[F(e.slice(2)),t]}(t);if(r){!function(e,t,n,r){e.addEventListener(t,n,r)}(e,n,s[t]=function(e,t){const n=e=>{const r=e.timeStamp||ti();(ni||r>=n.attached-1)&&yr(function(e,t){if(b(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=(()=>ri||(ii.then(si),ri=ti()))(),n}(r,i),a)}else o&&(!function(e,t,n,r){e.removeEventListener(t,n,r)}(e,n,o,a),s[t]=void 0)}}const ai=/(?:Once|Passive|Capture)$/;const ui=/^on[a-z]/;const ci=y({patchProp:(e,r,i,s,o=!1,a,u,c,h)=>{"class"===r?function(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,s,o):"style"===r?function(e,t,n){const r=e.style,i=r.display;if(n)if(N(n))t!==n&&(r.cssText=n);else{for(const e in n)Jr(r,e,n[e]);if(t&&!N(t))for(const e in t)null==n[e]&&Jr(r,e,"")}else e.removeAttribute("style");"_vod"in e&&(r.display=i)}(e,i,s):m(r)?g(r)||oi(e,r,0,s,u):("."===r[0]?(r=r.slice(1),1):"^"===r[0]?(r=r.slice(1),0):function(e,t,n,r){if(r)return"innerHTML"===t||"textContent"===t||!!(t in e&&ui.test(t)&&M(n));if("spellcheck"===t||"draggable"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if(ui.test(t)&&N(n))return!1;return t in e}(e,r,s,o))?function(e,t,r,i,s,o,a){if("innerHTML"===t||"textContent"===t)return i&&a(i,s,o),void(e[t]=null==r?"":r);if("value"===t&&"PROGRESS"!==e.tagName){e._value=r;const n=null==r?"":r;return e.value!==n&&(e.value=n),void(null==r&&e.removeAttribute(t))}if(""===r||null==r){const i=typeof e[t];if("boolean"===i)return void(e[t]=n(r));if(null==r&&"string"===i)return e[t]="",void e.removeAttribute(t);if("number"===i){try{e[t]=0}catch(e){}return void e.removeAttribute(t)}}try{e[t]=r}catch(e){}}(e,r,s,a,u,c,h):("true-value"===r?e._trueValue=s:"false-value"===r&&(e._falseValue=s),function(e,r,i,s,o){if(s&&r.startsWith("xlink:"))null==i?e.removeAttributeNS(ei,r.slice(6,r.length)):e.setAttributeNS(ei,r,i);else{const s=t(r);null==i||s&&!n(i)?e.removeAttribute(r):e.setAttribute(r,s?"":i)}}(e,r,s,o))}},Zr);let hi;const li=(...e)=>{const t=(hi||(hi=Cn(ci))).createApp(...e),{mount:n}=t;return t.mount=e=>{const r=function(e){if(N(e)){return document.querySelector(e)}return e}(e);if(!r)return;const i=t._component;M(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const s=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},t};var pi="https://resources.realitymedia.digital/vue-apps/dist/1a6ace377133f14a.png";Ot("data-v-0a280960");const fi={"xr-layer":"",class:"fade"},di=Xn("p",null," Here's some more text just to make things not blank. ",-1);Ct();var mi={props:{msg:String},setup(e){const t=kt("shared");return(n,r)=>(Un(),Hn(kn,null,[Xn("h1",fi,u(e.msg),1),di,Xn("button",{"xr-layer":"",onClick:r[0]||(r[0]=(...e)=>pt(t).increment&&pt(t).increment(...e))},"count is: "+u(pt(t).state.count),1)],64))},__scopeId:"data-v-0a280960"};const gi={id:"top"},yi=Xn("img",{alt:"Vue logo",src:pi},null,-1);var vi={setup:e=>(e,t)=>(Un(),Hn("div",gi,[yi,Jn(mi,{msg:"Networked Vue Component with Shared Button Count"})]))},xi=THREE,wi=Object.freeze({__proto__:null,default:xi});class bi{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,s=this.y-e.y;return this.x=i*n-s*r+e.x,this.y=i*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}bi.prototype.isVector2=!0;const _i=[];for(let e=0;e<256;e++)_i[e]=(e<16?"0":"")+e.toString(16);let Ei=1234567;const Mi=Math.PI/180,Ni=180/Math.PI;function Si(e,t,n){return Math.max(t,Math.min(n,e))}function Ti(e,t){return(e%t+t)%t}function Oi(e,t,n){return(1-n)*e+n*t}Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",DEG2RAD:Mi,RAD2DEG:Ni,generateUUID:function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(_i[255&e]+_i[e>>8&255]+_i[e>>16&255]+_i[e>>24&255]+"-"+_i[255&t]+_i[t>>8&255]+"-"+_i[t>>16&15|64]+_i[t>>24&255]+"-"+_i[63&n|128]+_i[n>>8&255]+"-"+_i[n>>16&255]+_i[n>>24&255]+_i[255&r]+_i[r>>8&255]+_i[r>>16&255]+_i[r>>24&255]).toUpperCase()},clamp:Si,euclideanModulo:Ti,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Oi,damp:function(e,t,n,r){return Oi(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(Ti(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(Ei=e%2147483647),Ei=16807*Ei%2147483647,(Ei-1)/2147483646},degToRad:function(e){return e*Mi},radToDeg:function(e){return e*Ni},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),u=o(n/2),c=s((t+r)/2),h=o((t+r)/2),l=s((t-r)/2),p=o((t-r)/2),f=s((r-t)/2),d=o((r-t)/2);switch(i){case"XYX":e.set(a*h,u*l,u*p,a*c);break;case"YZY":e.set(u*p,a*h,u*l,a*c);break;case"ZXZ":e.set(u*l,u*p,a*h,a*c);break;case"XZX":e.set(a*h,u*d,u*f,a*c);break;case"YXY":e.set(u*f,a*h,u*d,a*c);break;case"ZYZ":e.set(u*d,u*f,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}});class Ci{constructor(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,i,s,o){let a=n[r+0],u=n[r+1],c=n[r+2],h=n[r+3];const l=i[s+0],p=i[s+1],f=i[s+2],d=i[s+3];if(0===o)return e[t+0]=a,e[t+1]=u,e[t+2]=c,void(e[t+3]=h);if(1===o)return e[t+0]=l,e[t+1]=p,e[t+2]=f,void(e[t+3]=d);if(h!==d||a!==l||u!==p||c!==f){let e=1-o;const t=a*l+u*p+c*f+h*d,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),s=Math.atan2(i,t*n);e=Math.sin(e*s)/i,o=Math.sin(o*s)/i}const i=o*n;if(a=a*e+l*i,u=u*e+p*i,c=c*e+f*i,h=h*e+d*i,e===1-o){const e=1/Math.sqrt(a*a+u*u+c*c+h*h);a*=e,u*=e,c*=e,h*=e}}e[t]=a,e[t+1]=u,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,r,i,s){const o=n[r],a=n[r+1],u=n[r+2],c=n[r+3],h=i[s],l=i[s+1],p=i[s+2],f=i[s+3];return e[t]=o*f+c*h+a*p-u*l,e[t+1]=a*f+c*l+u*h-o*p,e[t+2]=u*f+c*p+o*l-a*h,e[t+3]=c*f-o*h-a*l-u*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,s=e._order,o=Math.cos,a=Math.sin,u=o(n/2),c=o(r/2),h=o(i/2),l=a(n/2),p=a(r/2),f=a(i/2);switch(s){case"XYZ":this._x=l*c*h+u*p*f,this._y=u*p*h-l*c*f,this._z=u*c*f+l*p*h,this._w=u*c*h-l*p*f;break;case"YXZ":this._x=l*c*h+u*p*f,this._y=u*p*h-l*c*f,this._z=u*c*f-l*p*h,this._w=u*c*h+l*p*f;break;case"ZXY":this._x=l*c*h-u*p*f,this._y=u*p*h+l*c*f,this._z=u*c*f+l*p*h,this._w=u*c*h-l*p*f;break;case"ZYX":this._x=l*c*h-u*p*f,this._y=u*p*h+l*c*f,this._z=u*c*f-l*p*h,this._w=u*c*h+l*p*f;break;case"YZX":this._x=l*c*h+u*p*f,this._y=u*p*h+l*c*f,this._z=u*c*f-l*p*h,this._w=u*c*h-l*p*f;break;case"XZY":this._x=l*c*h-u*p*f,this._y=u*p*h-l*c*f,this._z=u*c*f+l*p*h,this._w=u*c*h+l*p*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],s=t[1],o=t[5],a=t[9],u=t[2],c=t[6],h=t[10],l=n+o+h;if(l>0){const e=.5/Math.sqrt(l+1);this._w=.25/e,this._x=(c-a)*e,this._y=(i-u)*e,this._z=(s-r)*e}else if(n>o&&n>h){const e=2*Math.sqrt(1+n-o-h);this._w=(c-a)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(i+u)/e}else if(o>h){const e=2*Math.sqrt(1+o-n-h);this._w=(i-u)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(a+c)/e}else{const e=2*Math.sqrt(1+h-n-o);this._w=(s-r)/e,this._x=(i+u)/e,this._y=(a+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Si(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,s=e._w,o=t._x,a=t._y,u=t._z,c=t._w;return this._x=n*c+s*o+r*u-i*a,this._y=r*c+s*a+i*o-n*u,this._z=i*c+s*u+n*a-r*o,this._w=s*c-n*o-r*a-i*u,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,s=this._w;let o=s*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;const a=1-o*o;if(a<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(a),c=Math.atan2(u,o),h=Math.sin((1-t)*c)/u,l=Math.sin(t*c)/u;return this._w=s*h+this._w*l,this._x=n*h+this._x*l,this._y=r*h+this._y*l,this._z=i*h+this._z*l,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Ci.prototype.isQuaternion=!0;class Ai{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Ri.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Ri.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,s=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,o=e.z,a=e.w,u=a*t+s*r-o*n,c=a*n+o*t-i*r,h=a*r+i*n-s*t,l=-i*t-s*n-o*r;return this.x=u*a+l*-i+c*-o-h*-s,this.y=c*a+l*-s+h*-i-u*-o,this.z=h*a+l*-o+u*-s-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,s=t.x,o=t.y,a=t.z;return this.x=r*a-i*o,this.y=i*s-n*a,this.z=n*o-r*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return zi.copy(this).projectOnVector(e),this.sub(zi)}reflect(e){return this.sub(zi.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Si(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}Ai.prototype.isVector3=!0;const zi=new Ai,Ri=new Ci;class Di{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,s,o,a,u,c,h,l,p,f,d,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=s,g[9]=o,g[13]=a,g[2]=u,g[6]=c,g[10]=h,g[14]=l,g[3]=p,g[7]=f,g[11]=d,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Di).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/ki.setFromMatrixColumn(e,0).length(),i=1/ki.setFromMatrixColumn(e,1).length(),s=1/ki.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(r),u=Math.sin(r),c=Math.cos(i),h=Math.sin(i);if("XYZ"===e.order){const e=s*c,n=s*h,r=o*c,i=o*h;t[0]=a*c,t[4]=-a*h,t[8]=u,t[1]=n+r*u,t[5]=e-i*u,t[9]=-o*a,t[2]=i-e*u,t[6]=r+n*u,t[10]=s*a}else if("YXZ"===e.order){const e=a*c,n=a*h,r=u*c,i=u*h;t[0]=e+i*o,t[4]=r*o-n,t[8]=s*u,t[1]=s*h,t[5]=s*c,t[9]=-o,t[2]=n*o-r,t[6]=i+e*o,t[10]=s*a}else if("ZXY"===e.order){const e=a*c,n=a*h,r=u*c,i=u*h;t[0]=e-i*o,t[4]=-s*h,t[8]=r+n*o,t[1]=n+r*o,t[5]=s*c,t[9]=i-e*o,t[2]=-s*u,t[6]=o,t[10]=s*a}else if("ZYX"===e.order){const e=s*c,n=s*h,r=o*c,i=o*h;t[0]=a*c,t[4]=r*u-n,t[8]=e*u+i,t[1]=a*h,t[5]=i*u+e,t[9]=n*u-r,t[2]=-u,t[6]=o*a,t[10]=s*a}else if("YZX"===e.order){const e=s*a,n=s*u,r=o*a,i=o*u;t[0]=a*c,t[4]=i-e*h,t[8]=r*h+n,t[1]=h,t[5]=s*c,t[9]=-o*c,t[2]=-u*c,t[6]=n*h+r,t[10]=e-i*h}else if("XZY"===e.order){const e=s*a,n=s*u,r=o*a,i=o*u;t[0]=a*c,t[4]=-h,t[8]=u*c,t[1]=e*h+i,t[5]=s*c,t[9]=n*h-r,t[2]=r*h-n,t[6]=o*c,t[10]=i*h+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Li,e,Bi)}lookAt(e,t,n){const r=this.elements;return Ui.subVectors(e,t),0===Ui.lengthSq()&&(Ui.z=1),Ui.normalize(),Fi.crossVectors(n,Ui),0===Fi.lengthSq()&&(1===Math.abs(n.z)?Ui.x+=1e-4:Ui.z+=1e-4,Ui.normalize(),Fi.crossVectors(n,Ui)),Fi.normalize(),Pi.crossVectors(Ui,Fi),r[0]=Fi.x,r[4]=Pi.x,r[8]=Ui.x,r[1]=Fi.y,r[5]=Pi.y,r[9]=Ui.y,r[2]=Fi.z,r[6]=Pi.z,r[10]=Ui.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],o=n[4],a=n[8],u=n[12],c=n[1],h=n[5],l=n[9],p=n[13],f=n[2],d=n[6],m=n[10],g=n[14],y=n[3],v=n[7],x=n[11],w=n[15],b=r[0],_=r[4],E=r[8],M=r[12],N=r[1],S=r[5],T=r[9],O=r[13],C=r[2],A=r[6],z=r[10],R=r[14],D=r[3],k=r[7],I=r[11],L=r[15];return i[0]=s*b+o*N+a*C+u*D,i[4]=s*_+o*S+a*A+u*k,i[8]=s*E+o*T+a*z+u*I,i[12]=s*M+o*O+a*R+u*L,i[1]=c*b+h*N+l*C+p*D,i[5]=c*_+h*S+l*A+p*k,i[9]=c*E+h*T+l*z+p*I,i[13]=c*M+h*O+l*R+p*L,i[2]=f*b+d*N+m*C+g*D,i[6]=f*_+d*S+m*A+g*k,i[10]=f*E+d*T+m*z+g*I,i[14]=f*M+d*O+m*R+g*L,i[3]=y*b+v*N+x*C+w*D,i[7]=y*_+v*S+x*A+w*k,i[11]=y*E+v*T+x*z+w*I,i[15]=y*M+v*O+x*R+w*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],o=e[5],a=e[9],u=e[13],c=e[2],h=e[6],l=e[10],p=e[14];return e[3]*(+i*a*h-r*u*h-i*o*l+n*u*l+r*o*p-n*a*p)+e[7]*(+t*a*p-t*u*l+i*s*l-r*s*p+r*u*c-i*a*c)+e[11]*(+t*u*h-t*o*p-i*s*h+n*s*p+i*o*c-n*u*c)+e[15]*(-r*o*c-t*a*h+t*o*l+r*s*h-n*s*l+n*a*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],u=e[7],c=e[8],h=e[9],l=e[10],p=e[11],f=e[12],d=e[13],m=e[14],g=e[15],y=h*m*u-d*l*u+d*a*p-o*m*p-h*a*g+o*l*g,v=f*l*u-c*m*u-f*a*p+s*m*p+c*a*g-s*l*g,x=c*d*u-f*h*u+f*o*p-s*d*p-c*o*g+s*h*g,w=f*h*a-c*d*a-f*o*l+s*d*l+c*o*m-s*h*m,b=t*y+n*v+r*x+i*w;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _=1/b;return e[0]=y*_,e[1]=(d*l*i-h*m*i-d*r*p+n*m*p+h*r*g-n*l*g)*_,e[2]=(o*m*i-d*a*i+d*r*u-n*m*u-o*r*g+n*a*g)*_,e[3]=(h*a*i-o*l*i-h*r*u+n*l*u+o*r*p-n*a*p)*_,e[4]=v*_,e[5]=(c*m*i-f*l*i+f*r*p-t*m*p-c*r*g+t*l*g)*_,e[6]=(f*a*i-s*m*i-f*r*u+t*m*u+s*r*g-t*a*g)*_,e[7]=(s*l*i-c*a*i+c*r*u-t*l*u-s*r*p+t*a*p)*_,e[8]=x*_,e[9]=(f*h*i-c*d*i-f*n*p+t*d*p+c*n*g-t*h*g)*_,e[10]=(s*d*i-f*o*i+f*n*u-t*d*u-s*n*g+t*o*g)*_,e[11]=(c*o*i-s*h*i-c*n*u+t*h*u+s*n*p-t*o*p)*_,e[12]=w*_,e[13]=(c*d*r-f*h*r+f*n*l-t*d*l-c*n*m+t*h*m)*_,e[14]=(f*o*r-s*d*r-f*n*a+t*d*a+s*n*m-t*o*m)*_,e[15]=(s*h*r-c*o*r+c*n*a-t*h*a-s*n*l+t*o*l)*_,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,o=e.y,a=e.z,u=i*s,c=i*o;return this.set(u*s+n,u*o-r*a,u*a+r*o,0,u*o+r*a,c*o+n,c*a-r*s,0,u*a-r*o,c*a+r*s,i*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,s){return this.set(1,n,i,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,s=t._y,o=t._z,a=t._w,u=i+i,c=s+s,h=o+o,l=i*u,p=i*c,f=i*h,d=s*c,m=s*h,g=o*h,y=a*u,v=a*c,x=a*h,w=n.x,b=n.y,_=n.z;return r[0]=(1-(d+g))*w,r[1]=(p+x)*w,r[2]=(f-v)*w,r[3]=0,r[4]=(p-x)*b,r[5]=(1-(l+g))*b,r[6]=(m+y)*b,r[7]=0,r[8]=(f+v)*_,r[9]=(m-y)*_,r[10]=(1-(l+d))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=ki.set(r[0],r[1],r[2]).length();const s=ki.set(r[4],r[5],r[6]).length(),o=ki.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Ii.copy(this);const a=1/i,u=1/s,c=1/o;return Ii.elements[0]*=a,Ii.elements[1]*=a,Ii.elements[2]*=a,Ii.elements[4]*=u,Ii.elements[5]*=u,Ii.elements[6]*=u,Ii.elements[8]*=c,Ii.elements[9]*=c,Ii.elements[10]*=c,t.setFromRotationMatrix(Ii),n.x=i,n.y=s,n.z=o,this}makePerspective(e,t,n,r,i,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,a=2*i/(t-e),u=2*i/(n-r),c=(t+e)/(t-e),h=(n+r)/(n-r),l=-(s+i)/(s-i),p=-2*s*i/(s-i);return o[0]=a,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=u,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=l,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,r,i,s){const o=this.elements,a=1/(t-e),u=1/(n-r),c=1/(s-i),h=(t+e)*a,l=(n+r)*u,p=(s+i)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-l,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}Di.prototype.isMatrix4=!0;const ki=new Ai,Ii=new Di,Li=new Ai(0,0,0),Bi=new Ai(1,1,1),Fi=new Ai,Pi=new Ai,Ui=new Ai,ji=new Di,Vi=new Ci;class qi{constructor(e=0,t=0,n=0,r=qi.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t,n){const r=e.elements,i=r[0],s=r[4],o=r[8],a=r[1],u=r[5],c=r[9],h=r[2],l=r[6],p=r[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(Si(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(l,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Si(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,p),this._z=Math.atan2(a,u)):(this._y=Math.atan2(-h,i),this._z=0);break;case"ZXY":this._x=Math.asin(Si(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(a,i));break;case"ZYX":this._y=Math.asin(-Si(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(l,p),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(Si(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,i)):(this._x=0,this._y=Math.atan2(o,p));break;case"XZY":this._z=Math.asin(-Si(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(l,u),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-c,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return ji.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ji,t,n)}setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order)}reorder(e){return Vi.setFromEuler(this),this.setFromQuaternion(Vi,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new Ai(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}qi.prototype.isEuler=!0,qi.DefaultOrder="XYZ",qi.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const Hi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},$i={h:0,s:0,l:0},Wi={h:0,s:0,l:0};function Gi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Yi(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Zi(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class Xi{constructor(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=Ti(e,1),t=Si(t,0,1),n=Si(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Gi(i,r,e+1/3),this.g=Gi(i,r,e),this.b=Gi(i,r,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(e[1])/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=Hi[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=Yi(e.r),this.g=Yi(e.g),this.b=Yi(e.b),this}copyLinearToSRGB(e){return this.r=Zi(e.r),this.g=Zi(e.g),this.b=Zi(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),s=Math.min(t,n,r);let o,a;const u=(s+i)/2;if(s===i)o=0,a=0;else{const e=i-s;switch(a=u<=.5?e/(i+s):e/(2-i-s),i){case t:o=(n-r)/e+(n<r?6:0);break;case n:o=(r-t)/e+2;break;case r:o=(t-n)/e+4}o/=6}return e.h=o,e.s=a,e.l=u,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL($i),$i.h+=e,$i.s+=t,$i.l+=n,this.setHSL($i.h,$i.s,$i.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL($i),e.getHSL(Wi);const n=Oi($i.h,Wi.h,t),r=Oi($i.s,Wi.s,t),i=Oi($i.l,Wi.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Xi.NAMES=Hi,Xi.prototype.isColor=!0,Xi.prototype.r=1,Xi.prototype.g=1,Xi.prototype.b=1;const Ji=new bi;class Qi{constructor(e=new bi(1/0,1/0),t=new bi(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Ji.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new bi),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new bi),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new bi),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new bi),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ji.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Qi.prototype.isBox2=!0;class Ki{constructor(e=new Ai(1/0,1/0,1/0),t=new Ai(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,o=-1/0;for(let a=0,u=e.length;a<u;a+=3){const u=e[a],c=e[a+1],h=e[a+2];u<t&&(t=u),c<n&&(n=c),h<r&&(r=h),u>i&&(i=u),c>s&&(s=c),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(i,s,o),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,o=-1/0;for(let a=0,u=e.count;a<u;a++){const u=e.getX(a),c=e.getY(a),h=e.getZ(a);u<t&&(t=u),c<n&&(n=c),h<r&&(r=h),u>i&&(i=u),c>s&&(s=c),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(i,s,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ts.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Ai),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Ai),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),ns.copy(t.boundingBox),ns.applyMatrix4(e.matrixWorld),this.union(ns));const n=e.children;for(let e=0,t=n.length;e<t;e++)this.expandByObject(n[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Ai),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ts),ts.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(cs),hs.subVectors(this.max,cs),rs.subVectors(e.a,cs),is.subVectors(e.b,cs),ss.subVectors(e.c,cs),os.subVectors(is,rs),as.subVectors(ss,is),us.subVectors(rs,ss);let t=[0,-os.z,os.y,0,-as.z,as.y,0,-us.z,us.y,os.z,0,-os.x,as.z,0,-as.x,us.z,0,-us.x,-os.y,os.x,0,-as.y,as.x,0,-us.y,us.x,0];return!!fs(t,rs,is,ss,hs)&&(t=[1,0,0,0,1,0,0,0,1],!!fs(t,rs,is,ss,hs)&&(ls.crossVectors(os,as),t=[ls.x,ls.y,ls.z],fs(t,rs,is,ss,hs)))}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Ai),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return ts.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(ts).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(es[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),es[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),es[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),es[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),es[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),es[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),es[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),es[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(es)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Ki.prototype.isBox3=!0;const es=[new Ai,new Ai,new Ai,new Ai,new Ai,new Ai,new Ai,new Ai],ts=new Ai,ns=new Ki,rs=new Ai,is=new Ai,ss=new Ai,os=new Ai,as=new Ai,us=new Ai,cs=new Ai,hs=new Ai,ls=new Ai,ps=new Ai;function fs(e,t,n,r,i){for(let s=0,o=e.length-3;s<=o;s+=3){ps.fromArray(e,s);const o=i.x*Math.abs(ps.x)+i.y*Math.abs(ps.y)+i.z*Math.abs(ps.z),a=t.dot(ps),u=n.dot(ps),c=r.dot(ps);if(Math.max(-Math.max(a,u,c),Math.min(a,u,c))>o)return!1}return!0}new Ai,new Ai,new Ai,new Ai,new Ai,new Ai,new Ai,new Ai,new Ai;class ds{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,s,o,a,u){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=i,c[5]=a,c[6]=n,c[7]=s,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],o=n[3],a=n[6],u=n[1],c=n[4],h=n[7],l=n[2],p=n[5],f=n[8],d=r[0],m=r[3],g=r[6],y=r[1],v=r[4],x=r[7],w=r[2],b=r[5],_=r[8];return i[0]=s*d+o*y+a*w,i[3]=s*m+o*v+a*b,i[6]=s*g+o*x+a*_,i[1]=u*d+c*y+h*w,i[4]=u*m+c*v+h*b,i[7]=u*g+c*x+h*_,i[2]=l*d+p*y+f*w,i[5]=l*m+p*v+f*b,i[8]=l*g+p*x+f*_,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],u=e[7],c=e[8];return t*s*c-t*o*u-n*i*c+n*o*a+r*i*u-r*s*a}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],u=e[7],c=e[8],h=c*s-o*u,l=o*a-c*i,p=u*i-s*a,f=t*h+n*l+r*p;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const d=1/f;return e[0]=h*d,e[1]=(r*u-c*n)*d,e[2]=(o*n-r*s)*d,e[3]=l*d,e[4]=(c*t-r*a)*d,e[5]=(r*i-o*t)*d,e[6]=p*d,e[7]=(n*a-u*t)*d,e[8]=(s*t-n*i)*d,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,s,o){const a=Math.cos(i),u=Math.sin(i);return this.set(n*a,n*u,-n*(a*s+u*o)+s+e,-r*u,r*a,-r*(-u*s+a*o)+o+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],s=r[3],o=r[6],a=r[1],u=r[4],c=r[7];return r[0]=t*i+n*a,r[3]=t*s+n*u,r[6]=t*o+n*c,r[1]=-n*i+t*a,r[4]=-n*s+t*u,r[7]=-n*o+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}ds.prototype.isMatrix3=!0,new Ai,new Ai,new ds;const ms=Object.freeze(new bi(0,0));Object.freeze(new bi(1,1));const gs=Object.freeze(new Ai(0,0,0));Object.freeze(new Ai(1,0,0)),Object.freeze(new Ai(0,1,0)),Object.freeze(new Ai(0,0,1));const ys=Object.freeze(new Ai(1,1,1)),vs=Object.freeze(new Ci),xs={RIGHT:Object.freeze(new Ai(1,0,0)),UP:Object.freeze(new Ai(0,1,0)),NEAR:Object.freeze(new Ai(0,0,1)),LEFT:Object.freeze(new Ai(-1,0,0)),DOWN:Object.freeze(new Ai(0,-1,0)),FAR:Object.freeze(new Ai(0,0,-1))};function ws(e,t){return"number"==typeof e?function(e,t){if(t===e)return 0;return Math.abs(t-e)/((Math.abs(t)+Math.abs(e))/2)}(e,t):"isVector3"in e||"isVector2"in e?function(e,t){if(t.equals(e))return 0;return t.distanceTo(e)/((t.length()+e.length())/2)}(e,t):"isBox3"in e?function(e,t){if(e.equals(t))return 0;const n=bs;return(t.min.distanceTo(e.min)+t.max.distanceTo(e.max))/2/((t.getSize(n).length()+e.getSize(n).length())/2)}(e,t):"isQuaternion"in e?(r=t,(n=e).equals(r)?0:n.angleTo(r)/Math.PI):"isColor"in e?function(e,t){return e.equals(t)?0:bs.set(Math.abs(t.r-e.r),Math.abs(t.g-e.g),Math.abs(t.b-e.b)).length()/_s}(e,t):1/0;var n,r}const bs=new Ai,_s=Math.sqrt(3),Es=(e=1)=>{var t=Math.random();return(t%1e-8>5e-9?1:-1)*Math.sqrt(-Math.log(Math.max(1e-9,t)))*e},Ms=(e=1)=>{const t=Math.sqrt(Math.sqrt(1/(2*e)));return 1/Es(t)**2},Ns=(()=>{const e=2*Math.PI,t=new Ai(0,0,1),n=new Ci,r=new Ci,i=new Ai,s=new Ci;return function(o=1,a=1){var u=(Math.random()-.5)*e*o,c=Math.random()*e,h=Math.random()*Math.PI*a;return i.set(1,0,0).applyAxisAngle(t,c),n.setFromAxisAngle(t,u),r.setFromAxisAngle(i,h),s.multiplyQuaternions(r,n)}})();(()=>{const e=new Ai})();class Ss{constructor(){this.callbacks=[]}memoize(e,...t){t.push(this);const n=function(e){let t;const n=()=>{if(n.needsUpdate&&(n.needsUpdate=!1,t=e()),void 0===t)throw new Error("Possible recursive memoization detected");return t};return n.needsUpdate=!0,n}(e);for(const e of t)e.callbacks.push(n);return n}invalidateAll(){const e=this.callbacks;for(let t=0;t<this.callbacks.length;t++)e[t].needsUpdate=!0}isFullyInvalid(){const e=this.callbacks;for(let t=0;t<this.callbacks.length;t++)if(!e[t].needsUpdate)return!1;return!0}}var Ts,Os,Cs;const As=Symbol("current"),zs=Symbol("target"),Rs=Symbol("previousTarget"),Ds=class{constructor(e,t){this.mode=e,this.metrics=t,this._cache=new Ss,this.opacity=1,this._parent=null,this._localMatrix=new Di,this._worldMatrix=new Di,this._worldMatrixInverse=new Di,this._worldPosition=new Ai,this._worldOrientation=new Ci,this._worldOrientationInverse=new Ci,this._worldScale=new Ai(1,1,1),this._worldRotation=new Di,this._worldRotationInverse=new Di,this._relativePosition=new Ai,this._relativeOrientation=new Ci,this._relativeScale=new Ai(1,1,1),this._cachedWorldCenter=this._cache.memoize((()=>this._worldCenter.copy(this.metrics.innerCenter).applyMatrix4(this.worldMatrix))),this._worldCenter=new Ai,this._cachedSpatialMatrix=this._cache.memoize((()=>{const e=this._worldFromSpatial.compose(this.outerOrigin,this.worldOrientation,ys);this._spatialFromWorld.copy(this._worldFromSpatial).invert(),this._localFromSpatial.multiplyMatrices(this.worldMatrixInverse,e),this._spatialFromLocal.copy(this._localFromSpatial).invert();const t=this.referenceState;return t?this._spatialFromReference.multiplyMatrices(this._spatialFromWorld,t.worldMatrix):this._spatialFromReference.copy(this._spatialFromWorld),e})),this._worldFromSpatial=new Di,this._spatialFromWorld=new Di,this._localFromSpatial=new Di,this._spatialFromLocal=new Di,this._spatialFromReference=new Di,this._cachedSpatialBounds=this._cache.memoize((()=>{this._spatialBounds.copy(this.metrics.innerBounds);const e=this._spatialBounds.applyMatrix4(this.spatialFromLocal);return e.getCenter(this._spatialCenter),e.getSize(this._spatialSize),e})),this._spatialBounds=new Ki,this._spatialSize=new Ai,this._spatialCenter=new Ai,this._cachedOuterBounds=this._cache.memoize((()=>{const e=this._outerBounds,t=this.metrics.system.nodeAdapters.get(this.metrics.node);if(t)e.copy(t.outerBounds[this.mode]);else{const t=this.referenceState;t?e.copy(t.metrics.innerBounds):e.setFromCenterAndSize(gs,gs),e.applyMatrix4(this.spatialFromReference)}return e.getCenter(this._outerCenter),e.getSize(this._outerSize),e})),this._outerBounds=new Ki,this._outerCenter=new Ai,this._outerSize=new Ai,this._cachedOuterVisualBounds=this._cache.memoize((()=>{const e=this._outerVisualBounds,t=this.metrics.system.nodeAdapters.get(this.metrics.node);if(t)e.copy(t.outerVisualBounds[this.mode]);else{const t=this.referenceState;t?e.copy(t.visualBounds):e.setFromCenterAndSize(gs,gs)}return e.getCenter(this._outerVisualCenter),e.getSize(this._outerVisualSize),e})),this._outerVisualBounds=new Ki,this._outerVisualCenter=new Ai,this._outerVisualSize=new Ai,this._viewFromWorld=new Di,this._viewFromSpatial=new Di,this._spatialFromView=new Di,this._cachedNDCBounds=this._cache.memoize((()=>{if(this.metrics.system.viewNode===this.metrics.node)return this._ndcBounds.min.setScalar(-1),this._ndcBounds.max.setScalar(1),this._ndcBounds;const e=this.metrics.system.viewFrustum.perspectiveProjectionMatrix,t=this.viewFromWorld,n=this._viewProjectionFromWorld.multiplyMatrices(e,t),r=this._ndcBounds.copy(this.metrics.innerBounds).applyMatrix4(n);return r.getCenter(this._ndcCenter),r.getSize(this._ndcSize),isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.min.z)&&isFinite(r.max.x)&&isFinite(r.max.y)&&isFinite(r.max.z)||(r.min.setScalar(-1),r.max.setScalar(1),r.getCenter(this._ndcCenter),r.getSize(this._ndcSize)),r}),this._viewState._cache),this._viewProjectionFromWorld=new Di,this._ndcBounds=new Ki,this._ndcCenter=new Ai,this._ndcSize=new Ai,this._cachedVisualBounds=this._cache.memoize((()=>{const e=this.metrics.system,t=e.viewFrustum.perspectiveProjectionMatrix,n=this._inverseProjection.copy(t).invert(),r=this._visualBounds.copy(this.ndcBounds),i=this._v1,s=i.set(0,0,r.min.z).applyMatrix4(n).z,o=i.set(0,0,r.max.z).applyMatrix4(n).z;return r.min.z=o,r.max.z=s,r.min.x*=.5*e.viewResolution.x,r.max.x*=.5*e.viewResolution.x,r.min.y*=.5*e.viewResolution.y,r.max.y*=.5*e.viewResolution.y,r.getCenter(this._visualCenter),r.getSize(this._visualSize),r}),this._viewState._cache),this._visualBounds=new Ki,this._visualCenter=new Ai,this._visualSize=new Ai,this._v1=new Ai,this._inverseProjection=new Di,this._viewPosition=new Ai,this._cachedViewAlignedOrientation=this._cache.memoize((()=>{const e=this._relativeViewMatrix.multiplyMatrices(this.worldMatrixInverse,this._viewState.worldMatrix),t=this._relativeViewRotation.extractRotation(e),n=this._relativeViewOrientation.setFromRotationMatrix(t),r=this._relativeViewForward.set(0,0,1).applyQuaternion(n),i=this._relativeViewUp.set(0,1,0).applyQuaternion(n);let s,o,a,u=1/0,c=1/0;for(a in xs){const e=xs[a];var h=i.distanceToSquared(e);h<c&&(c=h,o=e)}for(a in xs){const e=xs[a];if(e.x&&o.x)continue;if(e.y&&o.y)continue;if(e.z&&o.z)continue;const t=r.distanceToSquared(e);t<u&&(u=t,s=e)}const l=this._orthogonalRotation.identity();return l.lookAt(s,gs,o),this._orthogonalOrientation.setFromRotationMatrix(l)}),this._viewState._cache),this._relativeViewMatrix=new Di,this._relativeViewRotation=new Di,this._relativeViewOrientation=new Ci,this._relativeViewUp=new Ai,this._relativeViewForward=new Ai,this._orthogonalRotation=new Di,this._orthogonalOrientation=new Ci,this._computeOcclusion=this._cache.memoize((()=>{this._occludingPercent=0,this._occludedPercent=0;const e=this.metrics;if(e.innerBounds.isEmpty())return;const t=e.system.nodeAdapters.values(),n=this.visualBounds,r=n.min.z,i=Ds._boxA,s=Ds._boxB;i.min.set(n.min.x,n.min.y),i.min.set(n.max.x,n.max.y);const o=i.getSize(Ds._sizeA).length();for(const a of t){const t=a.metrics;if(t===e)continue;if(!t.isAdaptive||t.innerBounds.isEmpty())continue;if(t.containedByNode(a.node))continue;const u=("current"===this.mode?t.current:t.target).visualBounds;i.min.set(n.min.x,n.min.y),i.min.set(n.max.x,n.max.y),s.min.set(u.min.x,u.min.y),s.min.set(u.max.x,u.max.y);const c=i.intersect(s).getSize(Ds._sizeB).length()/o;c>0&&(r<u.min.z?this._occludingPercent+=c:this._occludedPercent+=c)}}),this._viewState._cache),this._occludingPercent=0,this._occludedPercent=0}invalidate(){this._cache.invalidateAll()}get parent(){return this._parent}set parent(e){this._parent!==e&&(this._parent=e,this.invalidate())}get parentState(){var e;return null==(e=this.metrics.parentMetrics)?void 0:e[this.mode]}get localMatrix(){var e;const t=null==(e=this.parentState)?void 0:e.worldMatrixInverse;return t?this._localMatrix.multiplyMatrices(t,this.worldMatrix):this._localMatrix.copy(this.worldMatrix)}get referenceState(){var e;return null==(e=this.metrics.referenceMetrics)?void 0:e[this.mode]}get worldMatrix(){return this._worldMatrix}set worldMatrix(e){if(isNaN(e.elements[0])||isNaN(e.elements[15])||0===e.elements[0])throw new Error;this._worldMatrix.equals(e)||(this.invalidate(),this._worldMatrix.copy(e),this._worldMatrixInverse.copy(this._worldMatrix).invert(),this._worldMatrix.decompose(this._worldPosition,this._worldOrientation,this._worldScale),this._worldOrientationInverse.copy(this._worldOrientation).invert(),this._worldRotation.makeRotationFromQuaternion(this._worldOrientation),this._worldRotationInverse.makeRotationFromQuaternion(this._worldOrientationInverse))}get relativePosition(){var e;const t=null==(e=this.referenceState)?void 0:e.worldPosition;return t?this._relativePosition.subVectors(this.worldPosition,t):this._relativePosition.copy(this.worldPosition)}get relativeOrientation(){var e;const t=null==(e=this.referenceState)?void 0:e.worldOrientationInverse;return t?this._relativeOrientation.multiplyQuaternions(this.worldOrientation,t):this._relativeOrientation.copy(this.worldOrientation)}get relativeScale(){var e;const t=null==(e=this.referenceState)?void 0:e.worldScale;return t?this._relativeScale.copy(this.worldScale).divide(t):this._relativeScale.copy(this.worldScale)}get worldMatrixInverse(){return this._worldMatrixInverse}get worldPosition(){return this._worldPosition}get worldOrientation(){return this._worldOrientation}get worldScale(){return this._worldScale}get worldOrientationInverse(){return this._worldOrientationInverse}get worldRotation(){return this._worldRotation}get worldRotationInverse(){return this._worldRotationInverse}get worldCenter(){return this._cachedWorldCenter()}get spatialMatrix(){return this._cachedSpatialMatrix()}get spatialMatrixInverse(){return this.spatialMatrix,this._spatialFromWorld}get localFromSpatial(){return this.spatialMatrix,this._localFromSpatial}get spatialFromLocal(){return this.spatialMatrix,this._spatialFromLocal}get spatialFromReference(){return this.spatialMatrix,this._spatialFromReference}get spatialBounds(){return this._cachedSpatialBounds()}get spatialSize(){return this.spatialBounds,this._spatialSize}get spatialCenter(){return this.spatialBounds,this._spatialCenter}get outerBounds(){return this._cachedOuterBounds()}get outerCenter(){return this.outerBounds,this._outerCenter}get outerSize(){return this.outerBounds,this._outerSize}get outerOrigin(){return this.metrics.outerOrigin[this.mode]()}get outerOrientation(){var e,t;const n=this.metrics.system.nodeAdapters.get(this.metrics.node);return n?n.outerOrientation[this.mode]:null!=(t=null==(e=this.referenceState)?void 0:e.worldOrientation)?t:vs}get outerVisualBounds(){return this._cachedOuterVisualBounds()}get outerVisualCenter(){return this.outerVisualBounds,this._outerVisualCenter}get outerVisualSize(){return this.outerVisualBounds,this._outerVisualSize}get _viewState(){if(this.metrics.system.viewNode===this.metrics.node)return this;const e=this.metrics.system.viewMetrics;return"current"===this.mode?e[As]:e[zs]}get viewFromWorld(){return this._viewFromWorld.multiplyMatrices(this._viewState.worldMatrixInverse,this.worldMatrix)}get viewFromSpatial(){return this._viewFromSpatial.multiplyMatrices(this._viewState.worldMatrixInverse,this.spatialMatrix)}get spatialFromView(){return this._spatialFromView.copy(this.viewFromSpatial).invert()}get ndcBounds(){return this._cachedNDCBounds()}get ndcCenter(){return this._cachedNDCBounds(),this._ndcCenter}get ndcSize(){return this._cachedNDCBounds(),this._ndcSize}get visualBounds(){return this._cachedVisualBounds()}get visualCenter(){return this._cachedVisualBounds(),this._visualCenter}get visualSize(){return this._cachedVisualBounds(),this._visualSize}get relativeViewPosition(){return this._viewPosition.copy(this._viewState.worldPosition).applyMatrix4(this.worldMatrixInverse)}get viewAlignedOrientation(){return this._cachedViewAlignedOrientation()}get occludingPercent(){return this._computeOcclusion(),this._occludingPercent}get occludedPercent(){return this._computeOcclusion(),this._occludedPercent}visualAverageEdgeLength(){}};let ks=Ds;ks._boxA=new Qi,ks._boxB=new Qi,ks._sizeA=new bi,ks._sizeB=new bi;class Is{constructor(e,t){this.system=e,this.node=t,this._cache=new Ss,this.needsUpdate=!0,this._cachedInnerBounds=this._cache.memoize((()=>{const e=this._innerBounds;if(!this.raw.parent)return e.makeEmpty();if(this.node!==this.system.viewNode){e.copy(this.intrinsicBounds);const t=this._childBounds;for(const n of this.boundingChildMetrics)n.update(),t.copy(n.innerBounds),t.applyMatrix4(n.raw.relativeMatrix),e.union(t)}const t=e.getCenter(this._innerCenter),n=e.getSize(this._innerSize);if(n.length()>0){const r=this.system.epsillonMeters;Math.abs(n.x)<=r&&(n.x=(Math.sign(n.x)||1)*r*1e3),Math.abs(n.y)<=r&&(n.y=(Math.sign(n.y)||1)*r*1e3),Math.abs(n.z)<=r&&(n.z=(Math.sign(n.z)||1)*r*1e3,t.z-=1e3*r/2),e.setFromCenterAndSize(t,n)}return e})),this._childBounds=new Ki,this._innerBounds=new Ki,this._innerCenter=new Ai,this._innerSize=new Ai,this._intrinsicBoundsNeedsUpdate=!0,this._intrinsicBounds=new Ki,this._intrinsicCenter=new Ai,this._intrinsicSize=new Ai,this._cachedNodeChildren=this._cache.memoize((()=>(this.system.bindings.getChildren(this,this._nodeChildren),this._nodeChildren))),this._nodeChildren=new Array,this._computeState=(()=>{const e=new Di,t=new Ci,n=new Di,r=new Ai,i=new Ci,s=new Ai,o=new Ai,a=new Ai,u=new Ai,c=new Ai;return function(h){var l;h.parent=this.raw.parent;const p=this._adapter,f=null==(l=this.referenceMetrics)?void 0:l[h.mode];t.copy((null==p?void 0:p.orientation.enabled)&&(null==p?void 0:p.orientation[h.mode])||this.raw.relativeOrientation);const d=(null==p?void 0:p.bounds.enabled)&&(null==p?void 0:p.bounds[h.mode]);if(d){d.getCenter(o),d.getSize(a);const e=this.innerCenter,l=this.innerSize,p=this.system.epsillonMeters;Math.abs(a.x)<=p&&(a.x=(Math.sign(a.x)||1)*p*10),Math.abs(a.y)<=p&&(a.y=(Math.sign(a.y)||1)*p*10),Math.abs(a.z)<=p&&(a.z=(Math.sign(a.z)||1)*p*10),s.copy(a),Math.abs(l.x)>=p&&(s.x/=l.x),Math.abs(l.y)>=p&&(s.y/=l.y),Math.abs(l.z)>=p&&(s.z/=l.z),i.multiplyQuaternions(h.outerOrientation,t).normalize(),u.copy(o).applyQuaternion(i),c.copy(e).multiply(s).applyQuaternion(i),r.copy(h.outerOrigin).add(u).sub(c),n.compose(r,i,s),h.worldMatrix=n}else e.compose(this.raw.relativePosition,t,this.raw.relativeScale),h.worldMatrix=(null==f?void 0:f.worldMatrix)?n.multiplyMatrices(null==f?void 0:f.worldMatrix,e):e;const m=(null==p?void 0:p.opacity.enabled)&&(null==p?void 0:p.opacity[h.mode]);return h.opacity="number"==typeof m?m:1,h}})(),this.raw={parent:null,worldMatrix:new Di,relativeMatrix:new Di,opacity:0,worldPosition:new Ai,worldOrientation:new Ci,worldScale:new Ai,relativePosition:new Ai,relativeOrientation:new Ci,relativeScale:new Ai,spatialBounds:new Ki,worldFromSpatial:new Di,localFromSpatial:new Di,spatialFromLocal:new Di},this.outerOrigin={current:()=>this._getOuterOrigin("current"),target:()=>this._getOuterOrigin("target")},this._cachedCurrentState=this._cache.memoize((()=>this._computeState(this[As]))),this[Ts]=new ks("current",this),this._cachedTargetState=this._cache.memoize((()=>this._computeState(this[zs]))),this[Os]=new ks("target",this),this[Cs]=new ks("target",this),this._cachedBoundsChildren=this._cache.memoize((()=>{const e=this.nodeChildren,t=this._boundingChildren;t.length=0;for(const n of e){const e=this.system.getMetrics(n);e.isAdaptive||t.push(e)}return t})),this._boundingChildren=[]}update(){var e,t;if(this.needsUpdate){this.needsUpdate=!1;const n=this._adapter=this.system.nodeAdapters.get(this.node);this.parentNode=this.raw.parent,this.parentMetrics=this.parentNode&&this.system.getMetrics(this.parentNode);const r=(null==(e=null==n?void 0:n.activeLayout)?void 0:e.referenceNode)||(null==n?void 0:n.referenceNode)||this.parentNode;this.referenceMetrics=r&&this.system.getMetrics(r),null==(t=this.referenceMetrics)||t.update(),n?n._update():(this.invalidateInnerBounds(),this.invalidateStates(),this.updateRawState())}}get innerBounds(){return this._cachedInnerBounds()}get innerCenter(){return this.innerBounds,this._innerCenter}get innerSize(){return this.innerBounds,this._innerSize}get intrinsicBounds(){return this._intrinsicBoundsNeedsUpdate&&(this._intrinsicBoundsNeedsUpdate=!1,this.system.bindings.getIntrinsicBounds(this,this._intrinsicBounds),this._intrinsicBounds.getCenter(this._intrinsicCenter),this._intrinsicBounds.getSize(this._intrinsicSize)),this._intrinsicBounds}get intrinsicCenter(){return this.intrinsicBounds,this._intrinsicCenter}get intrinsicSize(){return this.intrinsicBounds,this._intrinsicSize}invalidateIntrinsicBounds(){this._intrinsicBoundsNeedsUpdate=!0;for(const e of this.boundingChildMetrics)e.invalidateIntrinsicBounds()}invalidateInnerBounds(){if(!this._cachedInnerBounds.needsUpdate){this._cachedNodeChildren.needsUpdate=!0,this._cachedBoundsChildren.needsUpdate=!0,this._cachedInnerBounds.needsUpdate=!0;for(const e of this.boundingChildMetrics)e.invalidateInnerBounds()}}containsNode(e){this.update();let t=this.system.getMetrics(e);for(;t;){if(t.parentMetrics===this)return t.node;t=t.parentMetrics}return!1}containedByNode(e){this.update();let t=this.parentMetrics;for(;t;){if(t.node===e)return t.node;t=t.parentMetrics}return!1}get nodeChildren(){return this._cachedNodeChildren()}invalidateStates(){this._cachedCurrentState.needsUpdate=!0,this._cachedTargetState.needsUpdate=!0,this[As].invalidate(),this[zs].invalidate()}updateRawState(){this.system.bindings.getState(this);const e=this.raw;e.worldMatrix.decompose(e.worldPosition,e.worldOrientation,e.worldScale),e.relativeMatrix.decompose(e.relativePosition,e.relativeOrientation,e.relativeScale),e.worldFromSpatial.compose(this.outerOrigin.target(),e.worldOrientation,ys),e.localFromSpatial.copy(e.worldMatrix).invert().multiply(e.worldFromSpatial),e.spatialFromLocal.copy(e.localFromSpatial).invert(),e.spatialBounds.copy(this.innerBounds).applyMatrix4(e.spatialFromLocal)}_getOuterOrigin(e){var t,n,r;const i=this.system.nodeAdapters.get(this.node);return i?i.outerOrigin[e]:null!=(r=null==(n=null==(t=this.referenceMetrics)?void 0:t[e])?void 0:n.worldCenter)?r:gs}get current(){return this.update(),this._cachedCurrentState()}get target(){return this.update(),this._cachedTargetState()}get previousTarget(){return this.update(),this[Rs]}get boundingChildMetrics(){return this._cachedBoundsChildren()}get isAdaptive(){return this.system.nodeAdapters.has(this.node)}}Ts=As,Os=zs,Cs=Rs;class Ls{constructor(e){e&&Object.assign(this,e)}}class Bs{constructor(e){this.system=e,this._config=new Ls,this._prevOrientation=new Ci,this._prevBounds=new Ki,this._scratchSolution=new Xs,this._scratchBestSolution=new Xs}_setConfig(e){var t,n,r,i,s,o,a,u,c,h;const l=this.system.optimize;this._config.minFeasibleTime=null!=(t=e.minFeasibleTime)?t:l.minFeasibleTime,this._config.maxInfeasibleTime=null!=(n=e.maxInfeasibleTime)?n:l.maxInfeasibleTime,this._config.pulseRate=null!=(r=e.pulseRate)?r:l.pulseRate,this._config.maxIterationsPerFrame=null!=(i=e.maxIterationsPerFrame)?i:l.maxIterationsPerFrame,this._config.swarmSize=null!=(s=e.swarmSize)?s:l.swarmSize,this._config.pulseFrequencyMin=null!=(o=e.pulseFrequencyMin)?o:l.pulseFrequencyMin,this._config.pulseFrequencyMax=null!=(a=e.pulseFrequencyMax)?a:l.pulseFrequencyMax,this._config.stepSizeMax=null!=(u=e.stepSizeMax)?u:l.stepSizeMax,this._config.stepSizeMin=null!=(c=e.stepSizeMin)?c:l.stepSizeMin,this._config.stepSizeStart=null!=(h=e.stepSizeStart)?h:l.stepSizeStart}update(e){if(0===e.layouts.length||e.metrics.innerBounds.isEmpty())return e.activeLayout=null,!1;const t=this._prevOrientation.copy(e.orientation.target),n=this._prevBounds.copy(e.bounds.target);for(const t of e.layouts)this._setConfig(t),this._updateLayout(e,t);let r,i;for(const t of e.layouts){const e=t.solutions[0];if((!i||!i.isFeasible&&e.isFeasible)&&(i=e,r=t,i.isFeasible))break}return e.layoutFeasibleTime+=e.system.deltaTime,e.layoutInfeasibleTime+=e.system.deltaTime,(null==i?void 0:i.isFeasible)||(e.layoutFeasibleTime=0),i&&i.isFeasible&&e.layoutFeasibleTime>=this._config.minFeasibleTime||e.layoutInfeasibleTime>=this._config.maxInfeasibleTime?(e.layoutInfeasibleTime=0,i.apply(!1)):(e.orientation.target=t,e.bounds.target=n,e.metrics.invalidateStates()),e.activeLayout=r,!0}_updateLayout(e,t){var n;e.measureBoundsCache.clear(),t.processObjectives();const r=t.solutions,i=this._config,s=this._scratchSolution,o=this._scratchBestSolution;let a=i.maxIterationsPerFrame;(null==(n=t.solutions[0])?void 0:n.isFeasible)&&(a=1),this._manageSolutionPopulation(e,t,i.swarmSize,i.stepSizeStart),r[0].apply();for(let e=0;e<a;e++){t.iteration++,o.copy(r[0]);let e=!1;for(let n=0;n<r.length;n++){const a=r[n];let u;if(s.copy(a),s.mutationStrategies=a.mutationStrategies,Math.random()<i.pulseRate){const e=o!==a?o:r[1];let n;if(r.length>2)do{n=r[Math.floor(Math.random()*r.length)]}while(n===a);s.moveTowards(e,i.pulseFrequencyMin,i.pulseFrequencyMax),n&&t.compareSolutions(n,a)<=0&&s.moveTowards(n,i.pulseFrequencyMin,i.pulseFrequencyMax)}else u=s.perturb();s.apply();const c=t.compareSolutions(s,a)<0;if(c&&(a.copy(s),a!==r[0]&&t.compareSolutions(a,r[0])<0&&r[0].copy(a),e=!0),u)if(u.stepSize*=c?1.5:.9036020036098449,!c&&u.stepSize<i.stepSizeMin||u.stepSize>i.stepSizeMax){for(const e of a.mutationStrategies)e.stepSize=i.stepSizeStart;a!==r[0]&&(t.restartRate=.001+.999*t.restartRate,a.randomize(1),a.apply(),e=!0)}else a!==r[0]&&(t.restartRate=.999*t.restartRate)}e&&t.sortSolutions(),t.compareSolutions(o,r[0])<=0?t.successRate=.995*t.successRate:t.successRate=.005+.995*t.successRate}}_manageSolutionPopulation(e,t,n,r){if(n<=1)throw new Error("Swarm size must be larger than 1");if(t.solutions.length<n)for(;t.solutions.length<n;){const e=new Xs(t);for(const t of e.mutationStrategies)t.stepSize=r;e.randomize(1),t.solutions.push(e)}else if(t.solutions.length>n)for(;t.solutions.length>n;)t.solutions.pop()}}class Fs{constructor(e){this.type="ratio",this.sortBlame=0,this.relativeTolerance=void 0,this.absoluteTolerance=void 0,this.computedAbsoluteTolerance=-1/0,this.computedRelativeTolerance=-1/0,this.priority=0,this.index=-1,this.reduceFromOneOrManySpec=(e,t,n)=>{if(void 0===t)return 0;if(t instanceof Array){let r=-1/0;for(const i of t)r=Math.max(n(e,i),r);return r}return n(e,t)},this._getNumberScoreSingle=(e,t)=>{let n=0;if("object"!=typeof t){const r=this.layout.adapter.system.measureNumber(t);n=-Math.abs(e-r)}else{const r="gt"in t?this.layout.adapter.system.measureNumber(t.gt):void 0,i="lt"in t?this.layout.adapter.system.measureNumber(t.lt):void 0;void 0!==r&&e<r?n=e-r:void 0!==i&&e>i&&(n=i-e)}return n},this._getVector3ScoreSingle=(e,t)=>("x"in t&&void 0!==t.x?this.getNumberScore(e.x,t.x):0)+("y"in t&&void 0!==t.y?this.getNumberScore(e.y,t.y):0)+("z"in t&&void 0!==t.z?this.getNumberScore(e.z,t.z):0)+("magnitude"in t&&void 0!==t.magnitude?this.getNumberScore(e.length(),t.magnitude):0),this._quat=new Ci,this._euler=new qi,this._getQuaternionScoreSingle=(e,t)=>{var n,r;if(void 0===t)return 0;if("x"in t)return-this._quat.copy(t).angleTo(e)*Ni;if("swingRange"in t){const i=this._euler.setFromQuaternion(e),s=i.x*Ni,o=i.y*Ni,a=i.z*Ni,u=this.layout.adapter.system,c=u.mathScope.degree;let h=(null==(n=t.swingRange)?void 0:n.x)?u.measureNumber(t.swingRange.x,c):0,l=(null==(r=t.swingRange)?void 0:r.y)?u.measureNumber(t.swingRange.y,c):0;h=Math.max(h,.01),l=Math.max(l,.01);const p=1-(s/h)**2-(o/l)**2,f=(t.twistRange?u.measureNumber(t.twistRange,c):0)-Math.abs(a);return(p>0?0:p)+(f>0?0:f)}return 0},this._getBoundsMeasureScoreSingle=(e,t,n,r)=>{if(void 0===t)return 0;if("object"==typeof t){if("gt"in t){const i=this.layout.adapter.measureBounds(t.gt,n,r);if(e<i)return e-i}if("lt"in t){const i=this.layout.adapter.measureBounds(t.lt,n,r);if(e>i)return i-e}return 0}return-Math.abs(e-this.layout.adapter.measureBounds(t,n,r))},this.layout=e}static isDiscreteSpec(e){const t=typeof e;return"string"===t||"number"===t}static isContinuousSpec(e){return void 0!==e&&e instanceof Array==0&&"object"==typeof e&&1==("gt"in e||"lt"in e)}get bestScore(){return this.layout.solutions[0].scores[this.index]}getNumberScore(e,t){return this.reduceFromOneOrManySpec(e,t,this._getNumberScoreSingle)}getVector3Score(e,t){return this.reduceFromOneOrManySpec(e,t,this._getVector3ScoreSingle)}getQuaternionScore(e,t){return this.reduceFromOneOrManySpec(e,t,this._getQuaternionScoreSingle)}getBoundsScore(e,t){if(void 0===e)return 0;let n=0;for(const r in e){if("absolute"===r)continue;let i=r;if("size"===i||"center"===i){const r=e[i];for(const e of Vs){let s=e;if("spatial"!==t){if("meter"===this.type&&"z"!==s)continue;if("pixel"===this.type&&"z"===s)continue}n+=this.getBoundsMeasureScore(null==r?void 0:r[s],t,i+s)}}else{if("spatial"!==t){if("meter"===this.type&&"back"!==i&&"front"!==i)continue;if("pixel"===this.type&&("back"===i||"front"===i))continue}n+=this.getBoundsMeasureScore(e[i],t,i)}}return n}getBoundsMeasureScore(e,t,n){if(void 0===e)return 0;const r=this.layout.adapter.metrics.target;let i,s,o;switch(t){case"spatial":i=r.spatialBounds,s=r.spatialCenter,o=r.spatialSize;break;case"visual":case"view":i=r.visualBounds,s=r.visualCenter,o=r.visualSize;break;default:throw new Error(`Unknown measure type "${t}.${n}" in spec:\n "${e}"`)}let a=0;switch(n){case"left":a=i.min.x;break;case"right":a=i.max.x;break;case"bottom":a=i.min.y;break;case"top":a=i.max.y;break;case"back":a=i.min.z;break;case"front":a=i.max.z;break;case"centerx":a=s.x;break;case"centery":a=s.y;break;case"centerz":a=s.z;break;case"centerdistance":a="spatial"===t?s.length():Math.sqrt(s.x**2+o.y**2);break;case"sizex":a=o.x;break;case"sizey":a=o.y;break;case"sizez":a=o.z;break;case"sizediagonal":a="spatial"===t?o.length():Math.sqrt(o.x**2+o.y**2);break;default:throw new Error(`Unknown measure subtype ${t}.${n} in spec "${e}"`)}if(e instanceof Array){let r=-1/0;for(const i of e)r=Math.max(this._getBoundsMeasureScoreSingle(a,i,t,n),r);return r}return this._getBoundsMeasureScoreSingle(a,e,t,n)}attenuateVisualScore(e){let t=0;const n=this.layout.getComputedAbsoluteTolerance("pixel"),r=this.layout.adapter,i=r.system.viewResolution,s=r.system.viewFrustum,o=i.x,a=i.y,u=i.length(),c=r.metrics.target.visualBounds,h=c.min.x- -o/2+n,l=c.max.x-o/2-n,p=c.min.y- -a/2+n,f=c.max.y-a/2-n,d=c.max.z+s.nearMeters;return h<0&&(t+=Math.abs(h/o)),l>0&&(t+=Math.abs(l/o)),p<0&&(t+=Math.abs(p/a)),f>0&&(t+=Math.abs(f/a)),d>0&&(t+=10*d),e-Math.abs(u)*t}}class Ps extends Fs{constructor(e){super(e),this.type="degree"}evaluate(){const e=this.layout.adapter.metrics.target;return this.getQuaternionScore(e.relativeOrientation,this.spec)}}class Us extends Fs{constructor(e){super(e),this.type="ratio"}evaluate(){const e=this.layout.adapter.metrics.target;return this.getVector3Score(e.worldScale,this.spec)}}class js extends Fs{constructor(e){super(e),this.mode="xyz",this._scale=new Ai,this.type="ratio"}evaluate(){const e=this.layout.adapter.metrics.target,t=this.mode;if(!t)return 0;const n=this._scale.copy(e.worldScale),r="xyz"===t?Math.max(Math.abs(n.x),Math.abs(n.y),Math.abs(n.z)):Math.max(Math.abs(n.x),Math.abs(n.y)),i=n.divideScalar(r);return-1/i.x+1+-1/i.y+1+("xyz"===t?-1/i.z+1:i.z>1?1-i.z:0)}}const Vs=["x","y","z","diagonal","distance"];class qs extends Fs{constructor(e){super(e),this.type="meter"}evaluate(){return this.getBoundsScore(this.spec,"spatial")}}class Hs extends Fs{constructor(e){super(e),this.pixelTolerance=void 0,this.meterTolerance=void 0,this.type="pixel"}evaluate(){var e;return"meter"===this.type&&(this.absoluteTolerance=this.meterTolerance),"pixel"===this.type&&(this.absoluteTolerance=this.pixelTolerance),this.getBoundsScore(this.spec,"visual")+this.getBoundsScore(null==(e=this.spec)?void 0:e.absolute,"view")}}class $s extends Fs{constructor(e){super(e),this.minAreaPercent=0,this.type="pixel"}evaluate(){var e;const t=this.layout.adapter.metrics.target,n=t.visualSize,r=this.layout.adapter.system.viewResolution,i=Math.min(n.x*n.y,r.x*r.y),s=(null==(e=t.referenceState)?void 0:e.visualSize)||r,o=s.x*s.y;return this.attenuateVisualScore(i)-o*this.minAreaPercent}}class Ws extends Fs{constructor(e){super(e),this.type="meter",this.absoluteTolerance=1e10}evaluate(){return-this.layout.adapter.metrics.target.visualCenter.length()}}const Gs=new Ai;class Ys extends Ls{constructor(e){super(),this.adapter=e,this.absoluteTolerance={meter:"10mm",pixel:"4px",degree:"0.002deg",ratio:.002},this.successRate=0,this.restartRate=0,this.objectives=new Array,this.referenceNode=null,this.solutions=new Array,this.iteration=0,this.compareSolutions=(e,t)=>{const n=this.objectives;if(e.scores.length<n.length)return 1;if(t.scores.length<n.length)return-1;if(e.boundsCenterDistance>1e20)return 1;if(t.boundsCenterDistance>1e10)return-1;if(e.boundsManhattanLength>1e20)return 1;if(t.boundsManhattanLength>1e10)return-1;const r=e.isFeasible,i=t.isFeasible;if(r&&!i)return-1;if(i&&!r)return 1;let s=0;const o=this.solutions[0].scores;for(let r=0;r<n.length;r++){const i=e.scores[r],a=t.scores[r];if(isNaN(i))return 1;if(isNaN(a))return-1;const u=n[r],c=u.computedRelativeTolerance,h=u.computedAbsoluteTolerance,l=Math.max(o[r],i,a),p=Math.min(l-Math.abs(l)*c,-h);if(i<p||a<p)return u.sortBlame++,a-i;a-i!=0&&(s=a-i)}return s}}getComputedAbsoluteTolerance(e){return this.adapter.system.measureNumber(this.absoluteTolerance[e],e)}poseRelativeTo(e){return this.referenceNode=e,this}maximize(e){var t;const n=this.maximizeObjective=null!=(t=this.maximizeObjective)?t:new $s(this);return n.priority=-1e3,n.relativeTolerance=.1,this.addObjective(n,e)}orientation(e,t){var n;const r=this.orientationConstraint=null!=(n=this.orientationConstraint)?n:new Ps(this);return r.spec=e,r.priority=-999,this.addObjective(r,t)}keepAspect(e="xyz",t){var n;const r=this.keepAspectConstraint=null!=(n=this.keepAspectConstraint)?n:new js(this);return r.mode=e,r.priority=-998,this.addObjective(r,t)}scale(e,t){var n;const r=this.scaleConstraint=null!=(n=this.scaleConstraint)?n:new Us(this);return r.spec=e,r.priority=-2,this.addObjective(r,t)}bounds(e,t){var n;const r=this.boundsConstraint=null!=(n=this.boundsConstraint)?n:new qs(this);return r.spec=e,this.addObjective(r,t)}visualOrientation(e,t){var n;const r=this.orientationConstraint=null!=(n=this.orientationConstraint)?n:new Ps(this);return r.spec=e,r.priority=-999,this.addObjective(r,t)}visualBounds(e,t){var n,r;const i=this.visualBoundsMeterConstraint=null!=(n=this.visualBoundsMeterConstraint)?n:new Hs(this),s=this.visualBoundsPixelConstraint=null!=(r=this.visualBoundsPixelConstraint)?r:new Hs(this);return i.spec=e,i.type="meter",s.spec=e,s.type="pixel",this.addObjective(i,t).addObjective(s,t)}magnetize(e){var t;const n=this.magnetizeObjective=null!=(t=this.magnetizeObjective)?t:new Ws(this);return n.priority=-900,n.relativeTolerance=.95,this.addObjective(n,e)}avoidOcclusion(e){var t;const n=this.minimizeOcclusionObjective=null!=(t=this.minimizeOcclusionObjective)?t:new Ws(this);return n.priority=11,this.addObjective(n,e)}addObjective(e,t){return Object.assign(e,t),-1===this.objectives.indexOf(e)&&this.objectives.push(e),this.processObjectives(),this}get hasValidSolution(){var e;return!0===(null==(e=this.solutions[0])?void 0:e.isFeasible)}processObjectives(){var e,t;const n=this.adapter.system,r=this.objectives;let i=0;for(const s of r)s.index=i++,s.computedAbsoluteTolerance=void 0!==s.absoluteTolerance?n.measureNumber(s.absoluteTolerance,n.mathScope[s.type]):this.getComputedAbsoluteTolerance(s.type),s.computedRelativeTolerance=null!=(t=null!=(e=s.relativeTolerance)?e:this.relativeTolerance)?t:this.adapter.system.optimize.relativeTolerance}sortSolutions(){this.solutions.sort(this.compareSolutions),this.bestSolution=this.solutions[0]}}const Zs=class{constructor(e){this.layout=void 0,this.orientation=new Ci,this.bounds=new Ki,this.scores=[],this.isFeasible=!1,this.mutationStrategies=[{type:"rotate",stepSize:.1},{type:"center",stepSize:.1},{type:"size",stepSize:.1},{type:"minmax",stepSize:.1}],this._mutationWeights=[],e&&(this.layout=e)}get aspectPenalty(){return this.scores[this.layout.objectives.indexOf(this.layout.keepAspectConstraint)]||0}get orientationPenalty(){return this.scores[this.layout.objectives.indexOf(this.layout.orientationConstraint)]||0}get spatialBoundsPenalty(){return this.scores[this.layout.objectives.indexOf(this.layout.boundsConstraint)]||0}_selectStrategy(){const e=this.mutationStrategies,t=this._mutationWeights,n=this.layout.orientationConstraint,r=this.layout.keepAspectConstraint;for(let i=0;i<e.length;i++)t[i]=e[i].stepSize,n&&"rotate"==e[i].type&&this.orientationPenalty>-n.computedAbsoluteTolerance&&(t[i]*=.01),r&&"size"==e[i].type&&this.aspectPenalty<-r.computedAbsoluteTolerance&&(t[i]*=100);return function(e,t){let n=0;for(let r=0;r<e.length;r++)n+=(null==t?void 0:t[r])||1;const r=Math.random()*n;n=0;for(let i=0;i<e.length;i++)if(n+=(null==t?void 0:t[i])||1,n>r)return e[i];return e[0]}(e,t)}copy(e){this.layout=e.layout,this.orientation.copy(e.orientation),this.bounds.copy(e.bounds),this.scores.length=0;for(let t=0;t<e.scores.length;t++)this.scores[t]=e.scores[t];return this.isFeasible=e.isFeasible,this}randomize(e){const t=Ms(e),n=Zs._scratchV1.set(0,0,-t),r=this.layout.adapter.system.viewMetrics.target;n.applyMatrix4(r.worldMatrix);const i=this.layout.adapter.metrics.target.parentState;i&&n.applyMatrix4(i.worldMatrixInverse),this.orientation.copy(r.worldOrientation),i&&this.orientation.multiply(i.worldOrientationInverse);const s=this.layout.adapter.metrics.innerBounds,o=s.isEmpty()?Zs._scratchV2.set(1,1,1):s.getSize(Zs._scratchV2);return o.normalize(),o.multiplyScalar(2*t*Math.tan(5*Mi)),this.bounds.setFromCenterAndSize(n,o),this}moveTowards(e,t,n){const r=this.bounds.getCenter(Zs._center),i=this.bounds.getSize(Zs._size),s=e.bounds,o=s.getCenter(Zs._otherCenter),a=s.getSize(Zs._otherSize);this.orientation.slerp(e.orientation,Zs.generatePulseFrequency(t,n)).normalize(),Math.random()<.5?(r.lerp(o,Zs.generatePulseFrequency(t,n)),i.lerp(a,Zs.generatePulseFrequency(t,n)),this.bounds.setFromCenterAndSize(r,i)):(this.bounds.min.lerp(s.min,Zs.generatePulseFrequency(t,n)),this.bounds.max.lerp(s.max,Zs.generatePulseFrequency(t,n)))}perturb(){var e;const t=this._selectStrategy(),n=t.type;let r=t.stepSize;if("rotate"===n||Math.random()<.001){const t=null==(e=this.layout.orientationConstraint)?void 0:e.spec;if((null==t?void 0:t.isQuaternion)&&this.orientationPenalty<t.computedAbsoluteTolerance&&Math.random()<.01)this.orientation.copy(t);else{const e=Math.min(Ms(1e-4*Math.min(r,1)),1);this.orientation.multiply(Ns(e,e)).normalize()}}const i=this.bounds,s=i.getCenter(Zs._center),o=i.getSize(Zs._size);if("center"===n){const e=Zs._direction.set(0,0,1).applyQuaternion(Ns(1,1));e.setLength(Es(r)).multiplyScalar(o.length()),s.add(e)}if("size"===n){const e=2**Es(r);o.multiplyScalar(e)}if(o.clampScalar(this.layout.adapter.system.epsillonMeters/10,1e20),i.setFromCenterAndSize(s,o),"minmax"===n){const e=Zs._direction.set(0,0,1).applyQuaternion(Ns(1,1));e.setLength(Es(r)).multiply(o),i.min.add(e)}const a=i.min,u=i.max;return a.x>u.x&&this._swap(a,u,"x"),a.y>u.y&&this._swap(a,u,"y"),a.z>u.z&&this._swap(a,u,"z"),t}_swap(e,t,n){const r=e[n],i=t[n];e[n]=i,t[n]=r}static generatePulseFrequency(e,t){return e+Math.random()*(t-e)}apply(e=!0){const t=this.layout,n=t.adapter;if(n.orientation.target=this.orientation,n.bounds.target=this.bounds,n.metrics.invalidateStates(),e){this.isFeasible=!0;for(let e=0;e<t.objectives.length;e++){const n=t.objectives[e],r=this.scores[e]=n.evaluate();(r<-n.computedAbsoluteTolerance||!isFinite(r))&&(this.isFeasible=!1)}}this.boundsManhattanLength=this.bounds.getSize(Gs).manhattanLength(),this.boundsCenterDistance=this.bounds.getCenter(Gs).length()}};let Xs=Zs;Xs._scratchV1=new Ai,Xs._scratchV2=new Ai,Xs._direction=new Ai,Xs._center=new Ai,Xs._size=new Ai,Xs._otherCenter=new Ai,Xs._otherSize=new Ai;var Js=function(e){return function(t){return 1-e(1-t)}},Qs=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},Ks=Js,eo=Qs,to=function(e){return function(t){return Math.pow(t,e)}},no=function(e){return function(t){return t*t*((e+1)*t-e)}},ro=function(e){var t=no(e);return function(e){return(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))}},io=to(2),so=Js(io),oo=Qs(io),ao=function(e){return 1-Math.sin(Math.acos(e))},uo=Js(ao),co=Qs(uo),ho=no(1.525),lo=Js(ho),po=Qs(ho),fo=ro(1.525),mo=function(e){var t=e*e;return e<.36363636363636365?7.5625*t:e<.7272727272727273?9.075*t-9.9*e+3.4:e<.9?12.066481994459833*t-19.63545706371191*e+8.898060941828255:10.8*e*e-20.52*e+10.72},go="undefined"!=typeof Float32Array,yo=function(e,t){return 1-3*t+3*e},vo=function(e,t){return 3*t-6*e},xo=function(e){return 3*e},wo=function(e,t,n){return 3*yo(t,n)*e*e+2*vo(t,n)*e+xo(t)},bo=function(e,t,n){return((yo(t,n)*e+vo(t,n))*e+xo(t))*e};const _o=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",reversed:Js,mirrored:Qs,createReversedEasing:Ks,createMirroredEasing:eo,createExpoIn:to,createBackIn:no,createAnticipateEasing:ro,linear:function(e){return e},easeIn:io,easeOut:so,easeInOut:oo,circIn:ao,circOut:uo,circInOut:co,backIn:ho,backOut:lo,backInOut:po,anticipate:fo,bounceOut:mo,bounceIn:function(e){return 1-mo(1-e)},bounceInOut:function(e){return e<.5?.5*(1-mo(1-2*e)):.5*mo(2*e-1)+.5},cubicBezier:function(e,t,n,r){var i=go?new Float32Array(11):new Array(11),s=function(t){for(var r,s,o,a=0,u=1;10!==u&&i[u]<=t;++u)a+=.1;return--u,r=(t-i[u])/(i[u+1]-i[u]),(o=wo(s=a+.1*r,e,n))>=.001?function(t,r){for(var i=0,s=0;i<8;++i){if(0===(s=wo(r,e,n)))return r;r-=(bo(r,e,n)-t)/s}return r}(t,s):0===o?s:function(t,r,i){var s,o,a=0;do{(s=bo(o=r+(i-r)/2,e,n)-t)>0?i=o:r=o}while(Math.abs(s)>1e-7&&++a<10);return o}(t,a,a+.1)};return function(){for(var t=0;t<11;++t)i[t]=bo(.1*t,e,n)}(),function(i){return e===t&&n===r?i:0===i?0:1===i?1:bo(s(i),t,r)}}});class Eo{constructor(e){e&&Object.assign(this,e)}}class Mo{constructor(e){e&&Object.assign(this,e)}}const No=new bi,So=new Ai,To=new Ci,Oo=new Ki,Co=new Xi,Ao=new Xi(0,0,0);class zo extends Mo{constructor(e,t,n,r=e.transition){super(n),this.system=e,this.parentConfig=r,this.needsUpdate=!1,this._size=new Ai,this.queue=[],this.enabled=!1,this.forceWait=!1,this._forceCommit=!1,this._resolvedConfig=new Mo,this.delayTime=0,this.debounceTime=0,this._previousStatus="unchanged",this._status="unchanged",this.reset(t),this._previousTarget=this._copy(this._previousTarget,this.target)}_copy(e,t){if(void 0===t)return;if("number"==typeof t)return t;const n=e?e.copy(t):t.clone();if(n&&"isBox3"in n){const e=n,t=e.getSize(this._size);!e.isEmpty()&&isFinite(t.x)&&isFinite(t.y)&&isFinite(t.z)||e.setFromCenterAndSize(gs,gs)}return n}_isEqual(e,t){return void 0!==e&&void 0!==t&&(e===t||("number"==typeof e?e===t:(null==e?void 0:e.equals(t))||!1))}reset(e){this._start=this._copy(this._start,e),this._current=this._copy(this._current,e),this._target=this._copy(this._target,e),this.queue.length=0}set start(e){this._start=this._copy(this._start,e)}get start(){return this._start}set current(e){this._current=this._copy(this._current,e)}get current(){return this._current}set reference(e){this._reference=this._copy(this._reference,e)}get reference(){return this._reference}set target(e){this.enabled=!0,this._target=this._copy(this._target,e)}get target(){return this._target}get progress(){if(!this.enabled)return 1;if(this.queue.length>0){const e=this.queue[this.queue.length-1];return 0===e.duration?0:e.elapsed/e.duration}return 1}get forceCommit(){return this._forceCommit}set forceCommit(e){this._forceCommit!==e&&(this._forceCommit=e)}get relativeDifference(){var e,t;const n=null!=(t=null==(e=this.queue[this.queue.length-1])?void 0:e.target)?t:this.start;return void 0!==this.target?ws(n,this.target):0}get referenceRelativeDifference(){return void 0!==this.reference&&void 0!==this.target?ws(this.reference,this.target):1/0}get resolvedConfig(){var e,t,n,r,i,s,o,a,u,c,h,l,p,f,d,m;const g=this._resolvedConfig,y=this.parentConfig,v=this.system.transition;return g.multiplier=null!=(t=null!=(e=this.multiplier)?e:null==y?void 0:y.multiplier)?t:v.multiplier,g.duration=null!=(r=null!=(n=this.duration)?n:null==y?void 0:y.duration)?r:v.duration,g.easing=null!=(s=null!=(i=this.easing)?i:null==y?void 0:y.easing)?s:v.easing,g.threshold=null!=(a=null!=(o=this.threshold)?o:null==y?void 0:y.threshold)?a:v.threshold,g.delay=null!=(c=null!=(u=this.delay)?u:null==y?void 0:y.delay)?c:v.delay,g.debounce=null!=(l=null!=(h=this.debounce)?h:null==y?void 0:y.debounce)?l:v.debounce,g.maxWait=null!=(f=null!=(p=this.maxWait)?p:null==y?void 0:y.maxWait)?f:v.maxWait,g.blend=null!=(m=null!=(d=this.blend)?d:null==y?void 0:y.blend)?m:v.blend,g}get previousStatus(){return this._previousStatus}get status(){return this.needsUpdate&&(this._previousStatus=this._status,this._status=this._computeStatus()),this._status}_computeStatus(){if(this.forceCommit)return"committing";const e=this.resolvedConfig,t=e.threshold,n=this.system.deltaTime*e.multiplier,r=this.delayTime+n,i=this.debounceTime+n;return this.relativeDifference>t?!this.forceWait&&(r>=e.delay&&i>=e.debounce||r>=e.maxWait)?"committing":this.referenceRelativeDifference<t?"settling":"changed":"unchanged"}_updateTransitionable(){var e,t,n,r,i;const s=this.system.deltaTime,o=this.resolvedConfig,a=this.queue,u=this.status,c=s*o.multiplier;for(;a.length&&a[0].elapsed>=a[0].duration;)this.start=a.shift().target;this.current=this.start;let h=this.start;for(let e=0;e<a.length;e++){const t=a[e];if(this._addTransitionToCurrent(h,t,c),h=t.target,!t.blend)break}switch(this.debounceTime+=c,u){case"settling":break;case"changed":this.delayTime+=c,this.reference=this.target;break;case"unchanged":this.reference=void 0,this.delayTime=0;break;case"committing":this.delayTime=0,this.debounceTime=0;const s="object"==typeof this.forceCommit?this.forceCommit:new Eo;s.target=null!=(e=s.target)?e:this._copy(void 0,this.target),s.duration=null!=(t=s.duration)?t:o.duration,s.easing=null!=(n=s.easing)?n:o.easing,s.blend=null!=(r=s.blend)?r:o.blend,s.elapsed=null!=(i=s.elapsed)?i:0,a.push(s),this.forceCommit=!1}this.forceWait=!1}_addTransitionToCurrent(e,t,n){const r=this._current,i=t.duration>0?t.easing(Math.min(t.elapsed/t.duration,1)):1,s=t.target;if(t.elapsed+=n,"number"!=typeof s){if("isVector3"in s){const t=r,n=e,o=s,a=So.copy(o).sub(n).lerp(gs,1-i);this._current=t.add(a)}else if("isVector2"in s){const t=r,n=e,o=s,a=No.copy(o).sub(n).lerp(ms,1-i);this._current=t.add(a)}else if("isQuaternion"in s){const t=r,n=e,o=s,a=To.copy(n).invert().multiply(o).slerp(vs,1-i);this._current=t.multiply(a).normalize()}else if("isColor"in s){const t=r,n=e,o=s,a=Co.copy(o).sub(n).lerp(Ao,1-i);this._current=t.add(a)}else if("isBox3"in s){const t=r,n=e,o=s,a=Oo.min.copy(o.min).sub(n.min).lerp(gs,1-i),u=Oo.max.copy(o.max).sub(n.max).lerp(gs,1-i);return t.min.add(a),t.max.add(u),void(this._current=t)}}else this._current=r+Oi(s-e,0,1-i)}_swap(e,t,n){const r=e[n],i=t[n];e[n]=i,t[n]=r}update(e=!1){if(!this.needsUpdate&&!e)return;if(this._isEqual(this._previousTarget,this.target)||(this._target=this._target,this.enabled=!0),this._previousTarget=this._copy(this._previousTarget,this.target),!this.enabled)return;const t=this.syncGroup;if(!this.forceCommit&&t)for(const e of t)if(e.enabled&&"committing"===e.status){for(const e of t)e.needsUpdate&&!1===e.forceCommit&&e.relativeDifference>e.resolvedConfig.threshold&&(e.forceCommit=!0);break}this._updateTransitionable(),this.needsUpdate=!1}set syncGroup(e){this._syncGroup&&this._syncGroup.delete(this),this._syncGroup=e,null==e||e.add(this)}get syncGroup(){return this._syncGroup}}class Ro{constructor(e,t){this.system=e,this.node=t,this.measureBoundsCache=new Map,this.transition=new Mo,this.referenceNode=void 0,this._parentAdapter=null,this.layouts=new Array,this.layoutFeasibleTime=0,this.layoutInfeasibleTime=0,this._prevLayout=null,this._activeLayout=null,this._progress=1,this._hasValidContext=!1,this._prevNodeOrientation=new Ci,this._prevNodeBounds=new Ki,this.metrics=this.system.getMetrics(this.node);const n=this.metrics.target;this._orientation=new zo(this.system,n.relativeOrientation,void 0,this.transition),this._bounds=new zo(this.system,n.spatialBounds,void 0,this.transition),this._opacity=new zo(this.system,n.opacity,void 0,this.transition),this._outerOrigin=new zo(this.system,n.outerCenter,void 0,this.transition),this._outerOrientation=new zo(this.system,n.outerOrientation,void 0,this.transition),this._outerBounds=new zo(this.system,n.outerBounds,void 0,this.transition),this._outerVisualBounds=new zo(this.system,n.outerVisualBounds,void 0,this.transition),this._outerOrigin.debounce=0,this._outerOrigin.delay=0,this._outerOrientation.debounce=0,this._outerOrientation.delay=0,this._outerBounds.debounce=0,this._outerBounds.delay=0,this._outerVisualBounds.debounce=0,this._outerVisualBounds.delay=0,this._orientation.syncGroup=this._bounds.syncGroup=this._opacity.syncGroup=new Set}measureBounds(e,t,n){var r,i,s;const o=this.system,a=o.mathScope,u=o.math,c="spatial"===t||"front"===n||"back"===n||"centerz"===n||"sizez"===n?a.meter:a.pixel,h=c===a.meter?"m":"px";"number"==typeof e&&(e=""+e+h);const l=t+"-"+n+" = "+e;if(null==(r=this.measureBoundsCache)?void 0:r.has(l))return this.measureBoundsCache.get(l);if(!o.mathCompiledExpressions.has(e)){const t=u.parse(e.replace("%","percent")).compile();o.mathCompiledExpressions.set(e,t)}const p=o.mathCompiledExpressions.get(e),f=o.viewMetrics.target,d=this.metrics.target;let m,g,y;switch(t){case"spatial":m=d.outerBounds,g=d.outerCenter;break;case"visual":m=d.outerVisualBounds,g=d.outerVisualCenter;break;case"view":m=f.visualBounds,g=f.visualCenter;break;default:throw new Error(`Unknown measure type "${t}.${n}"`)}if(e.includes("%")){const e="spatial"===t?d.outerSize:null!=(i=d.outerVisualSize)?i:f.visualSize;let r=0;switch(n){case"left":case"centerx":case"right":case"sizex":r=u.unit(e.x/100,h);break;case"bottom":case"centery":case"top":case"sizey":r=u.unit(e.y/100,h);break;case"back":case"centerz":case"front":case"sizez":r=u.unit(e.z/100,"m");break;case"sizediagonal":r="spatial"===t?u.unit(e.length()/100,"m"):u.unit(Math.sqrt(e.x**2+e.y**2)/100,"px");break;default:throw new Error(`Invalid measure subtype "${t}.${n}" for percentage units`)}a.percent=r}switch(n){case"left":y=m.min.x;break;case"centerx":y=g.x;break;case"right":y=m.max.x;break;case"bottom":y=m.min.y;break;case"centery":y=g.y;break;case"top":y=m.max.y;break;case"front":y=m.max.z;break;case"centerz":y=g.z;break;case"back":y=m.min.z;break;case"centerdistance":default:y=0}let v=p.evaluate(a);return"object"==typeof v&&(v=u.number(v,c)),y+=v,a.percent=void 0,null==(s=this.measureBoundsCache)||s.set(l,y),y}get outerOrigin(){return this._outerOrigin}get outerOrientation(){return this._outerOrientation}get outerBounds(){return this._outerBounds}get outerVisualBounds(){return this._outerVisualBounds}get parentAdapter(){return this._parentAdapter}_computeParentAdapter(){let e=this.metrics;for(;e=e.parentMetrics;){const t=this.system.nodeAdapters.get(e.node);if(t)return t}return null}get orientation(){return this._orientation}get bounds(){return this._bounds}get opacity(){return this._opacity}get previousLayout(){return this._prevLayout}set activeLayout(e){this._prevLayout=this._activeLayout,this._activeLayout=e}get activeLayout(){return this._activeLayout}get progress(){return this._progress}_computeProgress(){return Math.min(this.orientation.progress,this.bounds.progress,this.opacity.progress)}createLayout(){const e=new Ys(this);return this.layouts.push(e),e}get hasValidContext(){return this._hasValidContext}_computeHasValidContext(){var e;const t=this.parentAdapter;return!t||!!t.hasValidContext&&(0===t.layouts.length||!!(null==(e=t.activeLayout)?void 0:e.hasValidSolution))}_update(){var e;this._parentAdapter=this._computeParentAdapter(),this._hasValidContext=this._computeHasValidContext();const t=this.metrics;if(t.referenceMetrics&&(this.outerOrigin.target=t.referenceMetrics.target.worldCenter,this.outerOrientation.target=t.referenceMetrics.target.worldOrientation,this.outerBounds.target=t.referenceMetrics.innerBounds,this.outerBounds.target.applyMatrix4(t.target.spatialFromReference),this.outerVisualBounds.target=t.referenceMetrics.target.visualBounds),this.outerOrigin.update(),this.outerOrientation.update(),this.outerBounds.update(),this.outerVisualBounds.update(),this.onUpdate){this.onUpdate(),t.invalidateIntrinsicBounds(),t.invalidateInnerBounds(),t.invalidateStates(),t.updateRawState();const e=t.raw;if(!this.system.optimizer.update(this)){const t=this.orientation.current,n=this.orientation.target,r=e.relativeOrientation;n.angleTo(r)>this.system.epsillonRadians&&t.angleTo(r)>this.system.epsillonRadians&&(this.orientation.target=r);const i=this.bounds.current,s=this.bounds.target,o=e.spatialBounds;(s.min.distanceTo(o.min)>this.system.epsillonMeters||s.max.distanceTo(o.max)>this.system.epsillonMeters)&&(i.min.distanceTo(o.min)>this.system.epsillonMeters||i.max.distanceTo(o.max)>this.system.epsillonMeters)&&(this.bounds.target=o)}}else t.invalidateIntrinsicBounds(),t.invalidateInnerBounds(),t.invalidateStates(),this.system.optimizer.update(this);this.opacity.update(),this.orientation.update(),this.bounds.update(),this._progress=this._computeProgress(),t.invalidateStates(),this.system.bindings.apply(t,t.current),t.invalidateStates(),null==(e=this.onPostUpdate)||e.call(this)}}class Do{constructor(){this._cache=new Ss,this.isLayoutFrustum=!0,this._leftDegrees=-20,this._rightDegrees=20,this._bottomDegrees=-20,this._topDegrees=20,this._nearMeters=.5,this._farMeters=1e3,this._size=new bi,this._center=new bi,this._v1=new Ai,this._inverseProjection=new Di,this._forwardDirection=new Ai(0,0,-1),this._fullNDC=new Ki(new Ai(-1,-1,-1),new Ai(1,1,1)),this._cachedPerspectiveProjectionMatrix=this._cache.memoize((()=>{const e=this.nearMeters,t=this.farMeters,n=e*Math.tan(this.leftDegrees*Mi),r=e*Math.tan(this.rightDegrees*Mi),i=e*Math.tan(this.topDegrees*Mi),s=e*Math.tan(this.bottomDegrees*Mi);return this._perspective.makePerspective(n,r,i,s,e,t)})),this._perspective=new Di,this._boxA=new Qi,this._boxB=new Qi,this._overlapSize=new bi}get leftDegrees(){return this._leftDegrees}set leftDegrees(e){e!==this._leftDegrees&&(this._leftDegrees=e,this._cache.invalidateAll())}get rightDegrees(){return this._rightDegrees}set rightDegrees(e){e!==this._rightDegrees&&(this._rightDegrees=e,this._cache.invalidateAll())}get bottomDegrees(){return this._bottomDegrees}set bottomDegrees(e){e!==this._bottomDegrees&&(this._bottomDegrees=e,this._cache.invalidateAll())}get topDegrees(){return this._topDegrees}set topDegrees(e){e!==this._topDegrees&&(this._topDegrees=e,this._cache.invalidateAll())}get nearMeters(){return this._nearMeters}set nearMeters(e){e!==this._nearMeters&&(this._nearMeters=e,this._cache.invalidateAll())}get farMeters(){return this._farMeters}set farMeters(e){e!==this._farMeters&&(this._farMeters=e,this._cache.invalidateAll())}get sizeDegrees(){return this._size.set(this.rightDegrees-this.leftDegrees,this.topDegrees-this.bottomDegrees),this._size}get diagonalDegrees(){const e=this.sizeDegrees;return Math.acos(Math.cos(e.x*Mi)*Math.cos(e.y*Mi))*Ni}get centerDegrees(){const e=this.sizeDegrees;return this._center.set(this.leftDegrees+e.x/2,this.bottomDegrees+e.y/2)}get angleToCenter(){const e=this.centerDegrees;return Math.acos(Math.cos(e.x*Mi)*Math.cos(e.y*Mi))*Ni}get angleToTopLeft(){return Math.acos(Math.cos(this.leftDegrees*Mi)*Math.cos(this.topDegrees*Mi))*Ni}get angleToTopRight(){return Math.acos(Math.cos(this.rightDegrees*Mi)*Math.cos(this.topDegrees*Mi))*Ni}get angleToBottomLeft(){return Math.acos(Math.cos(this.leftDegrees*Mi)*Math.cos(this.bottomDegrees*Mi))*Ni}get angleToBottomRight(){return Math.acos(Math.cos(this.rightDegrees*Mi)*Math.cos(this.bottomDegrees*Mi))*Ni}get angleToClosestPoint(){const e=Math.min(Math.max(0,this.leftDegrees),this.rightDegrees),t=Math.min(Math.max(0,this.bottomDegrees),this.topDegrees);return Math.acos(Math.cos(e*Mi)*Math.cos(t*Mi))*Ni}get angleToFarthestPoint(){return Math.max(this.angleToTopLeft,this.angleToTopRight,this.angleToBottomLeft,this.angleToBottomRight)}get depth(){return this.farMeters-this.nearMeters}get distance(){return this.nearMeters+this.depth/2}get aspectRatio(){const e=this.nearMeters,t=e*Math.tan(this.leftDegrees*Mi),n=e*Math.tan(this.rightDegrees*Mi);return(e*Math.tan(this.topDegrees*Mi)-e*Math.tan(this.bottomDegrees*Mi))/(n-t)}setFromPerspectiveProjectionMatrix(e,t=this._fullNDC){const n=this._inverseProjection.copy(e).invert(),r=this._v1,i=this._forwardDirection,s=Math.sign(t.min.x)*r.set(t.min.x,0,-1).applyMatrix4(n).angleTo(i)*Ni,o=Math.sign(t.max.x)*r.set(t.max.x,0,-1).applyMatrix4(n).angleTo(i)*Ni,a=Math.sign(t.max.y)*r.set(0,t.max.y,-1).applyMatrix4(n).angleTo(i)*Ni,u=Math.sign(t.min.y)*r.set(0,t.min.y,-1).applyMatrix4(n).angleTo(i)*Ni,c=-r.set(0,0,t.min.z).applyMatrix4(n).z,h=-r.set(0,0,t.max.z).applyMatrix4(n).z;return this.leftDegrees=s,this.rightDegrees=o,this.topDegrees=a,this.bottomDegrees=u,this.nearMeters=c,this.farMeters=h,this}get perspectiveProjectionMatrix(){return this._cachedPerspectiveProjectionMatrix()}overlapPercent(e){return this._boxA.min.x=this.leftDegrees,this._boxA.max.x=this.rightDegrees,this._boxA.min.y=this.bottomDegrees,this._boxA.max.y=this.topDegrees,this._boxB.min.x=e.leftDegrees,this._boxB.max.x=e.rightDegrees,this._boxB.min.y=e.bottomDegrees,this._boxB.max.y=e.topDegrees,this._boxA.intersect(this._boxB).getSize(this._overlapSize).length()/this.sizeDegrees.length()}}var ko={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function Io(e){return"number"==typeof e}function Lo(e){return e&&!0===e.constructor.prototype.isBigNumber||!1}function Bo(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isComplex||!1}function Fo(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isFraction||!1}function Po(e){return e&&!0===e.constructor.prototype.isUnit||!1}function Uo(e){return"string"==typeof e}var jo=Array.isArray;function Vo(e){return e&&!0===e.constructor.prototype.isMatrix||!1}function qo(e){return Array.isArray(e)||Vo(e)}function Ho(e){return e&&e.isDenseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function $o(e){return e&&e.isSparseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function Wo(e){return e&&!0===e.constructor.prototype.isRange||!1}function Go(e){return e&&!0===e.constructor.prototype.isIndex||!1}function Yo(e){return"boolean"==typeof e}function Zo(e){return e&&!0===e.constructor.prototype.isResultSet||!1}function Xo(e){return e&&!0===e.constructor.prototype.isHelp||!1}function Jo(e){return"function"==typeof e}function Qo(e){return e instanceof Date}function Ko(e){return e instanceof RegExp}function ea(e){return!(!e||"object"!=typeof e||e.constructor!==Object||Bo(e)||Fo(e))}function ta(e){return null===e}function na(e){return void 0===e}function ra(e){return e&&!0===e.isAccessorNode&&!0===e.constructor.prototype.isNode||!1}function ia(e){return e&&!0===e.isArrayNode&&!0===e.constructor.prototype.isNode||!1}function sa(e){return e&&!0===e.isAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function oa(e){return e&&!0===e.isBlockNode&&!0===e.constructor.prototype.isNode||!1}function aa(e){return e&&!0===e.isConditionalNode&&!0===e.constructor.prototype.isNode||!1}function ua(e){return e&&!0===e.isConstantNode&&!0===e.constructor.prototype.isNode||!1}function ca(e){return e&&!0===e.isFunctionAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function ha(e){return e&&!0===e.isFunctionNode&&!0===e.constructor.prototype.isNode||!1}function la(e){return e&&!0===e.isIndexNode&&!0===e.constructor.prototype.isNode||!1}function pa(e){return e&&!0===e.isNode&&!0===e.constructor.prototype.isNode||!1}function fa(e){return e&&!0===e.isObjectNode&&!0===e.constructor.prototype.isNode||!1}function da(e){return e&&!0===e.isOperatorNode&&!0===e.constructor.prototype.isNode||!1}function ma(e){return e&&!0===e.isParenthesisNode&&!0===e.constructor.prototype.isNode||!1}function ga(e){return e&&!0===e.isRangeNode&&!0===e.constructor.prototype.isNode||!1}function ya(e){return e&&!0===e.isSymbolNode&&!0===e.constructor.prototype.isNode||!1}function va(e){return e&&!0===e.constructor.prototype.isChain||!1}function xa(e){var t=typeof e;return"object"===t?null===e?"null":Array.isArray(e)?"Array":e instanceof Date?"Date":e instanceof RegExp?"RegExp":Lo(e)?"BigNumber":Bo(e)?"Complex":Fo(e)?"Fraction":Vo(e)?"Matrix":Po(e)?"Unit":Go(e)?"Index":Wo(e)?"Range":Zo(e)?"ResultSet":pa(e)?e.type:va(e)?"Chain":Xo(e)?"Help":"Object":"function"===t?"Function":t}function wa(e){var t=typeof e;if("number"===t||"string"===t||"boolean"===t||null==e)return e;if("function"==typeof e.clone)return e.clone();if(Array.isArray(e))return e.map((function(e){return wa(e)}));if(e instanceof Date)return new Date(e.valueOf());if(Lo(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return ba(e,wa)}function ba(e,t){var n={};for(var r in e)Oa(e,r)&&(n[r]=t(e[r]));return n}function _a(e,t){for(var n in t)Oa(t,n)&&(e[n]=t[n]);return e}function Ea(e,t){if(Array.isArray(t))throw new TypeError("Arrays are not supported by deepExtend");for(var n in t)if(Oa(t,n)&&!(n in Object.prototype)&&!(n in Function.prototype))if(t[n]&&t[n].constructor===Object)void 0===e[n]&&(e[n]={}),e[n]&&e[n].constructor===Object?Ea(e[n],t[n]):e[n]=t[n];else{if(Array.isArray(t[n]))throw new TypeError("Arrays are not supported by deepExtend");e[n]=t[n]}return e}function Ma(e,t){var n,r,i;if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++)if(!Ma(e[r],t[r]))return!1;return!0}if("function"==typeof e)return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!Ma(e[n],t[n]))return!1;for(n in t)if(!(n in e)||!Ma(e[n],t[n]))return!1;return!0}return e===t}function Na(e){var t={};return Sa(e,t),t}function Sa(e,t){for(var n in e)if(Oa(e,n)){var r=e[n];"object"==typeof r&&null!==r?Sa(r,t):t[n]=r}}function Ta(e,t,n){var r,i=!0;Object.defineProperty(e,t,{get:function(){return i&&(r=n(),i=!1),r},set:function(e){r=e,i=!1},configurable:!0,enumerable:!0})}function Oa(e,t){return e&&Object.hasOwnProperty.call(e,t)}function Ca(e){return Object.keys(e).map((t=>e[t]))}var Aa=["Matrix","Array"],za=["number","BigNumber","Fraction"];function Ra(e,t){function n(n){if(n){var r=ba(e,wa);Da(n,"matrix",Aa),Da(n,"number",za),Ea(e,n);var i=ba(e,wa),s=ba(n,wa);return t("config",i,r,s),i}return ba(e,wa)}return n.MATRIX_OPTIONS=Aa,n.NUMBER_OPTIONS=za,Object.keys(ko).forEach((t=>{Object.defineProperty(n,t,{get:()=>e[t],enumerable:!0,configurable:!0})})),n}function Da(e,t,n){var r,i;void 0!==e[t]&&(r=n,i=e[t],-1===r.indexOf(i))&&console.warn('Warning: Unknown value "'+e[t]+'" for configuration option "'+t+'". Available options: '+n.map((e=>JSON.stringify(e))).join(", ")+".")}var ka="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ia(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var La=function(){function e(){return!0}function t(){return!1}function n(){}return function r(){var i=[{name:"number",test:function(e){return"number"==typeof e}},{name:"string",test:function(e){return"string"==typeof e}},{name:"boolean",test:function(e){return"boolean"==typeof e}},{name:"Function",test:function(e){return"function"==typeof e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:function(e){return"object"==typeof e&&null!==e&&e.constructor===Object}},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}],s={name:"any",test:e},o=[],a=[],u={types:i,conversions:a,ignore:o};function c(e){var t=H(u.types,(function(t){return t.name===e}));if(t)return t;if("any"===e)return s;var n=H(u.types,(function(t){return t.name.toLowerCase()===e.toLowerCase()}));throw new TypeError('Unknown type "'+e+'"'+(n?'. Did you mean "'+n.name+'"?':""))}function h(e){return e===s?999:u.types.indexOf(e)}function l(e){var t=H(u.types,(function(t){return t.test(e)}));if(t)return t.name;throw new TypeError("Value has unknown type. Value: "+e)}function p(e){return e.map((function(e){var t=e.types.map(b);return(e.restParam?"...":"")+t.join("|")})).join(",")}function f(e,t){var n=0===e.indexOf("..."),r=(n?e.length>3?e.slice(3):"any":e).split("|").map(L).filter(B).filter(I),i=function(e,t){var n={};return e.forEach((function(e){-1!==t.indexOf(e.from)||-1===t.indexOf(e.to)||n[e.from]||(n[e.from]=e)})),Object.keys(n).map((function(e){return n[e]}))}(t,r),s=r.map((function(e){var t=c(e);return{name:e,typeIndex:h(t),test:t.test,conversion:null,conversionIndex:-1}})),o=i.map((function(e){var n=c(e.from);return{name:e.from,typeIndex:h(n),test:n.test,conversion:e,conversionIndex:t.indexOf(e)}}));return{types:s.concat(o),restParam:n}}function d(e,t,n){var r=[];return""!==e.trim()&&(r=e.split(",").map(L).map((function(e,t,r){var i=f(e,n);if(i.restParam&&t!==r.length-1)throw new SyntaxError('Unexpected rest parameter "'+e+'": only allowed for the last parameter');return i}))),r.some(P)?null:{params:r,fn:t}}function m(e){var t=U(e);return!!t&&t.restParam}function g(e){return e.types.some((function(e){return null!=e.conversion}))}function y(t){if(t&&0!==t.types.length){if(1===t.types.length)return c(t.types[0].name).test;if(2===t.types.length){var n=c(t.types[0].name).test,r=c(t.types[1].name).test;return function(e){return n(e)||r(e)}}var i=t.types.map((function(e){return c(e.name).test}));return function(e){for(var t=0;t<i.length;t++)if(i[t](e))return!0;return!1}}return e}function v(e){var t,n,r;if(m(e)){var i=(t=function(e){return e.slice(0,e.length-1)}(e).map(y)).length,s=y(U(e));return function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return function(e){for(var t=i;t<e.length;t++)if(!s(e[t]))return!1;return!0}(e)&&e.length>=i+1}}return 0===e.length?function(e){return 0===e.length}:1===e.length?(n=y(e[0]),function(e){return n(e[0])&&1===e.length}):2===e.length?(n=y(e[0]),r=y(e[1]),function(e){return n(e[0])&&r(e[1])&&2===e.length}):(t=e.map(y),function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return e.length===t.length})}function x(e,t){return t<e.params.length?e.params[t]:m(e.params)?U(e.params):null}function w(e,t,n){var r=x(e,t);return(r?n?r.types.filter(_):r.types:[]).map(b)}function b(e){return e.name}function _(e){return null===e.conversion||void 0===e.conversion}function E(e,t){var n=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return Object.keys(t)}($(e,(function(e){return w(e,t,!1)})));return-1!==n.indexOf("any")?["any"]:n}function M(e,t,n){var r,i,s,o=e||"unnamed",a=n;for(s=0;s<t.length;s++){var u=a.filter((function(e){var n=y(x(e,s));return(s<e.params.length||m(e.params))&&n(t[s])}));if(0===u.length){if((i=E(a,s)).length>0){var c=l(t[s]);return(r=new TypeError("Unexpected type of argument in function "+o+" (expected: "+i.join(" or ")+", actual: "+c+", index: "+s+")")).data={category:"wrongType",fn:o,index:s,actual:c,expected:i},r}}else a=u}var h=a.map((function(e){return m(e.params)?1/0:e.params.length}));if(t.length<Math.min.apply(null,h))return i=E(a,s),(r=new TypeError("Too few arguments in function "+o+" (expected: "+i.join(" or ")+", index: "+t.length+")")).data={category:"tooFewArgs",fn:o,index:t.length,expected:i},r;var p=Math.max.apply(null,h);return t.length>p?((r=new TypeError("Too many arguments in function "+o+" (expected: "+p+", actual: "+t.length+")")).data={category:"tooManyArgs",fn:o,index:t.length,expectedLength:p},r):((r=new TypeError('Arguments of type "'+t.join(", ")+'" do not match any of the defined signatures of function '+o+".")).data={category:"mismatch",actual:t.map(l)},r)}function N(e){for(var t=999,n=0;n<e.types.length;n++)_(e.types[n])&&(t=Math.min(t,e.types[n].typeIndex));return t}function S(e){for(var t=999,n=0;n<e.types.length;n++)_(e.types[n])||(t=Math.min(t,e.types[n].conversionIndex));return t}function T(e,t){var n;return 0!=(n=e.restParam-t.restParam)||0!=(n=g(e)-g(t))||0!=(n=N(e)-N(t))?n:S(e)-S(t)}function O(e,t){var n,r,i=Math.min(e.params.length,t.params.length);if(0!=(r=e.params.some(g)-t.params.some(g)))return r;for(n=0;n<i;n++)if(0!=(r=g(e.params[n])-g(t.params[n])))return r;for(n=0;n<i;n++)if(0!==(r=T(e.params[n],t.params[n])))return r;return e.params.length-t.params.length}function C(e,t){var n=t;if(e.some(g)){var r=m(e),i=e.map(A);n=function(){for(var e=[],n=r?arguments.length-1:arguments.length,s=0;s<n;s++)e[s]=i[s](arguments[s]);return r&&(e[n]=arguments[n].map(i[n])),t.apply(this,e)}}var s=n;if(m(e)){var o=e.length-1;s=function(){return n.apply(this,j(arguments,0,o).concat([j(arguments,o)]))}}return s}function A(e){var t,n,r,i,s=[],o=[];switch(e.types.forEach((function(e){e.conversion&&(s.push(c(e.conversion.from).test),o.push(e.conversion.convert))})),o.length){case 0:return function(e){return e};case 1:return t=s[0],r=o[0],function(e){return t(e)?r(e):e};case 2:return t=s[0],n=s[1],r=o[0],i=o[1],function(e){return t(e)?r(e):n(e)?i(e):e};default:return function(e){for(var t=0;t<o.length;t++)if(s[t](e))return o[t](e);return e}}}function z(e){var t={};return e.forEach((function(e){e.params.some(g)||R(e.params,!0).forEach((function(n){t[p(n)]=e.fn}))})),t}function R(e,t){return function e(n,r,i){if(r<n.length){var s,o=n[r],a=t?o.types.filter(_):o.types;if(o.restParam){var u=a.filter(_);s=u.length<a.length?[u,a]:[a]}else s=a.map((function(e){return[e]}));return $(s,(function(t){return e(n,r+1,i.concat([t]))}))}return[i.map((function(e,t){return{types:e,restParam:t===n.length-1&&m(n)}}))]}(e,0,[])}function D(e,t){for(var n=Math.max(e.params.length,t.params.length),r=0;r<n;r++)if(!q(w(e,r,!0),w(t,r,!0)))return!1;var i=e.params.length,s=t.params.length,o=m(e.params),a=m(t.params);return o?a?i===s:s>=i:a?i>=s:i===s}function k(e,r){if(0===Object.keys(r).length)throw new SyntaxError("No signatures provided");var i=[];Object.keys(r).map((function(e){return d(e,r[e],u.conversions)})).filter(F).forEach((function(e){var t=H(i,(function(t){return D(t,e)}));if(t)throw new TypeError('Conflicting signatures "'+p(t.params)+'" and "'+p(e.params)+'".');i.push(e)}));var s=$(i,(function(e){return(e?R(e.params,!1):[]).map((function(t){return{params:t,fn:e.fn}}))})).filter(F);s.sort(O);var o=s[0]&&s[0].params.length<=2&&!m(s[0].params),a=s[1]&&s[1].params.length<=2&&!m(s[1].params),c=s[2]&&s[2].params.length<=2&&!m(s[2].params),h=s[3]&&s[3].params.length<=2&&!m(s[3].params),l=s[4]&&s[4].params.length<=2&&!m(s[4].params),f=s[5]&&s[5].params.length<=2&&!m(s[5].params),g=o&&a&&c&&h&&l&&f,x=s.map((function(e){return v(e.params)})),w=o?y(s[0].params[0]):t,b=a?y(s[1].params[0]):t,_=c?y(s[2].params[0]):t,E=h?y(s[3].params[0]):t,N=l?y(s[4].params[0]):t,S=f?y(s[5].params[0]):t,T=o?y(s[0].params[1]):t,A=a?y(s[1].params[1]):t,k=c?y(s[2].params[1]):t,I=h?y(s[3].params[1]):t,L=l?y(s[4].params[1]):t,B=f?y(s[5].params[1]):t,P=s.map((function(e){return C(e.params,e.fn)})),U=o?P[0]:n,j=a?P[1]:n,V=c?P[2]:n,q=h?P[3]:n,W=l?P[4]:n,G=f?P[5]:n,Y=o?s[0].params.length:-1,Z=a?s[1].params.length:-1,X=c?s[2].params.length:-1,J=h?s[3].params.length:-1,Q=l?s[4].params.length:-1,K=f?s[5].params.length:-1,ee=g?6:0,te=s.length,ne=function(){for(var t=ee;t<te;t++)if(x[t](arguments))return P[t].apply(this,arguments);throw M(e,arguments,s)},re=function e(t,n){return arguments.length===Y&&w(t)&&T(n)?U.apply(e,arguments):arguments.length===Z&&b(t)&&A(n)?j.apply(e,arguments):arguments.length===X&&_(t)&&k(n)?V.apply(e,arguments):arguments.length===J&&E(t)&&I(n)?q.apply(e,arguments):arguments.length===Q&&N(t)&&L(n)?W.apply(e,arguments):arguments.length===K&&S(t)&&B(n)?G.apply(e,arguments):ne.apply(e,arguments)};try{Object.defineProperty(re,"name",{value:e})}catch(e){}return re.signatures=z(s),re}function I(e){return-1===u.ignore.indexOf(e)}function L(e){return e.trim()}function B(e){return!!e}function F(e){return null!==e}function P(e){return 0===e.types.length}function U(e){return e[e.length-1]}function j(e,t,n){return Array.prototype.slice.call(e,t,n)}function V(e,t){return-1!==e.indexOf(t)}function q(e,t){for(var n=0;n<e.length;n++)if(V(t,e[n]))return!0;return!1}function H(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function $(e,t){return Array.prototype.concat.apply([],e.map(t))}function W(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(("object"==typeof r.signatures||"string"==typeof r.signature)&&""!==r.name)if(""===t)t=r.name;else if(t!==r.name){var i=new Error("Function names do not match (expected: "+t+", actual: "+r.name+")");throw i.data={actual:r.name,expected:t},i}}return t}function G(e){var t,n={};function r(e,r){if(n.hasOwnProperty(e)&&r!==n[e])throw(t=new Error('Signature "'+e+'" is defined twice')).data={signature:e},t}for(var i=0;i<e.length;i++){var s=e[i];if("object"==typeof s.signatures)for(var o in s.signatures)s.signatures.hasOwnProperty(o)&&(r(o,s.signatures[o]),n[o]=s.signatures[o]);else{if("string"!=typeof s.signature)throw(t=new TypeError("Function is no typed-function (index: "+i+")")).data={index:i},t;r(s.signature,s),n[s.signature]=s}}return n}return(u=k("typed",{"string, Object":k,Object:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return k(W(t),e)},"...Function":function(e){return k(W(e),G(e))},"string, ...Function":function(e,t){return k(e,G(t))}})).create=r,u.types=i,u.conversions=a,u.ignore=o,u.convert=function(e,t){var n=l(e);if(t===n)return e;for(var r=0;r<u.conversions.length;r++){var i=u.conversions[r];if(i.from===n&&i.to===t)return i.convert(e)}throw new Error("Cannot convert from "+n+" to "+t)},u.find=function(e,t){if(!e.signatures)throw new TypeError("Function is no typed-function");var n;if("string"==typeof t){n=t.split(",");for(var r=0;r<n.length;r++)n[r]=n[r].trim()}else{if(!Array.isArray(t))throw new TypeError("String array or a comma separated string expected");n=t}var i=n.join(","),s=e.signatures[i];if(s)return s;throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+n.join(", ")+"))")},u.addType=function(e,t){if(!e||"string"!=typeof e.name||"function"!=typeof e.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==t)for(var n=0;n<u.types.length;n++)if("Object"===u.types[n].name)return void u.types.splice(n,0,e);u.types.push(e)},u.addConversion=function(e){if(!e||"string"!=typeof e.from||"string"!=typeof e.to||"function"!=typeof e.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");u.conversions.push(e)},u}()}();function Ba(e){return"boolean"==typeof e||!!isFinite(e)&&e===Math.round(e)}var Fa=Math.sign||function(e){return e>0?1:e<0?-1:0};function Pa(e,t){if("function"==typeof t)return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var n,r="auto";switch(t&&(t.notation&&(r=t.notation),Io(t)?n=t:Io(t.precision)&&(n=t.precision)),r){case"fixed":return ja(e,n);case"exponential":return Va(e,n);case"engineering":return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=qa(Ua(e),t),r=n.exponent,i=n.coefficients,s=r%3==0?r:r<0?r-3-r%3:r-r%3;if(Io(t))for(;t>i.length||r-s+1>i.length;)i.push(0);else for(var o=Math.abs(r-s)-(i.length-1),a=0;a<o;a++)i.push(0);for(var u=Math.abs(r-s),c=1;u>0;)c++,u--;var h=i.slice(c).join(""),l=Io(t)&&h.length||h.match(/[1-9]/)?"."+h:"",p=i.slice(0,c).join("")+l+"e"+(r>=0?"+":"")+s.toString();return n.sign+p}(e,n);case"auto":return function(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=n&&void 0!==n.lowerExp?n.lowerExp:-3,i=n&&void 0!==n.upperExp?n.upperExp:5,s=Ua(e),o=t?qa(s,t):s;if(o.exponent<r||o.exponent>=i)return Va(e,t);var a=o.coefficients,u=o.exponent;a.length<t&&(a=a.concat(Ha(t-a.length))),a=a.concat(Ha(u-a.length+1+(a.length<t?t-a.length:0)));var c=u>0?u:0;return c<(a=Ha(-u).concat(a)).length-1&&a.splice(c+1,0,"."),o.sign+a.join("")}(e,n,t&&t).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", or "fixed".')}}function Ua(e){var t=String(e).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),s=r.indexOf(".");i+=-1!==s?s-1:r.length-1;var o=r.replace(".","").replace(/^0*/,(function(e){return i-=e.length,""})).replace(/0*$/,"").split("").map((function(e){return parseInt(e)}));return 0===o.length&&(o.push(0),i++),{sign:n,coefficients:o,exponent:i}}function ja(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=Ua(e),r="number"==typeof t?qa(n,n.exponent+1+t):n,i=r.coefficients,s=r.exponent+1,o=s+(t||0);return i.length<o&&(i=i.concat(Ha(o-i.length))),s<0&&(i=Ha(1-s).concat(i),s=1),s<i.length&&i.splice(s,0,0===s?"0.":"."),r.sign+i.join("")}function Va(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=Ua(e),r=t?qa(n,t):n,i=r.coefficients,s=r.exponent;i.length<t&&(i=i.concat(Ha(t-i.length)));var o=i.shift();return r.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function qa(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t&&r.splice(t,r.length-t)[0]>=5){var i=t-1;for(r[i]++;10===r[i];)r.pop(),0===i&&(r.unshift(0),n.exponent++,i++),r[--i]++}return n}function Ha(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}var $a=Number.EPSILON||2220446049250313e-31;function Wa(e,t,n){if(null==n)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var r=Math.abs(e-t);return r<$a||r<=Math.max(Math.abs(e),Math.abs(t))*n}return!1}function Ga(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential()}function Ya(e,t){var n=e.length-t.length,r=e.length;return e.substring(n,r)===t}function Za(e,t){return"number"==typeof e?Pa(e,t):Lo(e)?function(e,t){if("function"==typeof t)return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var n,r="auto";switch(void 0!==t&&(t.notation&&(r=t.notation),"number"==typeof t?n=t:t.precision&&(n=t.precision)),r){case"fixed":return function(e,t){return e.toFixed(t)}(e,n);case"exponential":return Ga(e,n);case"engineering":return function(e,t){var n=e.e,r=n%3==0?n:n<0?n-3-n%3:n-n%3,i=e.mul(Math.pow(10,-r)),s=i.toPrecision(t);return-1!==s.indexOf("e")&&(s=i.toString()),s+"e"+(n>=0?"+":"")+r.toString()}(e,n);case"auto":var i=t&&void 0!==t.lowerExp?t.lowerExp:-3,s=t&&void 0!==t.upperExp?t.upperExp:5;if(e.isZero())return"0";var o=e.toSignificantDigits(n),a=o.e;return(a>=i&&a<s?o.toFixed():Ga(e,n)).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", or "fixed".')}}(e,t):function(e){return e&&"object"==typeof e&&"number"==typeof e.s&&"number"==typeof e.n&&"number"==typeof e.d||!1}(e)?t&&"decimal"===t.fraction?e.toString():e.s*e.n+"/"+e.d:Array.isArray(e)?Qa(e,t):Uo(e)?'"'+e+'"':"function"==typeof e?e.syntax?String(e.syntax):"function":e&&"object"==typeof e?"function"==typeof e.format?e.format(t):e&&e.toString(t)!=={}.toString()?e.toString(t):"{"+Object.keys(e).map((n=>'"'+n+'": '+Za(e[n],t))).join(", ")+"}":String(e)}function Xa(e){for(var t=String(e),n="",r=0;r<t.length;){var i=t.charAt(r);"\\"===i?(n+=i,r++,""!==(i=t.charAt(r))&&-1!=='"\\/bfnrtu'.indexOf(i)||(n+="\\"),n+=i):n+='"'===i?'\\"':i,r++}return'"'+n+'"'}function Ja(e){var t=String(e);return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Qa(e,t){if(Array.isArray(e)){for(var n="[",r=e.length,i=0;i<r;i++)0!==i&&(n+=", "),n+=Qa(e[i],t);return n+"]"}return Za(e,t)}function Ka(e,t,n){if(!(this instanceof Ka))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=(new Error).stack}function eu(e,t,n){if(!(this instanceof eu))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}function tu(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function nu(e,t,n){var r,i=e.length;if(i!==t[n])throw new Ka(i,t[n]);if(n<t.length-1){var s=n+1;for(r=0;r<i;r++){var o=e[r];if(!Array.isArray(o))throw new Ka(t.length-1,t.length,"<");nu(e[r],t,s)}}else for(r=0;r<i;r++)if(Array.isArray(e[r]))throw new Ka(t.length+1,t.length,">")}function ru(e,t){if(0===t.length){if(Array.isArray(e))throw new Ka(e.length,0)}else nu(e,t,0)}function iu(e,t){if(!Io(e)||!Ba(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||"number"==typeof t&&e>=t)throw new eu(e,t)}function su(e,t,n){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Error("Resizing to scalar is not supported");return t.forEach((function(e){if(!Io(e)||!Ba(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Za(t)+")")})),ou(e,t,0,void 0!==n?n:0),e}function ou(e,t,n,r){var i,s,o=e.length,a=t[n],u=Math.min(o,a);if(e.length=a,n<t.length-1){var c=n+1;for(i=0;i<u;i++)s=e[i],Array.isArray(s)||(s=[s],e[i]=s),ou(s,t,c,r);for(i=u;i<a;i++)s=[],e[i]=s,ou(s,t,c,r)}else{for(i=0;i<u;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=u;i<a;i++)e[i]=r}}function au(e,t,n,r){var i=r||tu(e);if(n)for(var s=0;s<n;s++)e=[e],i.unshift(1);for(e=uu(e,t,0);i.length<t;)i.push(1);return e}function uu(e,t,n){var r,i;if(Array.isArray(e)){var s=n+1;for(r=0,i=e.length;r<i;r++)e[r]=uu(e[r],t,s)}else for(var o=n;o<t;o++)e=[e];return e}function cu(e,t){return Array.prototype.map.call(e,t)}function hu(e,t){Array.prototype.forEach.call(e,t)}function lu(e,t){return Array.prototype.join.call(e,t)}function pu(e,t){for(var n,r=0,i=0;i<e.length;i++){var s=e[i],o=Array.isArray(s);if(0===i&&o&&(r=s.length),o&&s.length!==r)return;var a=o?pu(s,t):t(s);if(void 0===n)n=a;else if(n!==a)return"mixed"}return n}function fu(e,t){return-1!==e.indexOf(t)}function du(e,t,n,r){function i(r){var i=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],s=e[i];void 0!==s&&(n[i]=s)}return n}(r,t.map(gu));return function(e,t,n){if(!t.filter((e=>!function(e){return e&&"?"===e[0]}(e))).every((e=>void 0!==n[e]))){var r=t.filter((e=>void 0===n[e]));throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(r.map((e=>'"'.concat(e,'"'))).join(", "),"."))}}(e,t,r),n(i)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),r&&(i.meta=r),i}function mu(e){return"function"==typeof e&&"string"==typeof e.fn&&Array.isArray(e.dependencies)}function gu(e){return e&&"?"===e[0]?e.slice(1):e}Ka.prototype=new RangeError,Ka.prototype.constructor=RangeError,Ka.prototype.name="DimensionError",Ka.prototype.isDimensionError=!0,eu.prototype=new RangeError,eu.prototype.constructor=RangeError,eu.prototype.name="IndexError",eu.prototype.isIndexError=!0;var yu=function(){return yu=La.create,La},vu=du("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],(function(e){var{BigNumber:t,Complex:n,DenseMatrix:r,Fraction:i}=e,s=yu();return s.types=[{name:"number",test:Io},{name:"Complex",test:Bo},{name:"BigNumber",test:Lo},{name:"Fraction",test:Fo},{name:"Unit",test:Po},{name:"string",test:Uo},{name:"Chain",test:va},{name:"Array",test:jo},{name:"Matrix",test:Vo},{name:"DenseMatrix",test:Ho},{name:"SparseMatrix",test:$o},{name:"Range",test:Wo},{name:"Index",test:Go},{name:"boolean",test:Yo},{name:"ResultSet",test:Zo},{name:"Help",test:Xo},{name:"function",test:Jo},{name:"Date",test:Qo},{name:"RegExp",test:Ko},{name:"null",test:ta},{name:"undefined",test:na},{name:"AccessorNode",test:ra},{name:"ArrayNode",test:ia},{name:"AssignmentNode",test:sa},{name:"BlockNode",test:oa},{name:"ConditionalNode",test:aa},{name:"ConstantNode",test:ua},{name:"FunctionNode",test:ha},{name:"FunctionAssignmentNode",test:ca},{name:"IndexNode",test:la},{name:"Node",test:pa},{name:"ObjectNode",test:fa},{name:"OperatorNode",test:da},{name:"ParenthesisNode",test:ma},{name:"RangeNode",test:ga},{name:"SymbolNode",test:ya},{name:"Object",test:ea}],s.conversions=[{from:"number",to:"BigNumber",convert:function(e){if(t||xu(e),e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t(e)}},{from:"number",to:"Complex",convert:function(e){return n||wu(e),new n(e,0)}},{from:"number",to:"string",convert:function(e){return e+""}},{from:"BigNumber",to:"Complex",convert:function(e){return n||wu(e),new n(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(e){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return n||wu(e),new n(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){i||bu(e);var t=new i(e);if(t.valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return t}},{from:"string",to:"number",convert:function(e){var t=Number(e);if(isNaN(t))throw new Error('Cannot convert "'+e+'" to a number');return t}},{from:"string",to:"BigNumber",convert:function(e){t||xu(e);try{return new t(e)}catch(t){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(e){i||bu(e);try{return new i(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){n||wu(e);try{return new n(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(e){return+e}},{from:"boolean",to:"BigNumber",convert:function(e){return t||xu(e),new t(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return i||bu(e),new i(+e)}},{from:"boolean",to:"string",convert:function(e){return String(e)}},{from:"Array",to:"Matrix",convert:function(e){return r||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new r(e)}},{from:"Matrix",to:"Array",convert:function(e){return e.valueOf()}}],s}));function xu(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function wu(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function bu(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}var _u,Eu,Mu=du("ResultSet",[],(()=>{function e(t){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this.entries=t||[]}return e.prototype.type="ResultSet",e.prototype.isResultSet=!0,e.prototype.valueOf=function(){return this.entries},e.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},e.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},e.fromJSON=function(t){return new e(t.entries)},e}),{isClass:!0}),Nu=9e15,Su="0123456789abcdef",Tu="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Ou="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Cu={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Nu,maxE:Nu,crypto:!1},Au=!0,zu="[DecimalError] Invalid argument: ",Ru=Math.floor,Du=Math.pow,ku=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Iu=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Lu=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Bu=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Fu=1e7,Pu=Tu.length-1,Uu=Ou.length-1,ju={name:"[object Decimal]"};function Vu(e){var t,n,r,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(s+=Ku(n)),s+=r;(n=7-(r=(o=e[t])+"").length)&&(s+=Ku(n))}else if(0===o)return"0";for(;o%10==0;)o/=10;return s+o}function qu(e,t,n){if(e!==~~e||e<t||e>n)throw Error(zu+e)}function Hu(e,t,n,r){var i,s,o,a;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),s=Du(10,7-t),a=e[i]%s|0,null==r?t<3?(0==t?a=a/100|0:1==t&&(a=a/10|0),o=n<4&&99999==a||n>3&&49999==a||5e4==a||0==a):o=(n<4&&a+1==s||n>3&&a+1==s/2)&&(e[i+1]/s/100|0)==Du(10,t-2)-1||(a==s/2||0==a)&&0==(e[i+1]/s/100|0):t<4?(0==t?a=a/1e3|0:1==t?a=a/100|0:2==t&&(a=a/10|0),o=(r||n<4)&&9999==a||!r&&n>3&&4999==a):o=((r||n<4)&&a+1==s||!r&&n>3&&a+1==s/2)&&(e[i+1]/s/1e3|0)==Du(10,t-3)-1,o}function $u(e,t,n){for(var r,i,s=[0],o=0,a=e.length;o<a;){for(i=s.length;i--;)s[i]*=t;for(s[0]+=Su.indexOf(e.charAt(o++)),r=0;r<s.length;r++)s[r]>n-1&&(void 0===s[r+1]&&(s[r+1]=0),s[r+1]+=s[r]/n|0,s[r]%=n)}return s.reverse()}ju.absoluteValue=ju.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),Gu(e)},ju.ceil=function(){return Gu(new this.constructor(this),this.e+1,2)},ju.comparedTo=ju.cmp=function(e){var t,n,r,i,s=this,o=s.d,a=(e=new s.constructor(e)).d,u=s.s,c=e.s;if(!o||!a)return u&&c?u!==c?u:o===a?0:!o^u<0?1:-1:NaN;if(!o[0]||!a[0])return o[0]?u:a[0]?-c:0;if(u!==c)return u;if(s.e!==e.e)return s.e>e.e^u<0?1:-1;for(t=0,n=(r=o.length)<(i=a.length)?r:i;t<n;++t)if(o[t]!==a[t])return o[t]>a[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1},ju.cosine=ju.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,i=t.d.length;i<32?r=(1/uc(4,n=Math.ceil(i/3))).toString():(n=16,r="2.3283064365386962890625e-10"),e.precision+=n,t=ac(e,1,t.times(r),new e(1));for(var s=n;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}(r,cc(r,n)),r.precision=e,r.rounding=t,Gu(2==Eu||3==Eu?n.neg():n,e,t,!0)):new r(1):new r(NaN)},ju.cubeRoot=ju.cbrt=function(){var e,t,n,r,i,s,o,a,u,c,h=this,l=h.constructor;if(!h.isFinite()||h.isZero())return new l(h);for(Au=!1,(s=h.s*Du(h.s*h,1/3))&&Math.abs(s)!=1/0?r=new l(s.toString()):(n=Vu(h.d),(s=((e=h.e)-n.length+1)%3)&&(n+=1==s||-2==s?"0":"00"),s=Du(n,1/3),e=Ru((e+1)/3)-(e%3==(e<0?-1:2)),(r=new l(n=s==1/0?"5e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=h.s),o=(e=l.precision)+3;;)if(c=(u=(a=r).times(a).times(a)).plus(h),r=Wu(c.plus(h).times(a),c.plus(u),o+2,1),Vu(a.d).slice(0,o)===(n=Vu(r.d)).slice(0,o)){if("9999"!=(n=n.slice(o-3,o+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(Gu(r,e+1,1),t=!r.times(r).times(r).eq(h));break}if(!i&&(Gu(a,e+1,0),a.times(a).times(a).eq(h))){r=a;break}o+=4,i=1}return Au=!0,Gu(r,e,l.rounding,t)},ju.decimalPlaces=ju.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-Ru(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},ju.dividedBy=ju.div=function(e){return Wu(this,new this.constructor(e))},ju.dividedToIntegerBy=ju.divToInt=function(e){var t=this.constructor;return Gu(Wu(this,new t(e),0,1,1),t.precision,t.rounding)},ju.equals=ju.eq=function(e){return 0===this.cmp(e)},ju.floor=function(){return Gu(new this.constructor(this),this.e+1,3)},ju.greaterThan=ju.gt=function(e){return this.cmp(e)>0},ju.greaterThanOrEqualTo=ju.gte=function(e){var t=this.cmp(e);return 1==t||0===t},ju.hyperbolicCosine=ju.cosh=function(){var e,t,n,r,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;n=o.precision,r=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,(i=s.d.length)<32?t=(1/uc(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),s=ac(o,1,s.times(t),new o(1),!0);for(var u,c=e,h=new o(8);c--;)u=s.times(s),s=a.minus(u.times(h.minus(u.times(h))));return Gu(s,o.precision=n,o.rounding=r,!0)},ju.hyperbolicSine=ju.sinh=function(){var e,t,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(i.e,i.sd())+4,s.rounding=1,(r=i.d.length)<3)i=ac(s,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=ac(s,2,i=i.times(1/uc(5,e)),i,!0);for(var o,a=new s(5),u=new s(16),c=new s(20);e--;)o=i.times(i),i=i.times(a.plus(o.times(u.times(o).plus(c))))}return s.precision=t,s.rounding=n,Gu(i,t,n,!0)},ju.hyperbolicTangent=ju.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,Wu(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},ju.inverseCosine=ju.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,s=n.rounding;return-1!==r?0===r?t.isNeg()?Ju(n,i,s):new n(0):new n(NaN):t.isZero()?Ju(n,i+4,s).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=Ju(n,i+4,s).times(.5),n.precision=i,n.rounding=s,e.minus(t))},ju.inverseHyperbolicCosine=ju.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Au=!1,n=n.times(n).minus(1).sqrt().plus(n),Au=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},ju.inverseHyperbolicSine=ju.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Au=!1,n=n.times(n).plus(1).sqrt().plus(n),Au=!0,r.precision=e,r.rounding=t,n.ln())},ju.inverseHyperbolicTangent=ju.atanh=function(){var e,t,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?Gu(new s(i),e,t,!0):(s.precision=n=r-i.e,i=Wu(i.plus(1),new s(1).minus(i),n+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)},ju.inverseSine=ju.asin=function(){var e,t,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),n=s.precision,r=s.rounding,-1!==t?0===t?((e=Ju(s,n+4,r).times(.5)).s=i.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))},ju.inverseTangent=ju.atan=function(){var e,t,n,r,i,s,o,a,u,c=this,h=c.constructor,l=h.precision,p=h.rounding;if(c.isFinite()){if(c.isZero())return new h(c);if(c.abs().eq(1)&&l+4<=Uu)return(o=Ju(h,l+4,p).times(.25)).s=c.s,o}else{if(!c.s)return new h(NaN);if(l+4<=Uu)return(o=Ju(h,l+4,p).times(.5)).s=c.s,o}for(h.precision=a=l+10,h.rounding=1,e=n=Math.min(28,a/7+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(Au=!1,t=Math.ceil(a/7),r=1,u=c.times(c),o=new h(c),i=c;-1!==e;)if(i=i.times(u),s=o.minus(i.div(r+=2)),i=i.times(u),void 0!==(o=s.plus(i.div(r+=2))).d[t])for(e=t;o.d[e]===s.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),Au=!0,Gu(o,h.precision=l,h.rounding=p,!0)},ju.isFinite=function(){return!!this.d},ju.isInteger=ju.isInt=function(){return!!this.d&&Ru(this.e/7)>this.d.length-2},ju.isNaN=function(){return!this.s},ju.isNegative=ju.isNeg=function(){return this.s<0},ju.isPositive=ju.isPos=function(){return this.s>0},ju.isZero=function(){return!!this.d&&0===this.d[0]},ju.lessThan=ju.lt=function(e){return this.cmp(e)<0},ju.lessThanOrEqualTo=ju.lte=function(e){return this.cmp(e)<1},ju.logarithm=ju.log=function(e){var t,n,r,i,s,o,a,u,c=this,h=c.constructor,l=h.precision,p=h.rounding;if(null==e)e=new h(10),t=!0;else{if(n=(e=new h(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new h(NaN);t=e.eq(10)}if(n=c.d,c.s<0||!n||!n[0]||c.eq(1))return new h(n&&!n[0]?-1/0:1!=c.s?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(i=n[0];i%10==0;)i/=10;s=1!==i}if(Au=!1,o=ic(c,a=l+5),r=t?Xu(h,a+10):ic(e,a),Hu((u=Wu(o,r,a,1)).d,i=l,p))do{if(o=ic(c,a+=10),r=t?Xu(h,a+10):ic(e,a),u=Wu(o,r,a,1),!s){+Vu(u.d).slice(i+1,i+15)+1==1e14&&(u=Gu(u,l+1,0));break}}while(Hu(u.d,i+=10,p));return Au=!0,Gu(u,l,p)},ju.minus=ju.sub=function(e){var t,n,r,i,s,o,a,u,c,h,l,p,f=this,d=f.constructor;if(e=new d(e),!f.d||!e.d)return f.s&&e.s?f.d?e.s=-e.s:e=new d(e.d||f.s!==e.s?f:NaN):e=new d(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.plus(e);if(c=f.d,p=e.d,a=d.precision,u=d.rounding,!c[0]||!p[0]){if(p[0])e.s=-e.s;else{if(!c[0])return new d(3===u?-0:0);e=new d(f)}return Au?Gu(e,a,u):e}if(n=Ru(e.e/7),h=Ru(f.e/7),c=c.slice(),s=h-n){for((l=s<0)?(t=c,s=-s,o=p.length):(t=p,n=h,o=c.length),s>(r=Math.max(Math.ceil(a/7),o)+2)&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for((l=(r=c.length)<(o=p.length))&&(o=r),r=0;r<o;r++)if(c[r]!=p[r]){l=c[r]<p[r];break}s=0}for(l&&(t=c,c=p,p=t,e.s=-e.s),o=c.length,r=p.length-o;r>0;--r)c[o++]=0;for(r=p.length;r>s;){if(c[--r]<p[r]){for(i=r;i&&0===c[--i];)c[i]=Fu-1;--c[i],c[r]+=Fu}c[r]-=p[r]}for(;0===c[--o];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(e.d=c,e.e=Zu(c,n),Au?Gu(e,a,u):e):new d(3===u?-0:0)},ju.modulo=ju.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?Gu(new r(n),r.precision,r.rounding):(Au=!1,9==r.modulo?(t=Wu(n,e.abs(),0,3,1)).s*=e.s:t=Wu(n,e,0,r.modulo,1),t=t.times(e),Au=!0,n.minus(t))},ju.naturalExponential=ju.exp=function(){return rc(this)},ju.naturalLogarithm=ju.ln=function(){return ic(this)},ju.negated=ju.neg=function(){var e=new this.constructor(this);return e.s=-e.s,Gu(e)},ju.plus=ju.add=function(e){var t,n,r,i,s,o,a,u,c,h,l=this,p=l.constructor;if(e=new p(e),!l.d||!e.d)return l.s&&e.s?l.d||(e=new p(e.d||l.s===e.s?l:NaN)):e=new p(NaN),e;if(l.s!=e.s)return e.s=-e.s,l.minus(e);if(c=l.d,h=e.d,a=p.precision,u=p.rounding,!c[0]||!h[0])return h[0]||(e=new p(l)),Au?Gu(e,a,u):e;if(s=Ru(l.e/7),r=Ru(e.e/7),c=c.slice(),i=s-r){for(i<0?(n=c,i=-i,o=h.length):(n=h,r=s,o=c.length),i>(o=(s=Math.ceil(a/7))>o?s+1:o+1)&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((o=c.length)-(i=h.length)<0&&(i=o,n=h,h=c,c=n),t=0;i;)t=(c[--i]=c[i]+h[i]+t)/Fu|0,c[i]%=Fu;for(t&&(c.unshift(t),++r),o=c.length;0==c[--o];)c.pop();return e.d=c,e.e=Zu(c,r),Au?Gu(e,a,u):e},ju.precision=ju.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(zu+e);return n.d?(t=Qu(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},ju.round=function(){var e=this,t=e.constructor;return Gu(new t(e),e.e+1,t.rounding)},ju.sine=ju.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return ac(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=ac(e,2,t=t.times(1/uc(5,n)),t);for(var i,s=new e(5),o=new e(16),a=new e(20);n--;)i=t.times(t),t=t.times(s.plus(i.times(o.times(i).minus(a))));return t}(r,cc(r,n)),r.precision=e,r.rounding=t,Gu(Eu>2?n.neg():n,e,t,!0)):new r(NaN)},ju.squareRoot=ju.sqrt=function(){var e,t,n,r,i,s,o=this,a=o.d,u=o.e,c=o.s,h=o.constructor;if(1!==c||!a||!a[0])return new h(!c||c<0&&(!a||a[0])?NaN:a?o:1/0);for(Au=!1,0==(c=Math.sqrt(+o))||c==1/0?(((t=Vu(a)).length+u)%2==0&&(t+="0"),c=Math.sqrt(t),u=Ru((u+1)/2)-(u<0||u%2),r=new h(t=c==1/0?"5e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new h(c.toString()),n=(u=h.precision)+3;;)if(r=(s=r).plus(Wu(o,s,n+2,1)).times(.5),Vu(s.d).slice(0,n)===(t=Vu(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(Gu(r,u+1,1),e=!r.times(r).eq(o));break}if(!i&&(Gu(s,u+1,0),s.times(s).eq(o))){r=s;break}n+=4,i=1}return Au=!0,Gu(r,u,h.rounding,e)},ju.tangent=ju.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=Wu(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,Gu(2==Eu||4==Eu?n.neg():n,e,t,!0)):new r(NaN)},ju.times=ju.mul=function(e){var t,n,r,i,s,o,a,u,c,h=this,l=h.constructor,p=h.d,f=(e=new l(e)).d;if(e.s*=h.s,!(p&&p[0]&&f&&f[0]))return new l(!e.s||p&&!p[0]&&!f||f&&!f[0]&&!p?NaN:p&&f?0*e.s:e.s/0);for(n=Ru(h.e/7)+Ru(e.e/7),(u=p.length)<(c=f.length)&&(s=p,p=f,f=s,o=u,u=c,c=o),s=[],r=o=u+c;r--;)s.push(0);for(r=c;--r>=0;){for(t=0,i=u+r;i>r;)a=s[i]+f[r]*p[i-r-1]+t,s[i--]=a%Fu|0,t=a/Fu|0;s[i]=(s[i]+t)%Fu|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=Zu(s,n),Au?Gu(e,l.precision,l.rounding):e},ju.toBinary=function(e,t){return hc(this,2,e,t)},ju.toDecimalPlaces=ju.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(qu(e,0,1e9),void 0===t?t=r.rounding:qu(t,0,8),Gu(n,e+n.e+1,t))},ju.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=Yu(r,!0):(qu(e,0,1e9),void 0===t?t=i.rounding:qu(t,0,8),n=Yu(r=Gu(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},ju.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return void 0===e?n=Yu(i):(qu(e,0,1e9),void 0===t?t=s.rounding:qu(t,0,8),n=Yu(r=Gu(new s(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},ju.toFraction=function(e){var t,n,r,i,s,o,a,u,c,h,l,p,f=this,d=f.d,m=f.constructor;if(!d)return new m(f);if(c=n=new m(1),r=u=new m(0),o=(s=(t=new m(r)).e=Qu(d)-f.e-1)%7,t.d[0]=Du(10,o<0?7+o:o),null==e)e=s>0?t:c;else{if(!(a=new m(e)).isInt()||a.lt(c))throw Error(zu+a);e=a.gt(t)?s>0?t:c:a}for(Au=!1,a=new m(Vu(d)),h=m.precision,m.precision=s=7*d.length*2;l=Wu(a,t,0,1,1),1!=(i=n.plus(l.times(r))).cmp(e);)n=r,r=i,i=c,c=u.plus(l.times(i)),u=i,i=t,t=a.minus(l.times(i)),a=i;return i=Wu(e.minus(n),r,0,1,1),u=u.plus(i.times(c)),n=n.plus(i.times(r)),u.s=c.s=f.s,p=Wu(c,r,s,1).minus(f).abs().cmp(Wu(u,n,s,1).minus(f).abs())<1?[c,r]:[u,n],m.precision=h,Au=!0,p},ju.toHexadecimal=ju.toHex=function(e,t){return hc(this,16,e,t)},ju.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:qu(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Au=!1,n=Wu(n,e,0,t,1).times(e),Au=!0,Gu(n)):(e.s=n.s,n=e),n},ju.toNumber=function(){return+this},ju.toOctal=function(e,t){return hc(this,8,e,t)},ju.toPower=ju.pow=function(e){var t,n,r,i,s,o,a=this,u=a.constructor,c=+(e=new u(e));if(!(a.d&&e.d&&a.d[0]&&e.d[0]))return new u(Du(+a,c));if((a=new u(a)).eq(1))return a;if(r=u.precision,s=u.rounding,e.eq(1))return Gu(a,r,s);if((t=Ru(e.e/7))>=e.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return i=ec(u,a,n,r),e.s<0?new u(1).div(i):Gu(i,r,s);if((o=a.s)<0){if(t<e.d.length-1)return new u(NaN);if(0==(1&e.d[t])&&(o=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=o,a}return(t=0!=(n=Du(+a,c))&&isFinite(n)?new u(n+"").e:Ru(c*(Math.log("0."+Vu(a.d))/Math.LN10+a.e+1)))>u.maxE+1||t<u.minE-1?new u(t>0?o/0:0):(Au=!1,u.rounding=a.s=1,n=Math.min(12,(t+"").length),(i=rc(e.times(ic(a,r+n)),r)).d&&Hu((i=Gu(i,r+5,1)).d,r,s)&&(t=r+10,+Vu((i=Gu(rc(e.times(ic(a,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=Gu(i,r+1,0))),i.s=o,Au=!0,u.rounding=s,Gu(i,r,s))},ju.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=Yu(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(qu(e,1,1e9),void 0===t?t=i.rounding:qu(t,0,8),n=Yu(r=Gu(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},ju.toSignificantDigits=ju.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(qu(e,1,1e9),void 0===t?t=n.rounding:qu(t,0,8)),Gu(new n(this),e,t)},ju.toString=function(){var e=this,t=e.constructor,n=Yu(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},ju.truncated=ju.trunc=function(){return Gu(new this.constructor(this),this.e+1,1)},ju.valueOf=ju.toJSON=function(){var e=this,t=e.constructor,n=Yu(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var Wu=function(){function e(e,t,n){var r,i=0,s=e.length;for(e=e.slice();s--;)r=e[s]*t+i,e[s]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,s;if(n!=r)s=n>r?1:-1;else for(i=s=0;i<n;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,s,o,a,u){var c,h,l,p,f,d,m,g,y,v,x,w,b,_,E,M,N,S,T,O,C=r.constructor,A=r.s==i.s?1:-1,z=r.d,R=i.d;if(!(z&&z[0]&&R&&R[0]))return new C(r.s&&i.s&&(z?!R||z[0]!=R[0]:R)?z&&0==z[0]||!R?0*A:A/0:NaN);for(u?(f=1,h=r.e-i.e):(u=Fu,f=7,h=Ru(r.e/f)-Ru(i.e/f)),T=R.length,N=z.length,v=(y=new C(A)).d=[],l=0;R[l]==(z[l]||0);l++);if(R[l]>(z[l]||0)&&h--,null==s?(_=s=C.precision,o=C.rounding):_=a?s+(r.e-i.e)+1:s,_<0)v.push(1),d=!0;else{if(_=_/f+2|0,l=0,1==T){for(p=0,R=R[0],_++;(l<N||p)&&_--;l++)E=p*u+(z[l]||0),v[l]=E/R|0,p=E%R|0;d=p||l<N}else{for((p=u/(R[0]+1)|0)>1&&(R=e(R,p,u),z=e(z,p,u),T=R.length,N=z.length),M=T,w=(x=z.slice(0,T)).length;w<T;)x[w++]=0;(O=R.slice()).unshift(0),S=R[0],R[1]>=u/2&&++S;do{p=0,(c=t(R,x,T,w))<0?(b=x[0],T!=w&&(b=b*u+(x[1]||0)),(p=b/S|0)>1?(p>=u&&(p=u-1),1==(c=t(m=e(R,p,u),x,g=m.length,w=x.length))&&(p--,n(m,T<g?O:R,g,u))):(0==p&&(c=p=1),m=R.slice()),(g=m.length)<w&&m.unshift(0),n(x,m,w,u),-1==c&&(c=t(R,x,T,w=x.length))<1&&(p++,n(x,T<w?O:R,w,u)),w=x.length):0===c&&(p++,x=[0]),v[l++]=p,c&&x[0]?x[w++]=z[M]||0:(x=[z[M]],w=1)}while((M++<N||void 0!==x[0])&&_--);d=void 0!==x[0]}v[0]||v.shift()}if(1==f)y.e=h,_u=d;else{for(l=1,p=v[0];p>=10;p/=10)l++;y.e=l+h*f-1,Gu(y,a?s+y.e+1:s,o,d)}return y}}();function Gu(e,t,n,r){var i,s,o,a,u,c,h,l,p,f=e.constructor;e:if(null!=t){if(!(l=e.d))return e;for(i=1,a=l[0];a>=10;a/=10)i++;if((s=t-i)<0)s+=7,o=t,u=(h=l[p=0])/Du(10,i-o-1)%10|0;else if((p=Math.ceil((s+1)/7))>=(a=l.length)){if(!r)break e;for(;a++<=p;)l.push(0);h=u=0,i=1,o=(s%=7)-7+1}else{for(h=a=l[p],i=1;a>=10;a/=10)i++;u=(o=(s%=7)-7+i)<0?0:h/Du(10,i-o-1)%10|0}if(r=r||t<0||void 0!==l[p+1]||(o<0?h:h%Du(10,i-o-1)),c=n<4?(u||r)&&(0==n||n==(e.s<0?3:2)):u>5||5==u&&(4==n||r||6==n&&(s>0?o>0?h/Du(10,i-o):0:l[p-1])%10&1||n==(e.s<0?8:7)),t<1||!l[0])return l.length=0,c?(t-=e.e+1,l[0]=Du(10,(7-t%7)%7),e.e=-t||0):l[0]=e.e=0,e;if(0==s?(l.length=p,a=1,p--):(l.length=p+1,a=Du(10,7-s),l[p]=o>0?(h/Du(10,i-o)%Du(10,o)|0)*a:0),c)for(;;){if(0==p){for(s=1,o=l[0];o>=10;o/=10)s++;for(o=l[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(e.e++,l[0]==Fu&&(l[0]=1));break}if(l[p]+=a,l[p]!=Fu)break;l[p--]=0,a=1}for(s=l.length;0===l[--s];)l.pop()}return Au&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e}function Yu(e,t,n){if(!e.isFinite())return sc(e);var r,i=e.e,s=Vu(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Ku(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+Ku(-i-1)+s,n&&(r=n-o)>0&&(s+=Ku(r))):i>=o?(s+=Ku(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+Ku(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=Ku(r))),s}function Zu(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function Xu(e,t,n){if(t>Pu)throw Au=!0,n&&(e.precision=n),Error("[DecimalError] Precision limit exceeded");return Gu(new e(Tu),t,1,!0)}function Ju(e,t,n){if(t>Uu)throw Error("[DecimalError] Precision limit exceeded");return Gu(new e(Ou),t,n,!0)}function Qu(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function Ku(e){for(var t="";e--;)t+="0";return t}function ec(e,t,n,r){var i,s=new e(1),o=Math.ceil(r/7+4);for(Au=!1;;){if(n%2&&lc((s=s.times(t)).d,o)&&(i=!0),0===(n=Ru(n/2))){n=s.d.length-1,i&&0===s.d[n]&&++s.d[n];break}lc((t=t.times(t)).d,o)}return Au=!0,s}function tc(e){return 1&e.d[e.d.length-1]}function nc(e,t,n){for(var r,i=new e(t[0]),s=0;++s<t.length;){if(!(r=new e(t[s])).s){i=r;break}i[n](r)&&(i=r)}return i}function rc(e,t){var n,r,i,s,o,a,u,c=0,h=0,l=0,p=e.constructor,f=p.rounding,d=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(Au=!1,u=d):u=t,a=new p(.03125);e.e>-2;)e=e.times(a),l+=5;for(u+=r=Math.log(Du(2,l))/Math.LN10*2+5|0,n=s=o=new p(1),p.precision=u;;){if(s=Gu(s.times(e),u,1),n=n.times(++h),Vu((a=o.plus(Wu(s,n,u,1))).d).slice(0,u)===Vu(o.d).slice(0,u)){for(i=l;i--;)o=Gu(o.times(o),u,1);if(null!=t)return p.precision=d,o;if(!(c<3&&Hu(o.d,u-r,f,c)))return Gu(o,p.precision=d,f,Au=!0);p.precision=u+=10,n=s=a=new p(1),h=0,c++}o=a}}function ic(e,t){var n,r,i,s,o,a,u,c,h,l,p,f=1,d=e,m=d.d,g=d.constructor,y=g.rounding,v=g.precision;if(d.s<0||!m||!m[0]||!d.e&&1==m[0]&&1==m.length)return new g(m&&!m[0]?-1/0:1!=d.s?NaN:m?0:d);if(null==t?(Au=!1,h=v):h=t,g.precision=h+=10,r=(n=Vu(m)).charAt(0),!(Math.abs(s=d.e)<15e14))return c=Xu(g,h+2,v).times(s+""),d=ic(new g(r+"."+n.slice(1)),h-10).plus(c),g.precision=v,null==t?Gu(d,v,y,Au=!0):d;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=Vu((d=d.times(e)).d)).charAt(0),f++;for(s=d.e,r>1?(d=new g("0."+n),s++):d=new g(r+"."+n.slice(1)),l=d,u=o=d=Wu(d.minus(1),d.plus(1),h,1),p=Gu(d.times(d),h,1),i=3;;){if(o=Gu(o.times(p),h,1),Vu((c=u.plus(Wu(o,new g(i),h,1))).d).slice(0,h)===Vu(u.d).slice(0,h)){if(u=u.times(2),0!==s&&(u=u.plus(Xu(g,h+2,v).times(s+""))),u=Wu(u,new g(f),h,1),null!=t)return g.precision=v,u;if(!Hu(u.d,h-10,y,a))return Gu(u,g.precision=v,y,Au=!0);g.precision=h+=10,c=o=d=Wu(l.minus(1),l.plus(1),h,1),p=Gu(d.times(d),h,1),i=a=1}u=c,i+=2}}function sc(e){return String(e.s*e.s/0)}function oc(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";e.d.push(+t),Au&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function ac(e,t,n,r,i){var s,o,a,u,c=e.precision,h=Math.ceil(c/7);for(Au=!1,u=n.times(n),a=new e(r);;){if(o=Wu(a.times(u),new e(t++*t++),c,1),a=i?r.plus(o):r.minus(o),r=Wu(o.times(u),new e(t++*t++),c,1),void 0!==(o=a.plus(r)).d[h]){for(s=h;o.d[s]===a.d[s]&&s--;);if(-1==s)break}s=a,a=r,r=o,o=s}return Au=!0,o.d.length=h+1,o}function uc(e,t){for(var n=e;--t;)n*=e;return n}function cc(e,t){var n,r=t.s<0,i=Ju(e,e.precision,1),s=i.times(.5);if((t=t.abs()).lte(s))return Eu=r?4:1,t;if((n=t.divToInt(i)).isZero())Eu=r?3:2;else{if((t=t.minus(n.times(i))).lte(s))return Eu=tc(n)?r?2:3:r?4:1,t;Eu=tc(n)?r?1:4:r?3:2}return t.minus(i).abs()}function hc(e,t,n,r){var i,s,o,a,u,c,h,l,p,f=e.constructor,d=void 0!==n;if(d?(qu(n,1,1e9),void 0===r?r=f.rounding:qu(r,0,8)):(n=f.precision,r=f.rounding),e.isFinite()){for(d?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,(o=(h=Yu(e)).indexOf("."))>=0&&(h=h.replace(".",""),(p=new f(1)).e=h.length-o,p.d=$u(Yu(p),10,i),p.e=p.d.length),s=u=(l=$u(h,10,i)).length;0==l[--u];)l.pop();if(l[0]){if(o<0?s--:((e=new f(e)).d=l,e.e=s,l=(e=Wu(e,p,n,r,0,i)).d,s=e.e,c=_u),o=l[n],a=i/2,c=c||void 0!==l[n+1],c=r<4?(void 0!==o||c)&&(0===r||r===(e.s<0?3:2)):o>a||o===a&&(4===r||c||6===r&&1&l[n-1]||r===(e.s<0?8:7)),l.length=n,c)for(;++l[--n]>i-1;)l[n]=0,n||(++s,l.unshift(1));for(u=l.length;!l[u-1];--u);for(o=0,h="";o<u;o++)h+=Su.charAt(l[o]);if(d){if(u>1)if(16==t||8==t){for(o=16==t?4:3,--u;u%o;u++)h+="0";for(u=(l=$u(h,i,t)).length;!l[u-1];--u);for(o=1,h="1.";o<u;o++)h+=Su.charAt(l[o])}else h=h.charAt(0)+"."+h.slice(1);h=h+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)h="0"+h;h="0."+h}else if(++s>u)for(s-=u;s--;)h+="0";else s<u&&(h=h.slice(0,s)+"."+h.slice(s))}else h=d?"0p+0":"0";h=(16==t?"0x":2==t?"0b":8==t?"0o":"")+h}else h=sc(e);return e.s<0?"-"+h:h}function lc(e,t){if(e.length>t)return e.length=t,!0}function pc(e){return new this(e).abs()}function fc(e){return new this(e).acos()}function dc(e){return new this(e).acosh()}function mc(e,t){return new this(e).plus(t)}function gc(e){return new this(e).asin()}function yc(e){return new this(e).asinh()}function vc(e){return new this(e).atan()}function xc(e){return new this(e).atanh()}function wc(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,s=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?Ju(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=Ju(this,s,1).times(.5)).s=e.s:t.s<0?(this.precision=s,this.rounding=1,n=this.atan(Wu(e,t,s,1)),t=Ju(this,s,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(Wu(e,t,s,1)):(n=Ju(this,s,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function bc(e){return new this(e).cbrt()}function _c(e){return Gu(e=new this(e),e.e+1,2)}function Ec(e){if(!e||"object"!=typeof e)throw Error("[DecimalError] Object expected");var t,n,r,i=!0===e.defaults,s=["precision",1,1e9,"rounding",0,8,"toExpNeg",-Nu,0,"toExpPos",0,Nu,"maxE",0,Nu,"minE",-Nu,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],i&&(this[n]=Cu[n]),void 0!==(r=e[n])){if(!(Ru(r)===r&&r>=s[t+1]&&r<=s[t+2]))throw Error(zu+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=Cu[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(zu+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");this[n]=!0}else this[n]=!1}return this}function Mc(e){return new this(e).cos()}function Nc(e){return new this(e).cosh()}function Sc(e,t){return new this(e).div(t)}function Tc(e){return new this(e).exp()}function Oc(e){return Gu(e=new this(e),e.e+1,3)}function Cc(){var e,t,n=new this(0);for(Au=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return Au=!0,new this(1/0);n=t}return Au=!0,n.sqrt()}function Ac(e){return e instanceof Xc||e&&"[object Decimal]"===e.name||!1}function zc(e){return new this(e).ln()}function Rc(e,t){return new this(e).log(t)}function Dc(e){return new this(e).log(2)}function kc(e){return new this(e).log(10)}function Ic(){return nc(this,arguments,"lt")}function Lc(){return nc(this,arguments,"gt")}function Bc(e,t){return new this(e).mod(t)}function Fc(e,t){return new this(e).mul(t)}function Pc(e,t){return new this(e).pow(t)}function Uc(e){var t,n,r,i,s=0,o=new this(1),a=[];if(void 0===e?e=this.precision:qu(e,1,1e9),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)(i=t[s])>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else{if(!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");for(t=crypto.randomBytes(r*=4);s<r;)(i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((127&t[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,s):(a.push(i%1e7),s+=4);s=r/4}else for(;s<r;)a[s++]=1e7*Math.random()|0;for(e%=7,(r=a[--s])&&e&&(i=Du(10,7-e),a[s]=(r/i|0)*i);0===a[s];s--)a.pop();if(s<0)n=0,a=[0];else{for(n=-1;0===a[0];n-=7)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<7&&(n-=7-r)}return o.e=n,o.d=a,o}function jc(e){return Gu(e=new this(e),e.e+1,this.rounding)}function Vc(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function qc(e){return new this(e).sin()}function Hc(e){return new this(e).sinh()}function $c(e){return new this(e).sqrt()}function Wc(e,t){return new this(e).sub(t)}function Gc(e){return new this(e).tan()}function Yc(e){return new this(e).tanh()}function Zc(e){return Gu(e=new this(e),e.e+1,1)}ju[Symbol.for("nodejs.util.inspect.custom")]=ju.toString,ju[Symbol.toStringTag]="Decimal";var Xc=function e(t){var n,r,i;function s(e){var t,n,r,i=this;if(!(i instanceof s))return new s(e);if(i.constructor=s,e instanceof s)return i.s=e.s,void(Au?!e.d||e.e>s.maxE?(i.e=NaN,i.d=null):e.e<s.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"==(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(Au?t>s.maxE?(i.e=NaN,i.d=null):t<s.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):oc(i,e.toString())}if("string"!==r)throw Error(zu+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),Bu.test(e)?oc(i,e):function(e,t){var n,r,i,s,o,a,u,c,h;if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Iu.test(t))n=16,t=t.toLowerCase();else if(ku.test(t))n=2;else{if(!Lu.test(t))throw Error(zu+t);n=8}for((s=t.search(/p/i))>0?(u=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),o=(s=t.indexOf("."))>=0,r=e.constructor,o&&(s=(a=(t=t.replace(".","")).length)-s,i=ec(r,new r(n),s,2*s)),s=h=(c=$u(t,n,Fu)).length-1;0===c[s];--s)c.pop();return s<0?new r(0*e.s):(e.e=Zu(c,h),e.d=c,Au=!1,o&&(e=Wu(e,i,4*a)),u&&(e=e.times(Math.abs(u)<54?Du(2,u):Xc.pow(2,u))),Au=!0,e)}(i,e)}if(s.prototype=ju,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=Ec,s.clone=e,s.isDecimal=Ac,s.abs=pc,s.acos=fc,s.acosh=dc,s.add=mc,s.asin=gc,s.asinh=yc,s.atan=vc,s.atanh=xc,s.atan2=wc,s.cbrt=bc,s.ceil=_c,s.cos=Mc,s.cosh=Nc,s.div=Sc,s.exp=Tc,s.floor=Oc,s.hypot=Cc,s.ln=zc,s.log=Rc,s.log10=kc,s.log2=Dc,s.max=Ic,s.min=Lc,s.mod=Bc,s.mul=Fc,s.pow=Pc,s.random=Uc,s.round=jc,s.sign=Vc,s.sin=qc,s.sinh=Hc,s.sqrt=$c,s.sub=Wc,s.tan=Gc,s.tanh=Yc,s.trunc=Zc,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return s.config(t),s}(Cu);Tu=new Xc(Tu),Ou=new Xc(Ou);var Jc,Qc=du("BigNumber",["?on","config"],(e=>{var{on:t,config:n}=e,r=Xc.clone({precision:n.precision,modulo:9});return r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(e){return new r(e.value)},t&&t("config",(function(e,t){e.precision!==t.precision&&r.config({precision:e.precision})})),r}),{isClass:!0}),Kc={exports:{}};
/**
 * @license Complex.js v2.0.13 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/Jc=Kc,function(e){var t=function(e){return.5*(Math.exp(e)+Math.exp(-e))},n=function(e){return.5*(Math.exp(e)-Math.exp(-e))},r=function(){throw SyntaxError("Invalid Param")};function i(e,t){var n=Math.abs(e),r=Math.abs(t);return 0===e?Math.log(r):0===t?Math.log(n):n<3e3&&r<3e3?.5*Math.log(e*e+t*t):Math.log(e/Math.cos(Math.atan2(t,e)))}function s(e,t){if(!(this instanceof s))return new s(e,t);var n=function(e,t){var n={re:0,im:0};if(null==e)n.re=n.im=0;else if(void 0!==t)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return s.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return s.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else 2===e.length?(n.re=e[0],n.im=e[1]):r();break;case"string":n.im=n.re=0;var i=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),o=1,a=0;null===i&&r();for(var u=0;u<i.length;u++){var c=i[u];" "===c||"\t"===c||"\n"===c||("+"===c?o++:"-"===c?a++:"i"===c||"I"===c?(o+a===0&&r()," "===i[u+1]||isNaN(i[u+1])?n.im+=parseFloat((a%2?"-":"")+"1"):(n.im+=parseFloat((a%2?"-":"")+i[u+1]),u++),o=a=0):((o+a===0||isNaN(c))&&r(),"i"===i[u+1]||"I"===i[u+1]?(n.im+=parseFloat((a%2?"-":"")+c),u++):n.re+=parseFloat((a%2?"-":"")+c),o=a=0))}o+a>0&&r();break;case"number":n.im=0,n.re=e;break;default:r()}return isNaN(n.re)||isNaN(n.im),n}(e,t);this.re=n.re,this.im=n.im}s.prototype={re:0,im:0,sign:function(){var e=this.abs();return new s(this.re/e,this.im/e)},add:function(e,t){var n=new s(e,t);return this.isInfinite()&&n.isInfinite()?s.NAN:this.isInfinite()||n.isInfinite()?s.INFINITY:new s(this.re+n.re,this.im+n.im)},sub:function(e,t){var n=new s(e,t);return this.isInfinite()&&n.isInfinite()?s.NAN:this.isInfinite()||n.isInfinite()?s.INFINITY:new s(this.re-n.re,this.im-n.im)},mul:function(e,t){var n=new s(e,t);return this.isInfinite()&&n.isZero()||this.isZero()&&n.isInfinite()?s.NAN:this.isInfinite()||n.isInfinite()?s.INFINITY:0===n.im&&0===this.im?new s(this.re*n.re,0):new s(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){var n=new s(e,t);if(this.isZero()&&n.isZero()||this.isInfinite()&&n.isInfinite())return s.NAN;if(this.isInfinite()||n.isZero())return s.INFINITY;if(this.isZero()||n.isInfinite())return s.ZERO;e=this.re,t=this.im;var r,i,o=n.re,a=n.im;return 0===a?new s(e/o,t/o):Math.abs(o)<Math.abs(a)?new s((e*(i=o/a)+t)/(r=o*i+a),(t*i-e)/r):new s((e+t*(i=a/o))/(r=a*i+o),(t-e*i)/r)},pow:function(e,t){var n=new s(e,t);if(e=this.re,t=this.im,n.isZero())return s.ONE;if(0===n.im){if(0===t&&e>0)return new s(Math.pow(e,n.re),0);if(0===e)switch((n.re%4+4)%4){case 0:return new s(Math.pow(t,n.re),0);case 1:return new s(0,Math.pow(t,n.re));case 2:return new s(-Math.pow(t,n.re),0);case 3:return new s(0,-Math.pow(t,n.re))}}if(0===e&&0===t&&n.re>0&&n.im>=0)return s.ZERO;var r=Math.atan2(t,e),o=i(e,t);return e=Math.exp(n.re*o-n.im*r),t=n.im*o+n.re*r,new s(e*Math.cos(t),e*Math.sin(t))},sqrt:function(){var e,t,n=this.re,r=this.im,i=this.abs();if(n>=0){if(0===r)return new s(Math.sqrt(n),0);e=.5*Math.sqrt(2*(i+n))}else e=Math.abs(r)/Math.sqrt(2*(i-n));return t=n<=0?.5*Math.sqrt(2*(i-n)):Math.abs(r)/Math.sqrt(2*(i+n)),new s(e,r<0?-t:t)},exp:function(){var e=Math.exp(this.re);return this.im,new s(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,t=this.im;return new s(Math.expm1(e)*Math.cos(t)+function(e){var t=Math.PI/4;if(e<-t||e>t)return Math.cos(e)-1;var n=e*e;return n*(n*(1/24+n*(-1/720+n*(1/40320+n*(-1/3628800+n*(1/4790014600+n*(-1/87178291200+n*(1/20922789888e3)))))))-.5)}(t),Math.exp(e)*Math.sin(t))},log:function(){var e=this.re,t=this.im;return new s(i(e,t),Math.atan2(t,e))},abs:function(){return e=this.re,t=this.im,n=Math.abs(e),r=Math.abs(t),n<3e3&&r<3e3?Math.sqrt(n*n+r*r):(n<r?(n=r,r=e/t):r=t/e,n*Math.sqrt(1+r*r));var e,t,n,r},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,r=this.im;return new s(Math.sin(e)*t(r),Math.cos(e)*n(r))},cos:function(){var e=this.re,r=this.im;return new s(Math.cos(e)*t(r),-Math.sin(e)*n(r))},tan:function(){var e=2*this.re,r=2*this.im,i=Math.cos(e)+t(r);return new s(Math.sin(e)/i,n(r)/i)},cot:function(){var e=2*this.re,r=2*this.im,i=Math.cos(e)-t(r);return new s(-Math.sin(e)/i,n(r)/i)},sec:function(){var e=this.re,r=this.im,i=.5*t(2*r)+.5*Math.cos(2*e);return new s(Math.cos(e)*t(r)/i,Math.sin(e)*n(r)/i)},csc:function(){var e=this.re,r=this.im,i=.5*t(2*r)-.5*Math.cos(2*e);return new s(Math.sin(e)*t(r)/i,-Math.cos(e)*n(r)/i)},asin:function(){var e=this.re,t=this.im,n=new s(t*t-e*e+1,-2*e*t).sqrt(),r=new s(n.re-t,n.im+e).log();return new s(r.im,-r.re)},acos:function(){var e=this.re,t=this.im,n=new s(t*t-e*e+1,-2*e*t).sqrt(),r=new s(n.re-t,n.im+e).log();return new s(Math.PI/2-r.im,r.re)},atan:function(){var e=this.re,t=this.im;if(0===e){if(1===t)return new s(0,1/0);if(-1===t)return new s(0,-1/0)}var n=e*e+(1-t)*(1-t),r=new s((1-t*t-e*e)/n,-2*e/n).log();return new s(-.5*r.im,.5*r.re)},acot:function(){var e=this.re,t=this.im;if(0===t)return new s(Math.atan2(1,e),0);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).atan():new s(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new s(0,1/0);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).acos():new s(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new s(Math.PI/2,1/0);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).asin():new s(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){var e=this.re,r=this.im;return new s(n(e)*Math.cos(r),t(e)*Math.sin(r))},cosh:function(){var e=this.re,r=this.im;return new s(t(e)*Math.cos(r),n(e)*Math.sin(r))},tanh:function(){var e=2*this.re,r=2*this.im,i=t(e)+Math.cos(r);return new s(n(e)/i,Math.sin(r)/i)},coth:function(){var e=2*this.re,r=2*this.im,i=t(e)-Math.cos(r);return new s(n(e)/i,-Math.sin(r)/i)},csch:function(){var e=this.re,r=this.im,i=Math.cos(2*r)-t(2*e);return new s(-2*n(e)*Math.cos(r)/i,2*t(e)*Math.sin(r)/i)},sech:function(){var e=this.re,r=this.im,i=Math.cos(2*r)+t(2*e);return new s(2*t(e)*Math.cos(r)/i,-2*n(e)*Math.sin(r)/i)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){var e=this.acos();if(e.im<=0){var t=e.re;e.re=-e.im,e.im=t}else t=e.im,e.im=-e.re,e.re=t;return e},atanh:function(){var e=this.re,t=this.im,n=e>1&&0===t,r=1-e,o=1+e,a=r*r+t*t,u=0!==a?new s((o*r-t*t)/a,(t*r+o*t)/a):new s(-1!==e?e/0:0,0!==t?t/0:0),c=u.re;return u.re=i(u.re,u.im)/2,u.im=Math.atan2(u.im,c)/2,n&&(u.im=-u.im),u},acoth:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new s(0,Math.PI/2);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).atanh():new s(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){var e=this.re,t=this.im;if(0===t)return new s(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).asinh():new s(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){var e=this.re,t=this.im;if(this.isZero())return s.INFINITY;var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).acosh():new s(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){if(this.isZero())return s.INFINITY;if(this.isInfinite())return s.ZERO;var e=this.re,t=this.im,n=e*e+t*t;return new s(e/n,-t/n)},conjugate:function(){return new s(this.re,-this.im)},neg:function(){return new s(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new s(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new s(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new s(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){var n=new s(e,t);return Math.abs(n.re-this.re)<=s.EPSILON&&Math.abs(n.im-this.im)<=s.EPSILON},clone:function(){return new s(this.re,this.im)},toString:function(){var e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<s.EPSILON&&(e=0),Math.abs(t)<s.EPSILON&&(t=0),0===t?n+e:(0!==e?(n+=e,n+=" ",t<0?(t=-t,n+="-"):n+="+",n+=" "):t<0&&(t=-t,n+="-"),1!==t&&(n+=t),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},s.ZERO=new s(0,0),s.ONE=new s(1,0),s.I=new s(0,1),s.PI=new s(Math.PI,0),s.E=new s(Math.E,0),s.INFINITY=new s(1/0,1/0),s.NAN=new s(NaN,NaN),s.EPSILON=1e-15,Object.defineProperty(s,"__esModule",{value:!0}),s.default=s,s.Complex=s,Jc.exports=s}();var eh=Ia(Kc.exports),th=du("Complex",[],(()=>(eh.prototype.type="Complex",eh.prototype.isComplex=!0,eh.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},eh.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},eh.prototype.format=function(e){var t=this.im,n=this.re,r=Pa(this.re,e),i=Pa(this.im,e),s=Io(e)?e:e?e.precision:null;if(null!==s){var o=Math.pow(10,-s);Math.abs(n/t)<o&&(n=0),Math.abs(t/n)<o&&(t=0)}return 0===t?r:0===n?1===t?"i":-1===t?"-i":i+"i":t<0?-1===t?r+" - i":r+" - "+i.substring(1)+"i":1===t?r+" + i":r+" + "+i+"i"},eh.fromPolar=function(e){switch(arguments.length){case 1:var t=arguments[0];if("object"==typeof t)return eh(t);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var n=arguments[0],r=arguments[1];if(Io(n)){if(Po(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),Io(r))return new eh({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},eh.prototype.valueOf=eh.prototype.toString,eh.fromJSON=function(e){return new eh(e)},eh.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},eh)),{isClass:!0}),nh={exports:{}};
/**
 * @license Fraction.js v4.1.1 23/05/2021
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/!function(e,t){!function(t){var n={s:1,n:0,d:1};function r(e){function t(){var t=Error.apply(this,arguments);t.name=this.name=e,this.stack=t.stack,this.message=t.message}function n(){}return n.prototype=Error.prototype,t.prototype=new n,t}var i=l.DivisionByZero=r("DivisionByZero"),s=l.InvalidParameter=r("InvalidParameter");function o(e,t){return isNaN(e=parseInt(e,10))&&a(),e*t}function a(){throw new s}function u(e){for(var t={},n=e,r=2,i=4;i<=n;){for(;n%r==0;)n/=r,t[r]=(t[r]||0)+1;i+=1+2*r++}return n!==e?n>1&&(t[n]=(t[n]||0)+1):t[e]=(t[e]||0)+1,t}var c=function(e,t){var r,s=0,u=1,c=1,h=0,l=0,p=0,f=1,d=1,m=0,g=1,y=1,v=1,x=1e7;if(null==e);else if(void 0!==t)c=(s=e)*(u=t);else switch(typeof e){case"object":"d"in e&&"n"in e?(s=e.n,u=e.d,"s"in e&&(s*=e.s)):0 in e?(s=e[0],1 in e&&(u=e[1])):a(),c=s*u;break;case"number":if(e<0&&(c=e,e=-e),e%1==0)s=e;else if(e>0){for(e>=1&&(e/=d=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)));g<=x&&v<=x;){if(e===(r=(m+y)/(g+v))){g+v<=x?(s=m+y,u=g+v):v>g?(s=y,u=v):(s=m,u=g);break}e>r?(m+=y,g+=v):(y+=m,v+=g),g>x?(s=y,u=v):(s=m,u=g)}s*=d}else(isNaN(e)||isNaN(t))&&(u=s=NaN);break;case"string":if(null===(g=e.match(/\d+|./g))&&a(),"-"===g[m]?(c=-1,m++):"+"===g[m]&&m++,g.length===m+1?l=o(g[m++],c):"."===g[m+1]||"."===g[m]?("."!==g[m]&&(h=o(g[m++],c)),(1+ ++m===g.length||"("===g[m+1]&&")"===g[m+3]||"'"===g[m+1]&&"'"===g[m+3])&&(l=o(g[m],c),f=Math.pow(10,g[m].length),m++),("("===g[m]&&")"===g[m+2]||"'"===g[m]&&"'"===g[m+2])&&(p=o(g[m+1],c),d=Math.pow(10,g[m+1].length)-1,m+=3)):"/"===g[m+1]||":"===g[m+1]?(l=o(g[m],c),f=o(g[m+2],1),m+=3):"/"===g[m+3]&&" "===g[m+1]&&(h=o(g[m],c),l=o(g[m+2],c),f=o(g[m+4],1),m+=5),g.length<=m){c=s=p+(u=f*d)*h+d*l;break}default:a()}if(0===u)throw new i;n.s=c<0?-1:1,n.n=Math.abs(s),n.d=Math.abs(u)};function h(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function l(e,t){if(!(this instanceof l))return new l(e,t);c(e,t),e=l.REDUCE?h(n.d,n.n):1,this.s=n.s,this.n=n.n/e,this.d=n.d/e}l.REDUCE=1,l.prototype={s:1,n:0,d:1,abs:function(){return new l(this.n,this.d)},neg:function(){return new l(-this.s*this.n,this.d)},add:function(e,t){return c(e,t),new l(this.s*this.n*n.d+n.s*this.d*n.n,this.d*n.d)},sub:function(e,t){return c(e,t),new l(this.s*this.n*n.d-n.s*this.d*n.n,this.d*n.d)},mul:function(e,t){return c(e,t),new l(this.s*n.s*this.n*n.n,this.d*n.d)},div:function(e,t){return c(e,t),new l(this.s*n.s*this.n*n.d,this.d*n.n)},clone:function(){return new l(this)},mod:function(e,t){return isNaN(this.n)||isNaN(this.d)?new l(NaN):void 0===e?new l(this.s*this.n%this.d,1):(c(e,t),0===n.n&&0===this.d&&l(0,0),new l(this.s*(n.d*this.n)%(n.n*this.d),n.d*this.d))},gcd:function(e,t){return c(e,t),new l(h(n.n,this.n)*h(n.d,this.d),n.d*this.d)},lcm:function(e,t){return c(e,t),0===n.n&&0===this.n?new l:new l(n.n*this.n,h(n.n,this.n)*h(n.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):new l(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):new l(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):new l(Math.round(e*this.s*this.n/this.d),e)},inverse:function(){return new l(this.s*this.d,this.n)},pow:function(e,t){if(c(e,t),1===n.d)return n.s<0?new l(Math.pow(this.s*this.d,n.n),Math.pow(this.n,n.n)):new l(Math.pow(this.s*this.n,n.n),Math.pow(this.d,n.n));if(this.s<0)return null;var r=u(this.n),i=u(this.d),s=1,o=1;for(var a in r)if("1"!==a){if("0"===a){s=0;break}if(r[a]*=n.n,r[a]%n.d!=0)return null;r[a]/=n.d,s*=Math.pow(a,r[a])}for(var a in i)if("1"!==a){if(i[a]*=n.n,i[a]%n.d!=0)return null;i[a]/=n.d,o*=Math.pow(a,i[a])}return n.s<0?new l(o,s):new l(s,o)},equals:function(e,t){return c(e,t),this.s*this.n*n.d==n.s*n.n*this.d},compare:function(e,t){c(e,t);var r=this.s*this.n*n.d-n.s*n.n*this.d;return(0<r)-(r<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;var t=this.abs().toContinued();function n(e){return 1===e.length?new l(e[0]):n(e.slice(1)).inverse().add(e[0])}e=e||.001;for(var r=0;r<t.length;r++){var i=n(t.slice(0,r+1));if(i.sub(this.abs()).abs().valueOf()<e)return i.mul(this.s)}return this},divisible:function(e,t){return c(e,t),!(!(n.n*this.d)||this.n*n.d%(n.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,n+=" ",r%=i),n+=r,n+="/",n+=i),n},toLatex:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,r%=i),n+="\\frac{",n+=r,n+="}{",n+=i,n+="}"),n},toContinued:function(){var e,t=this.n,n=this.d,r=[];if(isNaN(t)||isNaN(n))return r;do{r.push(Math.floor(t/n)),e=t%n,t=n,n=e}while(1!==t);return r},toString:function(e){var t,n=this.n,r=this.d;if(isNaN(n)||isNaN(r))return"NaN";l.REDUCE||(n/=t=h(n,r),r/=t),e=e||15;var i=function(e,t){for(;t%2==0;t/=2);for(;t%5==0;t/=5);if(1===t)return 0;for(var n=10%t,r=1;1!==n;r++)if(n=10*n%t,r>2e3)return 0;return r}(0,r),s=function(e,t,n){for(var r=1,i=function(e,t,n){for(var r=1;t>0;e=e*e%n,t>>=1)1&t&&(r=r*e%n);return r}(10,n,t),s=0;s<300;s++){if(r===i)return s;r=10*r%t,i=10*i%t}return 0}(0,r,i),o=-1===this.s?"-":"";if(o+=n/r|0,n%=r,(n*=10)&&(o+="."),i){for(var a=s;a--;)o+=n/r|0,n%=r,n*=10;for(o+="(",a=i;a--;)o+=n/r|0,n%=r,n*=10;o+=")"}else for(a=e;n&&a--;)o+=n/r|0,n%=r,n*=10;return o}},Object.defineProperty(l,"__esModule",{value:!0}),l.default=l,l.Fraction=l,e.exports=l}()}(nh);var rh=Ia(nh.exports),ih=du("Fraction",[],(()=>(rh.prototype.type="Fraction",rh.prototype.isFraction=!0,rh.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},rh.fromJSON=function(e){return new rh(e)},rh)),{isClass:!0}),sh=du("Range",[],(()=>{function e(t,n,r){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");var i=null!=t,s=null!=n,o=null!=r;if(i)if(Lo(t))t=t.toNumber();else if("number"!=typeof t)throw new TypeError("Parameter start must be a number");if(s)if(Lo(n))n=n.toNumber();else if("number"!=typeof n)throw new TypeError("Parameter end must be a number");if(o)if(Lo(r))r=r.toNumber();else if("number"!=typeof r)throw new TypeError("Parameter step must be a number");this.start=i?parseFloat(t):0,this.end=s?parseFloat(n):0,this.step=o?parseFloat(r):1}return e.prototype.type="Range",e.prototype.isRange=!0,e.parse=function(t){if("string"!=typeof t)return null;var n=t.split(":").map((function(e){return parseFloat(e)}));if(n.some((function(e){return isNaN(e)})))return null;switch(n.length){case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[2],n[1]);default:return null}},e.prototype.clone=function(){return new e(this.start,this.end,this.step)},e.prototype.size=function(){var e=0,t=this.start,n=this.step,r=this.end-t;return Fa(n)===Fa(r)?e=Math.ceil(r/n):0===r&&(e=0),isNaN(e)&&(e=0),[e]},e.prototype.min=function(){var e=this.size()[0];return e>0?this.step>0?this.start:this.start+(e-1)*this.step:void 0},e.prototype.max=function(){var e=this.size()[0];return e>0?this.step>0?this.start+(e-1)*this.step:this.start:void 0},e.prototype.forEach=function(e){var t=this.start,n=this.step,r=this.end,i=0;if(n>0)for(;t<r;)e(t,[i],this),t+=n,i++;else if(n<0)for(;t>r;)e(t,[i],this),t+=n,i++},e.prototype.map=function(e){var t=[];return this.forEach((function(n,r,i){t[r[0]]=e(n,r,i)})),t},e.prototype.toArray=function(){var e=[];return this.forEach((function(t,n){e[n[0]]=t})),e},e.prototype.valueOf=function(){return this.toArray()},e.prototype.format=function(e){var t=Pa(this.start,e);return 1!==this.step&&(t+=":"+Pa(this.step,e)),t+":"+Pa(this.end,e)},e.prototype.toString=function(){return this.format()},e.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},e.fromJSON=function(t){return new e(t.start,t.end,t.step)},e}),{isClass:!0}),oh=du("Matrix",[],(()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e}),{isClass:!0}),ah=du("DenseMatrix",["Matrix"],(e=>{var{Matrix:t}=e;function n(e,t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!Uo(t))throw new Error("Invalid datatype: "+t);if(Vo(e))"DenseMatrix"===e.type?(this._data=wa(e._data),this._size=wa(e._size),this._datatype=t||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=t||e._datatype);else if(e&&jo(e.data)&&jo(e.size))this._data=e.data,this._size=e.size,ru(this._data,this._size),this._datatype=t||e.datatype;else if(jo(e))this._data=c(e),this._size=tu(this._data),ru(this._data,this._size),this._datatype=t;else{if(e)throw new TypeError("Unsupported type of data ("+xa(e)+")");this._data=[],this._size=[0],this._datatype=t}}function r(e,t){if(!Go(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var r=t.size();if(r.length!==e._size.length)throw new Ka(r.length,e._size.length);for(var s=t.min(),o=t.max(),a=0,u=e._size.length;a<u;a++)iu(s[a],e._size[a]),iu(o[a],e._size[a]);return new n(i(e._data,t,r.length,0),e._datatype)}function i(e,t,n,r){var s=r===n-1,o=t.dimension(r);return s?o.map((function(t){return iu(t,e.length),e[t]})).valueOf():o.map((function(s){return iu(s,e.length),i(e[s],t,n,r+1)})).valueOf()}function s(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,s=t.size(),a=t.isScalar();if(Vo(n)?(i=n.size(),n=n.valueOf()):i=tu(n),a){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r)}else{if(s.length<e._size.length)throw new Ka(s.length,e._size.length,"<");if(i.length<s.length){for(var c=0,h=0;1===s[c]&&1===i[c];)c++;for(;1===s[c];)h++,c++;n=au(n,s.length,h,i)}if(!Ma(s,i))throw new Ka(s,i,">");u(e,t.max().map((function(e){return e+1})),r);var l=s.length;o(e._data,t,n,l,0)}return e}function o(e,t,n,r,i){var s=i===r-1,a=t.dimension(i);s?a.forEach((function(t,r){iu(t),e[t]=n[r[0]]})):a.forEach((function(s,a){iu(s),o(e[s],t,n[a[0]],r,i+1)}))}function a(e,t,n){if(0===t.length){for(var r=e._data;jo(r);)r=r[0];return r}return e._size=t.slice(0),e._data=su(e._data,e._size,n),e}function u(e,t,n){for(var r=e._size.slice(0),i=!1;r.length<t.length;)r.push(0),i=!0;for(var s=0,o=t.length;s<o;s++)t[s]>r[s]&&(r[s]=t[s],i=!0);i&&a(e,r,n)}function c(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];jo(r)?e[t]=c(r):r&&!0===r.isMatrix&&(e[t]=c(r.valueOf()))}return e}return n.prototype=new t,n.prototype.createDenseMatrix=function(e,t){return new n(e,t)},n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return pu(this._data,xa)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(e,t){return new n(e,t)},n.prototype.subset=function(e,t,n){switch(arguments.length){case 1:return r(this,e);case 2:case 3:return s(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(e){if(!jo(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new Ka(e.length,this._size.length);for(var t=0;t<e.length;t++)iu(e[t],this._size[t]);for(var n=this._data,r=0,i=e.length;r<i;r++){var s=e[r];iu(s,n.length),n=n[s]}return n},n.prototype.set=function(e,t,n){if(!jo(e))throw new TypeError("Array expected");if(e.length<this._size.length)throw new Ka(e.length,this._size.length,"<");var r,i,s;u(this,e.map((function(e){return e+1})),n);var o=this._data;for(r=0,i=e.length-1;r<i;r++)iu(s=e[r],o.length),o=o[s];return iu(s=e[e.length-1],o.length),o[s]=t,this},n.prototype.resize=function(e,t,n){if(!qo(e))throw new TypeError("Array or Matrix expected");var r=e.valueOf().map((e=>Array.isArray(e)&&1===e.length?e[0]:e));return a(n?this.clone():this,r,t)},n.prototype.reshape=function(e,t){var n=t?this.clone():this;return n._data=function(e,t){var n,r=function(e){if(!Array.isArray(e))return e;var t=[];return e.forEach((function e(n){Array.isArray(n)?n.forEach(e):t.push(n)})),t}(e);function i(e){return e.reduce(((e,t)=>e*t))}if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Ka(0,i(tu(e)),"!=");for(var s=1,o=0;o<t.length;o++)s*=t[o];if(r.length!==s)throw new Ka(i(t),i(tu(e)),"!=");try{n=function(e,t){for(var n,r=e,i=t.length-1;i>0;i--){var s=t[i];n=[];for(var o=r.length/s,a=0;a<o;a++)n.push(r.slice(a*s,(a+1)*s));r=n}return r}(r,t)}catch(n){if(n instanceof Ka)throw new Ka(i(t),i(tu(e)),"!=");throw n}return n}(n._data,e),n._size=e.slice(0),n},n.prototype.clone=function(){return new n({data:wa(this._data),size:wa(this._size),datatype:this._datatype})},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(e){var t=this,r=function n(r,i){return jo(r)?r.map((function(e,t){return n(e,i.concat(t))})):e(r,i,t)}(this._data,[]);return new n(r,void 0!==this._datatype?pu(r,xa):void 0)},n.prototype.forEach=function(e){var t=this;!function n(r,i){jo(r)?r.forEach((function(e,t){n(e,i.concat(t))})):e(r,i,t)}(this._data,[])},n.prototype.toArray=function(){return wa(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(e){return Za(this._data,e)},n.prototype.toString=function(){return Za(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(e){if(e){if(Lo(e)&&(e=e.toNumber()),!Io(e)||!Ba(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var t=e>0?e:0,r=e<0?-e:0,i=this._size[0],s=this._size[1],o=Math.min(i-r,s-t),a=[],u=0;u<o;u++)a[u]=this._data[u+r][u+t];return new n({data:a,size:[o],datatype:this._datatype})},n.diagonal=function(e,t,r,i){if(!jo(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(Lo(e)&&(e=e.toNumber()),!Io(e)||!Ba(e)||e<1)throw new Error("Size values must be positive integers");return e})),r){if(Lo(r)&&(r=r.toNumber()),!Io(r)||!Ba(r))throw new TypeError("The parameter k must be an integer number")}else r=0;var s,o=r>0?r:0,a=r<0?-r:0,u=e[0],c=e[1],h=Math.min(u-a,c-o);if(jo(t)){if(t.length!==h)throw new Error("Invalid value array length");s=function(e){return t[e]}}else if(Vo(t)){var l=t.size();if(1!==l.length||l[0]!==h)throw new Error("Invalid matrix length");s=function(e){return t.get([e])}}else s=function(){return t};i||(i=Lo(s(0))?s(0).mul(0):0);var p=[];if(e.length>0){p=su(p,e,i);for(var f=0;f<h;f++)p[f+a][f+o]=s(f)}return new n({data:p,size:[u,c]})},n.fromJSON=function(e){return new n(e)},n.prototype.swapRows=function(e,t){if(!(Io(e)&&Ba(e)&&Io(t)&&Ba(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return iu(e,this._size[0]),iu(t,this._size[0]),n._swapRows(e,t,this._data),this},n._swapRows=function(e,t,n){var r=n[e];n[e]=n[t],n[t]=r},n}),{isClass:!0});function uh(e,t,n){return e&&"function"==typeof e.map?e.map((function(e){return uh(e,t)})):t(e)}var ch="number",hh="number, number";function lh(e){return Math.abs(e)}function ph(e,t){return e+t}function fh(e,t){return e*t}function dh(e){return-e}function mh(e){return Math.ceil(e)}function gh(e,t){if(t>0)return e-t*Math.floor(e/t);if(0===t)return e;throw new Error("Cannot calculate mod for a negative divisor")}function yh(e,t){return e*e<1&&t===1/0||e*e>1&&t===-1/0?0:Math.pow(e,t)}function vh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(ja(e,t))}lh.signature=ch,ph.signature=hh,fh.signature=hh,dh.signature=ch,mh.signature=ch,gh.signature=hh,yh.signature=hh,vh.signature=hh;var xh=du("isNumeric",["typed"],(e=>{var{typed:t}=e;return t("isNumeric",{"number | BigNumber | Fraction | boolean":function(){return!0},"Complex | Unit | string | null | undefined | Node":function(){return!1},"Array | Matrix":function(e){return uh(e,this)}})}));function wh(e,t,n){if(null==n)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var r=e.minus(t).abs();if(r.isZero())return!0;var i=e.constructor.max(e.abs(),t.abs());return r.lte(i.times(n))}return!1}var bh="equalScalar",_h=du(bh,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(bh,{"boolean, boolean":function(e,t){return e===t},"number, number":function(e,t){return Wa(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.eq(t)||wh(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return e.equals(t)},"Complex, Complex":function(e,t){return function(e,t,n){return Wa(e.re,t.re,n)&&Wa(e.im,t.im,n)}(e,t,n.epsilon)},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)}})}));du(bh,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(bh,{"number, number":function(e,t){return Wa(e,t,n.epsilon)}})}));var Eh=du("SparseMatrix",["typed","equalScalar","Matrix"],(e=>{var{typed:t,equalScalar:n,Matrix:r}=e;function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!Uo(t))throw new Error("Invalid datatype: "+t);if(Vo(e))!function(e,t,n){"SparseMatrix"===t.type?(e._values=t._values?wa(t._values):void 0,e._index=wa(t._index),e._ptr=wa(t._ptr),e._size=wa(t._size),e._datatype=n||t._datatype):s(e,t.valueOf(),n||t._datatype)}(this,e,t);else if(e&&jo(e.index)&&jo(e.ptr)&&jo(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=t||e.datatype;else if(jo(e))s(this,e,t);else{if(e)throw new TypeError("Unsupported type of data ("+xa(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=t}}function s(e,r,i){e._values=[],e._index=[],e._ptr=[],e._datatype=i;var s=r.length,o=0,a=n,u=0;if(Uo(i)&&(a=t.find(n,[i,i])||n,u=t.convert(0,i)),s>0){var c=0;do{e._ptr.push(e._index.length);for(var h=0;h<s;h++){var l=r[h];if(jo(l)){if(0===c&&o<l.length&&(o=l.length),c<l.length){var p=l[c];a(p,u)||(e._values.push(p),e._index.push(h))}}else 0===c&&o<1&&(o=1),a(l,u)||(e._values.push(l),e._index.push(h))}c++}while(c<o)}e._ptr.push(e._index.length),e._size=[s,o]}function o(e,t){if(!Go(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var n,r,s,o,a=t.size();if(a.length!==e._size.length)throw new Ka(a.length,e._size.length);var u=t.min(),c=t.max();for(n=0,r=e._size.length;n<r;n++)iu(u[n],e._size[n]),iu(c[n],e._size[n]);var h=e._values,l=e._index,p=e._ptr,f=t.dimension(0),d=t.dimension(1),m=[],g=[];f.forEach((function(e,t){g[e]=t[0],m[e]=!0}));var y=h?[]:void 0,v=[],x=[];return d.forEach((function(e){for(x.push(v.length),s=p[e],o=p[e+1];s<o;s++)n=l[s],!0===m[n]&&(v.push(g[n]),y&&y.push(h[s]))})),x.push(v.length),new i({values:y,index:v,ptr:x,size:a,datatype:e._datatype})}function a(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,s=t.size(),o=t.isScalar();if(Vo(n)?(i=n.size(),n=n.toArray()):i=tu(n),o){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r)}else{if(1!==s.length&&2!==s.length)throw new Ka(s.length,e._size.length,"<");if(i.length<s.length){for(var a=0,u=0;1===s[a]&&1===i[a];)a++;for(;1===s[a];)u++,a++;n=au(n,s.length,u,i)}if(!Ma(s,i))throw new Ka(s,i,">");for(var c=t.min()[0],h=t.min()[1],l=i[0],p=i[1],f=0;f<l;f++)for(var d=0;d<p;d++){var m=n[f][d];e.set([f+c,d+h],m,r)}}return e}function u(e,t,n,r){if(n-t==0)return n;for(var i=t;i<n;i++)if(r[i]===e)return i;return t}function c(e,t,n,r,i,s,o){i.splice(e,0,r),s.splice(e,0,t);for(var a=n+1;a<o.length;a++)o[a]++}function h(e,r,i,s){var o=s||0,a=n,u=0;Uo(e._datatype)&&(a=t.find(n,[e._datatype,e._datatype])||n,u=t.convert(0,e._datatype),o=t.convert(o,e._datatype));var c,h,l,p=!a(o,u),f=e._size[0],d=e._size[1];if(i>d){for(h=d;h<i;h++)if(e._ptr[h]=e._values.length,p)for(c=0;c<f;c++)e._values.push(o),e._index.push(c);e._ptr[i]=e._values.length}else i<d&&(e._ptr.splice(i+1,d-i),e._values.splice(e._ptr[i],e._values.length),e._index.splice(e._ptr[i],e._index.length));if(d=i,r>f){if(p){var m=0;for(h=0;h<d;h++){e._ptr[h]=e._ptr[h]+m,l=e._ptr[h+1]+m;var g=0;for(c=f;c<r;c++,g++)e._values.splice(l+g,0,o),e._index.splice(l+g,0,c),m++}e._ptr[d]=e._values.length}}else if(r<f){var y=0;for(h=0;h<d;h++){e._ptr[h]=e._ptr[h]-y;var v=e._ptr[h],x=e._ptr[h+1]-y;for(l=v;l<x;l++)(c=e._index[l])>r-1&&(e._values.splice(l,1),e._index.splice(l,1),y++)}e._ptr[h]=e._values.length}return e._size[0]=r,e._size[1]=i,e}function l(e,t,n,r,i){var s,o,a=r[0],u=r[1],c=[];for(s=0;s<a;s++)for(c[s]=[],o=0;o<u;o++)c[s][o]=0;for(o=0;o<u;o++)for(var h=n[o],l=n[o+1],p=h;p<l;p++)c[s=t[p]][o]=e?i?wa(e[p]):e[p]:1;return c}return i.prototype=new r,i.prototype.createSparseMatrix=function(e,t){return new i(e,t)},i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return pu(this._values,xa)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(e,t){return new i(e,t)},i.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&&0!==t?this._index.length/(e*t):0},i.prototype.subset=function(e,t,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,e);case 2:case 3:return a(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.get=function(e){if(!jo(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new Ka(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var t=e[0],n=e[1];iu(t,this._size[0]),iu(n,this._size[1]);var r=u(t,this._ptr[n],this._ptr[n+1],this._index);return r<this._ptr[n+1]&&this._index[r]===t?this._values[r]:0},i.prototype.set=function(e,r,i){if(!jo(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new Ka(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var s=e[0],o=e[1],a=this._size[0],l=this._size[1],p=n,f=0;Uo(this._datatype)&&(p=t.find(n,[this._datatype,this._datatype])||n,f=t.convert(0,this._datatype)),(s>a-1||o>l-1)&&(h(this,Math.max(s+1,a),Math.max(o+1,l),i),a=this._size[0],l=this._size[1]),iu(s,a),iu(o,l);var d=u(s,this._ptr[o],this._ptr[o+1],this._index);return d<this._ptr[o+1]&&this._index[d]===s?p(r,f)?function(e,t,n,r,i){n.splice(e,1),r.splice(e,1);for(var s=t+1;s<i.length;s++)i[s]--}(d,o,this._values,this._index,this._ptr):this._values[d]=r:c(d,s,o,r,this._values,this._index,this._ptr),this},i.prototype.resize=function(e,t,n){if(!qo(e))throw new TypeError("Array or Matrix expected");var r=e.valueOf().map((e=>Array.isArray(e)&&1===e.length?e[0]:e));if(2!==r.length)throw new Error("Only two dimensions matrix are supported");return r.forEach((function(e){if(!Io(e)||!Ba(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Za(r)+")")})),h(n?this.clone():this,r[0],r[1],t)},i.prototype.reshape=function(e,t){if(!jo(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");if(e.forEach((function(t){if(!Io(t)||!Ba(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Za(e)+")")})),this._size[0]*this._size[1]!=e[0]*e[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var n=t?this.clone():this;if(this._size[0]===e[0]&&this._size[1]===e[1])return n;for(var r=[],i=0;i<n._ptr.length;i++)for(var s=0;s<n._ptr[i+1]-n._ptr[i];s++)r.push(i);for(var o=n._values.slice(),a=n._index.slice(),h=0;h<n._index.length;h++){var l=a[h],p=r[h],f=l*n._size[1]+p;r[h]=f%e[1],a[h]=Math.floor(f/e[1])}n._values.length=0,n._index.length=0,n._ptr.length=e[1]+1,n._size=e.slice();for(var d=0;d<n._ptr.length;d++)n._ptr[d]=0;for(var m=0;m<o.length;m++){var g=a[m],y=r[m],v=o[m];c(u(g,n._ptr[y],n._ptr[y+1],n._index),g,y,v,n._values,n._index,n._ptr)}return n},i.prototype.clone=function(){return new i({values:this._values?wa(this._values):void 0,index:wa(this._index),ptr:wa(this._ptr),size:wa(this._size),datatype:this._datatype})},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(e,r){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var s=this;return function(e,r,s,o,a,u,c){var h=[],l=[],p=[],f=n,d=0;Uo(e._datatype)&&(f=t.find(n,[e._datatype,e._datatype])||n,d=t.convert(0,e._datatype));for(var m=function(e,t,n){e=u(e,t,n),f(e,d)||(h.push(e),l.push(t))},g=0;g<=a;g++){p.push(h.length);var y=e._ptr[g],v=e._ptr[g+1];if(c)for(var x=y;x<v;x++){var w=e._index[x];w>=0&&w<=s&&m(e._values[x],w-0,g-0)}else{for(var b={},_=y;_<v;_++)b[e._index[_]]=e._values[_];for(var E=0;E<=s;E++)m(E in b?b[E]:0,E-0,g-0)}}return p.push(h.length),new i({values:h,index:l,ptr:p,size:[s-0+1,a-0+1]})}(this,0,this._size[0]-1,0,this._size[1]-1,(function(t,n,r){return e(t,[n,r],s)}),r)},i.prototype.forEach=function(e,t){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this._size[0],r=this._size[1],i=0;i<r;i++){var s=this._ptr[i],o=this._ptr[i+1];if(t)for(var a=s;a<o;a++){var u=this._index[a];e(this._values[a],[u,i],this)}else{for(var c={},h=s;h<o;h++)c[this._index[h]]=this._values[h];for(var l=0;l<n;l++)e(l in c?c[l]:0,[l,i],this)}}},i.prototype.toArray=function(){return l(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return l(this._values,this._index,this._ptr,this._size,!1)},i.prototype.format=function(e){for(var t=this._size[0],n=this._size[1],r=this.density(),i="Sparse Matrix ["+Za(t,e)+" x "+Za(n,e)+"] density: "+Za(r,e)+"\n",s=0;s<n;s++)for(var o=this._ptr[s],a=this._ptr[s+1],u=o;u<a;u++)i+="\n    ("+Za(this._index[u],e)+", "+Za(s,e)+") ==> "+(this._values?Za(this._values[u],e):"X");return i},i.prototype.toString=function(){return Za(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(e){if(e){if(Lo(e)&&(e=e.toNumber()),!Io(e)||!Ba(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var t=e>0?e:0,n=e<0?-e:0,r=this._size[0],s=this._size[1],o=Math.min(r-n,s-t),a=[],u=[],c=[];c[0]=0;for(var h=t;h<s&&a.length<o;h++)for(var l=this._ptr[h],p=this._ptr[h+1],f=l;f<p;f++){var d=this._index[f];if(d===h-t+n){a.push(this._values[f]),u[a.length-1]=d-n;break}}return c.push(a.length),new i({values:a,index:u,ptr:c,size:[o,1]})},i.fromJSON=function(e){return new i(e)},i.diagonal=function(e,r,s,o,a){if(!jo(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(Lo(e)&&(e=e.toNumber()),!Io(e)||!Ba(e)||e<1)throw new Error("Size values must be positive integers");return e})),s){if(Lo(s)&&(s=s.toNumber()),!Io(s)||!Ba(s))throw new TypeError("The parameter k must be an integer number")}else s=0;var u=n,c=0;Uo(a)&&(u=t.find(n,[a,a])||n,c=t.convert(0,a));var h,l=s>0?s:0,p=s<0?-s:0,f=e[0],d=e[1],m=Math.min(f-p,d-l);if(jo(r)){if(r.length!==m)throw new Error("Invalid value array length");h=function(e){return r[e]}}else if(Vo(r)){var g=r.size();if(1!==g.length||g[0]!==m)throw new Error("Invalid matrix length");h=function(e){return r.get([e])}}else h=function(){return r};for(var y=[],v=[],x=[],w=0;w<d;w++){x.push(y.length);var b=w-l;if(b>=0&&b<m){var _=h(b);u(_,c)||(v.push(b+p),y.push(_))}}return x.push(y.length),new i({values:y,index:v,ptr:x,size:[f,d]})},i.prototype.swapRows=function(e,t){if(!(Io(e)&&Ba(e)&&Io(t)&&Ba(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return iu(e,this._size[0]),iu(t,this._size[0]),i._swapRows(e,t,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(e,t,n,r,i){for(var s=r[e],o=r[e+1],a=s;a<o;a++)i(n[a],t[a])},i._swapRows=function(e,t,n,r,i,s){for(var o=0;o<n;o++){var a=s[o],c=s[o+1],h=u(e,a,c,i),l=u(t,a,c,i);if(h<c&&l<c&&i[h]===e&&i[l]===t){if(r){var p=r[h];r[h]=r[l],r[l]=p}}else if(h<c&&i[h]===e&&(l>=c||i[l]!==t)){var f=r?r[h]:void 0;i.splice(l,0,t),r&&r.splice(l,0,f),i.splice(l<=h?h+1:h,1),r&&r.splice(l<=h?h+1:h,1)}else if(l<c&&i[l]===t&&(h>=c||i[h]!==e)){var d=r?r[l]:void 0;i.splice(h,0,e),r&&r.splice(h,0,d),i.splice(h<=l?l+1:l,1),r&&r.splice(h<=l?l+1:l,1)}}},i}),{isClass:!0}),Mh=du("number",["typed"],(e=>{var{typed:t}=e,n=t("number",{"":function(){return 0},number:function(e){return e},string:function(e){if("NaN"===e)return NaN;var t=Number(e);if(isNaN(t))throw new SyntaxError('String "'+e+'" is no valid number');if(["0b","0o","0x"].includes(e.substring(0,2))){if(t>2**32-1)throw new SyntaxError('String "'.concat(e,'" is out of range'));2147483648&t&&(t=-1*~(t-1))}return t},BigNumber:function(e){return e.toNumber()},Fraction:function(e){return e.valueOf()},Unit:function(e){throw new Error("Second argument with valueless unit expected")},null:function(e){return 0},"Unit, string | Unit":function(e,t){return e.toNumber(t)},"Array | Matrix":function(e){return uh(e,this)}});return n.fromJSON=function(e){return parseFloat(e.value)},n})),Nh=du("bignumber",["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t("bignumber",{"":function(){return new n(0)},number:function(e){return new n(e+"")},string:function(e){return new n(e)},BigNumber:function(e){return e},Fraction:function(e){return new n(e.n).div(e.d).times(e.s)},null:function(e){return new n(0)},"Array | Matrix":function(e){return uh(e,this)}})})),Sh=du("fraction",["typed","Fraction"],(e=>{var{typed:t,Fraction:n}=e;return t("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new n(e)},string:function(e){return new n(e)},"number, number":function(e,t){return new n(e,t)},null:function(e){return new n(0)},BigNumber:function(e){return new n(e.toString())},Fraction:function(e){return e},Object:function(e){return new n(e)},"Array | Matrix":function(e){return uh(e,this)}})})),Th=du("matrix",["typed","Matrix","DenseMatrix","SparseMatrix"],(e=>{var{typed:t,Matrix:n,DenseMatrix:r,SparseMatrix:i}=e;return t("matrix",{"":function(){return s([])},string:function(e){return s([],e)},"string, string":function(e,t){return s([],e,t)},Array:function(e){return s(e)},Matrix:function(e){return s(e,e.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(e,t,n){if("dense"===t||"default"===t||void 0===t)return new r(e,n);if("sparse"===t)return new i(e,n);throw new TypeError("Unknown matrix type "+JSON.stringify(t)+".")}})),Oh=du("unaryMinus",["typed"],(e=>{var{typed:t}=e;return t("unaryMinus",{number:dh,Complex:function(e){return e.neg()},BigNumber:function(e){return e.neg()},Fraction:function(e){return e.neg()},Unit:function(e){var t=e.clone();return t.value=this(e.value),t},"Array | Matrix":function(e){return uh(e,this)}})})),Ch=du("abs",["typed"],(e=>{var{typed:t}=e;return t("abs",{number:lh,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},Fraction:function(e){return e.abs()},"Array | Matrix":function(e){return uh(e,this)},Unit:function(e){return e.abs()}})})),Ah=du("addScalar",["typed"],(e=>{var{typed:t}=e;return t("addScalar",{"number, number":ph,"Complex, Complex":function(e,t){return e.add(t)},"BigNumber, BigNumber":function(e,t){return e.plus(t)},"Fraction, Fraction":function(e,t){return e.add(t)},"Unit, Unit":function(e,t){if(null===e.value||void 0===e.value)throw new Error("Parameter x contains a unit with undefined value");if(null===t.value||void 0===t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=this(n.value,t.value),n.fixPrefix=!1,n}})})),zh=du("algorithm11",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i,s){var o=e._values,a=e._index,u=e._ptr,c=e._size,h=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var l,p=c[0],f=c[1],d=n,m=0,g=i;"string"==typeof h&&(l=h,d=t.find(n,[l,l]),m=t.convert(0,l),r=t.convert(r,l),g=t.find(i,[l,l]));for(var y=[],v=[],x=[],w=0;w<f;w++){x[w]=v.length;for(var b=u[w],_=u[w+1],E=b;E<_;E++){var M=a[E],N=s?g(r,o[E]):g(o[E],r);d(N,m)||(v.push(M),y.push(N))}}return x[f]=v.length,e.createSparseMatrix({values:y,index:v,ptr:x,size:[p,f],datatype:l})}})),Rh=du("algorithm14",["typed"],(e=>{var{typed:t}=e;return function(e,r,i,s){var o,a=e._data,u=e._size,c=e._datatype,h=i;"string"==typeof c&&(o=c,r=t.convert(r,o),h=t.find(i,[o,o]));var l=u.length>0?n(h,0,u,u[0],a,r,s):[];return e.createDenseMatrix({data:l,size:wa(u),datatype:o})};function n(e,t,r,i,s,o,a){var u=[];if(t===r.length-1)for(var c=0;c<i;c++)u[c]=a?e(o,s[c]):e(s[c],o);else for(var h=0;h<i;h++)u[h]=n(e,t+1,r,r[t+1],s[h],o,a);return u}})),Dh=du("ceil",["typed","config","round","matrix","equalScalar"],(e=>{var{typed:t,config:n,round:r,matrix:i,equalScalar:s}=e,o=zh({typed:t,equalScalar:s}),a=Rh({typed:t});return t("ceil",{number:function(e){return Wa(e,r(e),n.epsilon)?r(e):mh(e)},"number, number":function(e,t){if(Wa(e,r(e,t),n.epsilon))return r(e,t);var[i,s]="".concat(e,"e").split("e"),o=Math.ceil(Number("".concat(i,"e").concat(Number(s)+t)));return[i,s]="".concat(o,"e").split("e"),Number("".concat(i,"e").concat(Number(s)-t))},Complex:function(e){return e.ceil()},"Complex, number":function(e,t){return e.ceil(t)},BigNumber:function(e){return wh(e,r(e),n.epsilon)?r(e):e.ceil()},"BigNumber, BigNumber":function(e,t){return wh(e,r(e,t),n.epsilon)?r(e,t):e.toDecimalPlaces(t.toNumber(),Xc.ROUND_CEIL)},Fraction:function(e){return e.ceil()},"Fraction, number":function(e,t){return e.ceil(t)},"Array | Matrix":function(e){return uh(e,this)},"Array | Matrix, number":function(e,t){return uh(e,(e=>this(e,t)))},"SparseMatrix, number | BigNumber":function(e,t){return o(e,t,this,!1)},"DenseMatrix, number | BigNumber":function(e,t){return a(e,t,this,!1)},"number | Complex | BigNumber, Array":function(e,t){return a(i(t),e,this,!0).valueOf()}})})),kh=du("fix",["typed","Complex","matrix","ceil","floor"],(e=>{var{typed:t,Complex:n,matrix:r,ceil:i,floor:s}=e,o=Rh({typed:t});return t("fix",{number:function(e){return e>0?s(e):i(e)},"number, number | BigNumber":function(e,t){return e>0?s(e,t):i(e,t)},Complex:function(e){return new n(e.re>0?Math.floor(e.re):Math.ceil(e.re),e.im>0?Math.floor(e.im):Math.ceil(e.im))},"Complex, number | BigNumber":function(e,t){return new n(e.re>0?s(e.re,t):i(e.re,t),e.im>0?s(e.im,t):i(e.im,t))},BigNumber:function(e){return e.isNegative()?i(e):s(e)},"BigNumber, number | BigNumber":function(e,t){return e.isNegative()?i(e,t):s(e,t)},Fraction:function(e){return e.s<0?e.ceil():e.floor()},"Fraction, number | BigNumber":function(e,t){return e.s<0?e.ceil(t):e.floor(t)},"Array | Matrix":function(e){return uh(e,this)},"Array | Matrix, number | BigNumber":function(e,t){return uh(e,(e=>this(e,t)))},"number | Complex | BigNumber, Array":function(e,t){return o(r(t),e,this,!0).valueOf()}})})),Ih=du("floor",["typed","config","round","matrix","equalScalar"],(e=>{var{typed:t,config:n,round:r,matrix:i,equalScalar:s}=e,o=zh({typed:t,equalScalar:s}),a=Rh({typed:t});return t("floor",{number:function(e){return Wa(e,r(e),n.epsilon)?r(e):Math.floor(e)},"number, number":function(e,t){if(Wa(e,r(e,t),n.epsilon))return r(e,t);var[i,s]="".concat(e,"e").split("e"),o=Math.floor(Number("".concat(i,"e").concat(Number(s)+t)));return[i,s]="".concat(o,"e").split("e"),Number("".concat(i,"e").concat(Number(s)-t))},Complex:function(e){return e.floor()},"Complex, number":function(e,t){return e.floor(t)},BigNumber:function(e){return wh(e,r(e),n.epsilon)?r(e):e.floor()},"BigNumber, BigNumber":function(e,t){return wh(e,r(e,t),n.epsilon)?r(e,t):e.toDecimalPlaces(t.toNumber(),Xc.ROUND_FLOOR)},Fraction:function(e){return e.floor()},"Fraction, number":function(e,t){return e.floor(t)},"Array | Matrix":function(e){return uh(e,this)},"Array | Matrix, number":function(e,t){return uh(e,(e=>this(e,t)))},"SparseMatrix, number | BigNumber":function(e,t){return o(e,t,this,!1)},"DenseMatrix, number | BigNumber":function(e,t){return a(e,t,this,!1)},"number | Complex | BigNumber, Array":function(e,t){return a(i(t),e,this,!0).valueOf()}})})),Lh=du("algorithm01",["typed"],(e=>{var{typed:t}=e;return function(e,n,r,i){var s=e._data,o=e._size,a=e._datatype,u=n._values,c=n._index,h=n._ptr,l=n._size,p=n._datatype;if(o.length!==l.length)throw new Ka(o.length,l.length);if(o[0]!==l[0]||o[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+l+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f,d,m=o[0],g=o[1],y="string"==typeof a&&a===p?a:void 0,v=y?t.find(r,[y,y]):r,x=[];for(f=0;f<m;f++)x[f]=[];var w=[],b=[];for(d=0;d<g;d++){for(var _=d+1,E=h[d],M=h[d+1],N=E;N<M;N++)w[f=c[N]]=i?v(u[N],s[f][d]):v(s[f][d],u[N]),b[f]=_;for(f=0;f<m;f++)b[f]===_?x[f][d]=w[f]:x[f][d]=s[f][d]}return e.createDenseMatrix({data:x,size:[m,g],datatype:y})}})),Bh=du("algorithm04",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i){var s=e._values,o=e._index,a=e._ptr,u=e._size,c=e._datatype,h=r._values,l=r._index,p=r._ptr,f=r._size,d=r._datatype;if(u.length!==f.length)throw new Ka(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var m,g=u[0],y=u[1],v=n,x=0,w=i;"string"==typeof c&&c===d&&(m=c,v=t.find(n,[m,m]),x=t.convert(0,m),w=t.find(i,[m,m]));var b,_,E,M,N,S=s&&h?[]:void 0,T=[],O=[],C=s&&h?[]:void 0,A=s&&h?[]:void 0,z=[],R=[];for(_=0;_<y;_++){O[_]=T.length;var D=_+1;for(M=a[_],N=a[_+1],E=M;E<N;E++)b=o[E],T.push(b),z[b]=D,C&&(C[b]=s[E]);for(M=p[_],N=p[_+1],E=M;E<N;E++)if(z[b=l[E]]===D){if(C){var k=w(C[b],h[E]);v(k,x)?z[b]=null:C[b]=k}}else T.push(b),R[b]=D,A&&(A[b]=h[E]);if(C&&A)for(E=O[_];E<T.length;)z[b=T[E]]===D?(S[E]=C[b],E++):R[b]===D?(S[E]=A[b],E++):T.splice(E,1)}return O[y]=T.length,e.createSparseMatrix({values:S,index:T,ptr:O,size:[g,y],datatype:m})}})),Fh=du("algorithm10",["typed","DenseMatrix"],(e=>{var{typed:t,DenseMatrix:n}=e;return function(e,r,i,s){var o=e._values,a=e._index,u=e._ptr,c=e._size,h=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var l,p=c[0],f=c[1],d=i;"string"==typeof h&&(l=h,r=t.convert(r,l),d=t.find(i,[l,l]));for(var m=[],g=[],y=[],v=0;v<f;v++){for(var x=v+1,w=u[v],b=u[v+1],_=w;_<b;_++){var E=a[_];g[E]=o[_],y[E]=x}for(var M=0;M<p;M++)0===v&&(m[M]=[]),y[M]===x?m[M][v]=s?d(r,g[M]):d(g[M],r):m[M][v]=r}return new n({data:m,size:[p,f],datatype:l})}})),Ph=du("algorithm13",["typed"],(e=>{var{typed:t}=e;return function(e,r,i){var s,o=e._data,a=e._size,u=e._datatype,c=r._data,h=r._size,l=r._datatype,p=[];if(a.length!==h.length)throw new Ka(a.length,h.length);for(var f=0;f<a.length;f++){if(a[f]!==h[f])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+h+")");p[f]=a[f]}var d=i;"string"==typeof u&&u===l&&(s=u,d=t.find(i,[s,s]));var m=p.length>0?n(d,0,p,p[0],o,c):[];return e.createDenseMatrix({data:m,size:p,datatype:s})};function n(e,t,r,i,s,o){var a=[];if(t===r.length-1)for(var u=0;u<i;u++)a[u]=e(s[u],o[u]);else for(var c=0;c<i;c++)a[c]=n(e,t+1,r,r[t+1],s[c],o[c]);return a}})),Uh=du("algorithm02",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i,s){var o=e._data,a=e._size,u=e._datatype,c=r._values,h=r._index,l=r._ptr,p=r._size,f=r._datatype;if(a.length!==p.length)throw new Ka(a.length,p.length);if(a[0]!==p[0]||a[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+p+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var d,m=a[0],g=a[1],y=n,v=0,x=i;"string"==typeof u&&u===f&&(d=u,y=t.find(n,[d,d]),v=t.convert(0,d),x=t.find(i,[d,d]));for(var w=[],b=[],_=[],E=0;E<g;E++){_[E]=b.length;for(var M=l[E],N=l[E+1],S=M;S<N;S++){var T=h[S],O=s?x(c[S],o[T][E]):x(o[T][E],c[S]);y(O,v)||(b.push(T),w.push(O))}}return _[g]=b.length,r.createSparseMatrix({values:w,index:b,ptr:_,size:[m,g],datatype:d})}})),jh=du("algorithm03",["typed"],(e=>{var{typed:t}=e;return function(e,n,r,i){var s=e._data,o=e._size,a=e._datatype,u=n._values,c=n._index,h=n._ptr,l=n._size,p=n._datatype;if(o.length!==l.length)throw new Ka(o.length,l.length);if(o[0]!==l[0]||o[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+l+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f,d=o[0],m=o[1],g=0,y=r;"string"==typeof a&&a===p&&(f=a,g=t.convert(0,f),y=t.find(r,[f,f]));for(var v=[],x=0;x<d;x++)v[x]=[];for(var w=[],b=[],_=0;_<m;_++){for(var E=_+1,M=h[_],N=h[_+1],S=M;S<N;S++){var T=c[S];w[T]=i?y(u[S],s[T][_]):y(s[T][_],u[S]),b[T]=E}for(var O=0;O<d;O++)b[O]===E?v[O][_]=w[O]:v[O][_]=i?y(g,s[O][_]):y(s[O][_],g)}return e.createDenseMatrix({data:v,size:[d,m],datatype:f})}})),Vh=du("algorithm05",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i){var s=e._values,o=e._index,a=e._ptr,u=e._size,c=e._datatype,h=r._values,l=r._index,p=r._ptr,f=r._size,d=r._datatype;if(u.length!==f.length)throw new Ka(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var m,g=u[0],y=u[1],v=n,x=0,w=i;"string"==typeof c&&c===d&&(m=c,v=t.find(n,[m,m]),x=t.convert(0,m),w=t.find(i,[m,m]));var b,_,E,M,N=s&&h?[]:void 0,S=[],T=[],O=N?[]:void 0,C=N?[]:void 0,A=[],z=[];for(_=0;_<y;_++){T[_]=S.length;var R=_+1;for(E=a[_],M=a[_+1];E<M;E++)b=o[E],S.push(b),A[b]=R,O&&(O[b]=s[E]);for(E=p[_],M=p[_+1];E<M;E++)A[b=l[E]]!==R&&S.push(b),z[b]=R,C&&(C[b]=h[E]);if(N)for(E=T[_];E<S.length;){var D=A[b=S[E]],k=z[b];if(D===R||k===R){var I=w(D===R?O[b]:x,k===R?C[b]:x);v(I,x)?S.splice(E,1):(N.push(I),E++)}}}return T[y]=S.length,e.createSparseMatrix({values:N,index:S,ptr:T,size:[g,y],datatype:m})}})),qh=du("algorithm12",["typed","DenseMatrix"],(e=>{var{typed:t,DenseMatrix:n}=e;return function(e,r,i,s){var o=e._values,a=e._index,u=e._ptr,c=e._size,h=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var l,p=c[0],f=c[1],d=i;"string"==typeof h&&(l=h,r=t.convert(r,l),d=t.find(i,[l,l]));for(var m=[],g=[],y=[],v=0;v<f;v++){for(var x=v+1,w=u[v],b=u[v+1],_=w;_<b;_++){var E=a[_];g[E]=o[_],y[E]=x}for(var M=0;M<p;M++)0===v&&(m[M]=[]),y[M]===x?m[M][v]=s?d(r,g[M]):d(g[M],r):m[M][v]=s?d(r,0):d(0,r)}return new n({data:m,size:[p,f],datatype:l})}})),Hh=du("mod",["typed","matrix","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:n,equalScalar:r,DenseMatrix:i}=e,s=Uh({typed:t,equalScalar:r}),o=jh({typed:t}),a=Vh({typed:t,equalScalar:r}),u=zh({typed:t,equalScalar:r}),c=qh({typed:t,DenseMatrix:i}),h=Ph({typed:t}),l=Rh({typed:t});return t("mod",{"number, number":gh,"BigNumber, BigNumber":function(e,t){if(t.isNeg())throw new Error("Cannot calculate mod for a negative divisor");return t.isZero()?e:e.mod(t)},"Fraction, Fraction":function(e,t){if(t.compare(0)<0)throw new Error("Cannot calculate mod for a negative divisor");return e.compare(0)>=0?e.mod(t):e.mod(t).add(t).mod(t)},"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,this,!1)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return h(e,t,this)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"SparseMatrix, any":function(e,t){return u(e,t,this,!1)},"DenseMatrix, any":function(e,t){return l(e,t,this,!1)},"any, SparseMatrix":function(e,t){return c(t,e,this,!0)},"any, DenseMatrix":function(e,t){return l(t,e,this,!0)},"Array, any":function(e,t){return l(n(e),t,this,!1).valueOf()},"any, Array":function(e,t){return l(n(t),e,this,!0).valueOf()}})})),$h=du("multiplyScalar",["typed"],(e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":fh,"Complex, Complex":function(e,t){return e.mul(t)},"BigNumber, BigNumber":function(e,t){return e.times(t)},"Fraction, Fraction":function(e,t){return e.mul(t)},"number | Fraction | BigNumber | Complex, Unit":function(e,t){var n=t.clone();return n.value=null===n.value?n._normalize(e):this(n.value,e),n},"Unit, number | Fraction | BigNumber | Complex":function(e,t){var n=e.clone();return n.value=null===n.value?n._normalize(t):this(n.value,t),n},"Unit, Unit":function(e,t){return e.multiply(t)}})})),Wh=du("multiply",["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],(e=>{var{typed:t,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:s,dot:o}=e,a=zh({typed:t,equalScalar:s}),u=Rh({typed:t});function c(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+e[0]+") must match Matrix rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+e[1]+") must match Vector length ("+t[0]+")");break;case 2:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+e[1]+") must match Matrix B rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+e.length+" dimensions)")}}function h(e,n){if("dense"!==n.storage())throw new Error("Support for SparseMatrix not implemented");return function(e,n){var s,o=e._data,a=e._size,u=e._datatype,c=n._data,h=n._size,l=n._datatype,p=a[0],f=h[1],d=r,m=i;u&&l&&u===l&&"string"==typeof u&&(s=u,d=t.find(r,[s,s]),m=t.find(i,[s,s]));for(var g=[],y=0;y<f;y++){for(var v=m(o[0],c[0][y]),x=1;x<p;x++)v=d(v,m(o[x],c[x][y]));g[y]=v}return e.createDenseMatrix({data:g,size:[f],datatype:s})}(e,n)}var l=t("_multiplyMatrixVector",{"DenseMatrix, any":function(e,n){var s,o=e._data,a=e._size,u=e._datatype,c=n._data,h=n._datatype,l=a[0],p=a[1],f=r,d=i;u&&h&&u===h&&"string"==typeof u&&(s=u,f=t.find(r,[s,s]),d=t.find(i,[s,s]));for(var m=[],g=0;g<l;g++){for(var y=o[g],v=d(y[0],c[0]),x=1;x<p;x++)v=f(v,d(y[x],c[x]));m[g]=v}return e.createDenseMatrix({data:m,size:[l],datatype:s})},"SparseMatrix, any":function(e,n){var o=e._values,a=e._index,u=e._ptr,c=e._datatype;if(!o)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var h,l=n._data,p=n._datatype,f=e._size[0],d=n._size[0],m=[],g=[],y=[],v=r,x=i,w=s,b=0;c&&p&&c===p&&"string"==typeof c&&(h=c,v=t.find(r,[h,h]),x=t.find(i,[h,h]),w=t.find(s,[h,h]),b=t.convert(0,h));var _=[],E=[];y[0]=0;for(var M=0;M<d;M++){var N=l[M];if(!w(N,b))for(var S=u[M],T=u[M+1],O=S;O<T;O++){var C=a[O];E[C]?_[C]=v(_[C],x(N,o[O])):(E[C]=!0,g.push(C),_[C]=x(N,o[O]))}}for(var A=g.length,z=0;z<A;z++){var R=g[z];m[z]=_[R]}return y[1]=g.length,e.createSparseMatrix({values:m,index:g,ptr:y,size:[f,1],datatype:h})}}),p=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(e,n){var s,o=e._data,a=e._size,u=e._datatype,c=n._data,h=n._size,l=n._datatype,p=a[0],f=a[1],d=h[1],m=r,g=i;u&&l&&u===l&&"string"==typeof u&&(s=u,m=t.find(r,[s,s]),g=t.find(i,[s,s]));for(var y=[],v=0;v<p;v++){var x=o[v];y[v]=[];for(var w=0;w<d;w++){for(var b=g(x[0],c[0][w]),_=1;_<f;_++)b=m(b,g(x[_],c[_][w]));y[v][w]=b}}return e.createDenseMatrix({data:y,size:[p,d],datatype:s})},"DenseMatrix, SparseMatrix":function(e,n){var o=e._data,a=e._size,u=e._datatype,c=n._values,h=n._index,l=n._ptr,p=n._size,f=n._datatype;if(!c)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var d,m=a[0],g=p[1],y=r,v=i,x=s,w=0;u&&f&&u===f&&"string"==typeof u&&(d=u,y=t.find(r,[d,d]),v=t.find(i,[d,d]),x=t.find(s,[d,d]),w=t.convert(0,d));for(var b=[],_=[],E=[],M=n.createSparseMatrix({values:b,index:_,ptr:E,size:[m,g],datatype:d}),N=0;N<g;N++){E[N]=_.length;var S=l[N],T=l[N+1];if(T>S)for(var O=0,C=0;C<m;C++){for(var A=C+1,z=void 0,R=S;R<T;R++){var D=h[R];O!==A?(z=v(o[C][D],c[R]),O=A):z=y(z,v(o[C][D],c[R]))}O!==A||x(z,w)||(_.push(C),b.push(z))}}return E[g]=_.length,M},"SparseMatrix, DenseMatrix":function(e,n){var o=e._values,a=e._index,u=e._ptr,c=e._datatype;if(!o)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var h,l=n._data,p=n._datatype,f=e._size[0],d=n._size[0],m=n._size[1],g=r,y=i,v=s,x=0;c&&p&&c===p&&"string"==typeof c&&(h=c,g=t.find(r,[h,h]),y=t.find(i,[h,h]),v=t.find(s,[h,h]),x=t.convert(0,h));for(var w=[],b=[],_=[],E=e.createSparseMatrix({values:w,index:b,ptr:_,size:[f,m],datatype:h}),M=[],N=[],S=0;S<m;S++){_[S]=b.length;for(var T=S+1,O=0;O<d;O++){var C=l[O][S];if(!v(C,x))for(var A=u[O],z=u[O+1],R=A;R<z;R++){var D=a[R];N[D]!==T?(N[D]=T,b.push(D),M[D]=y(C,o[R])):M[D]=g(M[D],y(C,o[R]))}}for(var k=_[S],I=b.length,L=k;L<I;L++){var B=b[L];w[L]=M[B]}}return _[m]=b.length,E},"SparseMatrix, SparseMatrix":function(e,n){var s,o=e._values,a=e._index,u=e._ptr,c=e._datatype,h=n._values,l=n._index,p=n._ptr,f=n._datatype,d=e._size[0],m=n._size[1],g=o&&h,y=r,v=i;c&&f&&c===f&&"string"==typeof c&&(s=c,y=t.find(r,[s,s]),v=t.find(i,[s,s]));for(var x,w,b,_,E,M,N,S,T=g?[]:void 0,O=[],C=[],A=e.createSparseMatrix({values:T,index:O,ptr:C,size:[d,m],datatype:s}),z=g?[]:void 0,R=[],D=0;D<m;D++){C[D]=O.length;var k=D+1;for(E=p[D],M=p[D+1],_=E;_<M;_++)if(S=l[_],g)for(w=u[S],b=u[S+1],x=w;x<b;x++)R[N=a[x]]!==k?(R[N]=k,O.push(N),z[N]=v(h[_],o[x])):z[N]=y(z[N],v(h[_],o[x]));else for(w=u[S],b=u[S+1],x=w;x<b;x++)R[N=a[x]]!==k&&(R[N]=k,O.push(N));if(g)for(var I=C[D],L=O.length,B=I;B<L;B++){var F=O[B];T[B]=z[F]}}return C[m]=O.length,A}});return t("multiply",_a({"Array, Array":function(e,t){c(tu(e),tu(t));var r=this(n(e),n(t));return Vo(r)?r.valueOf():r},"Matrix, Matrix":function(e,t){var n=e.size(),r=t.size();return c(n,r),1===n.length?1===r.length?function(e,t,n){if(0===n)throw new Error("Cannot multiply two empty vectors");return o(e,t)}(e,t,n[0]):h(e,t):1===r.length?l(e,t):p(e,t)},"Matrix, Array":function(e,t){return this(e,n(t))},"Array, Matrix":function(e,t){return this(n(e,t.storage()),t)},"SparseMatrix, any":function(e,t){return a(e,t,i,!1)},"DenseMatrix, any":function(e,t){return u(e,t,i,!1)},"any, SparseMatrix":function(e,t){return a(t,e,i,!0)},"any, DenseMatrix":function(e,t){return u(t,e,i,!0)},"Array, any":function(e,t){return u(n(e),t,i,!1).valueOf()},"any, Array":function(e,t){return u(n(t),e,i,!0).valueOf()},"any, any":i,"any, any, ...any":function(e,t,n){for(var r=this(e,t),i=0;i<n.length;i++)r=this(r,n[i]);return r}},i.signatures))})),Gh=du("subtract",["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],(e=>{var{typed:t,matrix:n,equalScalar:r,addScalar:i,unaryMinus:s,DenseMatrix:o}=e,a=Lh({typed:t}),u=jh({typed:t}),c=Vh({typed:t,equalScalar:r}),h=Fh({typed:t,DenseMatrix:o}),l=Ph({typed:t}),p=Rh({typed:t});return t("subtract",{"number, number":function(e,t){return e-t},"Complex, Complex":function(e,t){return e.sub(t)},"BigNumber, BigNumber":function(e,t){return e.minus(t)},"Fraction, Fraction":function(e,t){return e.sub(t)},"Unit, Unit":function(e,t){if(null===e.value)throw new Error("Parameter x contains a unit with undefined value");if(null===t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=this(n.value,t.value),n.fixPrefix=!1,n},"SparseMatrix, SparseMatrix":function(e,t){return Yh(e,t),c(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return Yh(e,t),u(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return Yh(e,t),a(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return Yh(e,t),l(e,t,this)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"SparseMatrix, any":function(e,t){return h(e,s(t),i)},"DenseMatrix, any":function(e,t){return p(e,t,this)},"any, SparseMatrix":function(e,t){return h(t,e,this,!0)},"any, DenseMatrix":function(e,t){return p(t,e,this,!0)},"Array, any":function(e,t){return p(n(e),t,this,!1).valueOf()},"any, Array":function(e,t){return p(n(t),e,this,!0).valueOf()}})}));function Yh(e,t){var n=e.size(),r=t.size();if(n.length!==r.length)throw new Ka(n.length,r.length)}var Zh=du("algorithm07",["typed","DenseMatrix"],(e=>{var{typed:t,DenseMatrix:n}=e;return function(e,i,s){var o=e._size,a=e._datatype,u=i._size,c=i._datatype;if(o.length!==u.length)throw new Ka(o.length,u.length);if(o[0]!==u[0]||o[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+u+")");var h,l,p,f=o[0],d=o[1],m=0,g=s;"string"==typeof a&&a===c&&(h=a,m=t.convert(0,h),g=t.find(s,[h,h]));var y=[];for(l=0;l<f;l++)y[l]=[];var v=[],x=[],w=[],b=[];for(p=0;p<d;p++){var _=p+1;for(r(e,p,w,v,_),r(i,p,b,x,_),l=0;l<f;l++){var E=w[l]===_?v[l]:m,M=b[l]===_?x[l]:m;y[l][p]=g(E,M)}}return new n({data:y,size:[f,d],datatype:h})};function r(e,t,n,r,i){for(var s=e._values,o=e._index,a=e._ptr,u=a[t],c=a[t+1];u<c;u++){var h=o[u];n[h]=i,r[h]=s[u]}}})),Xh=du("conj",["typed"],(e=>{var{typed:t}=e;return t("conj",{number:function(e){return e},BigNumber:function(e){return e},Complex:function(e){return e.conjugate()},"Array | Matrix":function(e){return uh(e,this)}})}));function Jh(e){var t=0,n=1,r=Object.create(null),i=Object.create(null),s=0,o=function(e){var o=i[e];if(o&&(delete r[o],delete i[e],--t,n===o)){if(!t)return s=0,void(n=1);for(;!hasOwnProperty.call(r,++n););}};return e=Math.abs(e),{hit:function(a){var u=i[a],c=++s;if(r[c]=a,i[a]=c,!u){if(++t<=e)return;return a=r[n],o(a),a}if(delete r[u],n===u)for(;!hasOwnProperty.call(r,++n););},delete:o,clear:function(){t=s=0,n=1,r=Object.create(null),i=Object.create(null)}}}function Qh(e){var{hasher:t,limit:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=null==n?Number.POSITIVE_INFINITY:n,t=null==t?JSON.stringify:t,function r(){"object"!=typeof r.cache&&(r.cache={values:new Map,lru:Jh(n||Number.POSITIVE_INFINITY)});for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=t(i);if(r.cache.values.has(o))return r.cache.lru.hit(o),r.cache.values.get(o);var a=e.apply(e,i);return r.cache.values.set(o,a),r.cache.values.delete(r.cache.lru.hit(o)),a}}var Kh=du("identity",["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],(e=>{var{typed:t,config:n,matrix:r,BigNumber:i,DenseMatrix:s,SparseMatrix:o}=e;return t("identity",{"":function(){return"Matrix"===n.matrix?r([]):[]},string:function(e){return r(e)},"number | BigNumber":function(e){return u(e,e,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, string":function(e,t){return u(e,e,t)},"number | BigNumber, number | BigNumber":function(e,t){return u(e,t,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(e,t,n){return u(e,t,n)},Array:function(e){return a(e)},"Array, string":function(e,t){return a(e,t)},Matrix:function(e){return a(e.valueOf(),e.storage())},"Matrix, string":function(e,t){return a(e.valueOf(),t)}});function a(e,t){switch(e.length){case 0:return t?r(t):[];case 1:return u(e[0],e[0],t);case 2:return u(e[0],e[1],t);default:throw new Error("Vector containing two values expected")}}function u(e,t,n){var r=Lo(e)||Lo(t)?i:null;if(Lo(e)&&(e=e.toNumber()),Lo(t)&&(t=t.toNumber()),!Ba(e)||e<1)throw new Error("Parameters in function identity must be positive integers");if(!Ba(t)||t<1)throw new Error("Parameters in function identity must be positive integers");var a=r?new i(1):1,u=r?new r(0):0,c=[e,t];if(n){if("sparse"===n)return o.diagonal(c,a,0,u);if("dense"===n)return s.diagonal(c,a,0,u);throw new TypeError('Unknown matrix type "'.concat(n,'"'))}for(var h=su([],c,u),l=e<t?e:t,p=0;p<l;p++)h[p][p]=a;return h}}));function el(){throw new Error('No "bignumber" implementation available')}function tl(){throw new Error('No "fraction" implementation available')}function nl(e,t,n,r){if(!(this instanceof nl))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=t,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+e+" ("+t+" provided, "+n+(null!=r?"-"+r:"")+" expected)",this.stack=(new Error).stack}nl.prototype=new Error,nl.prototype.constructor=Error,nl.prototype.name="ArgumentsError",nl.prototype.isArgumentsError=!0;var rl=du("size",["typed","config","?matrix"],(e=>{var{typed:t,config:n,matrix:r}=e;return t("size",{Matrix:function(e){return e.create(e.size())},Array:tu,string:function(e){return"Array"===n.matrix?[e.length]:r([e.length])},"number | Complex | BigNumber | Unit | boolean | null":function(e){return"Array"===n.matrix?[]:r?r([]):function(){throw new Error('No "matrix" implementation available')}()}})}));function il(e,t){if(ul(e)&&ol(e,t))return e[t];if("function"==typeof e[t]&&al(e,t))throw new Error('Cannot access method "'+t+'" as a property');throw new Error('No access to property "'+t+'"')}function sl(e,t,n){if(ul(e)&&ol(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}function ol(e,t){return!(!e||"object"!=typeof e||!Oa(cl,t)&&(t in Object.prototype||t in Function.prototype))}function al(e,t){return!(null==e||"function"!=typeof e[t]||Oa(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)||!Oa(hl,t)&&(t in Object.prototype||t in Function.prototype))}function ul(e){return"object"==typeof e&&e&&e.constructor===Object}var cl={length:!0,name:!0},hl={toString:!0,valueOf:!0,toLocaleString:!0},ll=du("subset",["typed","matrix"],(e=>{var{typed:t,matrix:n}=e;return t("subset",{"Array, Index":function(e,t){var r=n(e).subset(t);return t.isScalar()?r:r.valueOf()},"Matrix, Index":function(e,t){return e.subset(t)},"Object, Index":dl,"string, Index":pl,"Array, Index, any":function(e,t,r){return n(wa(e)).subset(t,r,void 0).valueOf()},"Array, Index, any, any":function(e,t,r,i){return n(wa(e)).subset(t,r,i).valueOf()},"Matrix, Index, any":function(e,t,n){return e.clone().subset(t,n)},"Matrix, Index, any, any":function(e,t,n,r){return e.clone().subset(t,n,r)},"string, Index, string":fl,"string, Index, string, string":fl,"Object, Index, any":ml})}));function pl(e,t){if(!Go(t))throw new TypeError("Index expected");if(1!==t.size().length)throw new Ka(t.size().length,1);var n=e.length;iu(t.min()[0],n),iu(t.max()[0],n);var r=t.dimension(0),i="";return r.forEach((function(t){i+=e.charAt(t)})),i}function fl(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Index expected");if(1!==t.size().length)throw new Ka(t.size().length,1);if(void 0!==r){if("string"!=typeof r||1!==r.length)throw new TypeError("Single character expected as defaultValue")}else r=" ";var i=t.dimension(0);if(i.size()[0]!==n.length)throw new Ka(i.size()[0],n.length);var s=e.length;iu(t.min()[0]),iu(t.max()[0]);for(var o=[],a=0;a<s;a++)o[a]=e.charAt(a);if(i.forEach((function(e,t){o[e]=n.charAt(t[0])})),o.length>s)for(var u=s-1,c=o.length;u<c;u++)o[u]||(o[u]=r);return o.join("")}function dl(e,t){if(1!==t.size().length)throw new Ka(t.size(),1);var n=t.dimension(0);if("string"!=typeof n)throw new TypeError("String expected as index to retrieve an object property");return il(e,n)}function ml(e,t,n){if(1!==t.size().length)throw new Ka(t.size(),1);var r=t.dimension(0);if("string"!=typeof r)throw new TypeError("String expected as index to retrieve an object property");var i=wa(e);return sl(i,r,n),i}var gl=du("zeros",["typed","config","matrix","BigNumber"],(e=>{var{typed:t,config:n,matrix:r,BigNumber:i}=e;return t("zeros",{"":function(){return"Array"===n.matrix?s([]):s([],"default")},"...number | BigNumber | string":function(e){if("string"==typeof e[e.length-1]){var t=e.pop();return s(e,t)}return"Array"===n.matrix?s(e):s(e,"default")},Array:s,Matrix:function(e){var t=e.storage();return s(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return s(e.valueOf(),t)}});function s(e,t){var n=function(e){var t=!1;return e.forEach((function(e,n,r){Lo(e)&&(t=!0,r[n]=e.toNumber())})),t}(e)?new i(0):0;if(function(e){e.forEach((function(e){if("number"!=typeof e||!Ba(e)||e<0)throw new Error("Parameters in function zeros must be positive integers")}))}(e),t){var s=r(t);return e.length>0?s.resize(e,n):s}var o=[];return e.length>0?su(o,e,n):o}})),yl=du("format",["typed"],(e=>{var{typed:t}=e;return t("format",{any:Za,"any, Object | function | number":Za})})),vl=du("numeric",["number","?bignumber","?fraction"],(e=>{var{number:t,bignumber:n,fraction:r}=e,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:e=>t(e),BigNumber:n?e=>n(e):el,Fraction:r?e=>r(e):tl};return function(e,t){var n=xa(e);if(!(n in i))throw new TypeError("Cannot convert "+e+' of type "'+n+'"; valid input types are '+Object.keys(i).join(", "));if(!(t in s))throw new TypeError("Cannot convert "+e+' to type "'+t+'"; valid output types are '+Object.keys(s).join(", "));return t===n?e:s[t](e)}})),xl=du("divideScalar",["typed","numeric"],(e=>{var{typed:t,numeric:n}=e;return t("divideScalar",{"number, number":function(e,t){return e/t},"Complex, Complex":function(e,t){return e.div(t)},"BigNumber, BigNumber":function(e,t){return e.div(t)},"Fraction, Fraction":function(e,t){return e.div(t)},"Unit, number | Fraction | BigNumber":function(e,t){var r=e.clone(),i=n(1,xa(t));return r.value=this(null===r.value?r._normalize(i):r.value,t),r},"number | Fraction | BigNumber, Unit":function(e,t){var r=t.clone();r=r.pow(-1);var i=n(1,xa(e));return r.value=this(e,null===t.value?t._normalize(i):t.value),r},"Unit, Unit":function(e,t){return e.divide(t)}})})),wl=du("pow",["typed","config","identity","multiply","matrix","fraction","number","Complex"],(e=>{var{typed:t,config:n,identity:r,multiply:i,matrix:s,number:o,fraction:a,Complex:u}=e;return t("pow",{"number, number":c,"Complex, Complex":function(e,t){return e.pow(t)},"BigNumber, BigNumber":function(e,t){return t.isInteger()||e>=0||n.predictable?e.pow(t):new u(e.toNumber(),0).pow(t.toNumber(),0)},"Fraction, Fraction":function(e,t){if(1!==t.d){if(n.predictable)throw new Error("Function pow does not support non-integer exponents for fractions.");return c(e.valueOf(),t.valueOf())}return e.pow(t)},"Array, number":h,"Array, BigNumber":function(e,t){return h(e,t.toNumber())},"Matrix, number":l,"Matrix, BigNumber":function(e,t){return l(e,t.toNumber())},"Unit, number | BigNumber":function(e,t){return e.pow(t)}});function c(e,t){if(n.predictable&&!Ba(t)&&e<0)try{var r=a(t),i=o(r);if((t===i||Math.abs((t-i)/t)<1e-14)&&r.d%2==1)return(r.n%2==0?1:-1)*Math.pow(-e,t)}catch(e){}return n.predictable&&(e<-1&&t===1/0||e>-1&&e<0&&t===-1/0)?NaN:Ba(t)||e>=0||n.predictable?yh(e,t):e*e<1&&t===1/0||e*e>1&&t===-1/0?0:new u(e,0).pow(t,0)}function h(e,t){if(!Ba(t)||t<0)throw new TypeError("For A^b, b must be a positive integer (value is "+t+")");var n=tu(e);if(2!==n.length)throw new Error("For A^b, A must be 2 dimensional (A has "+n.length+" dimensions)");if(n[0]!==n[1])throw new Error("For A^b, A must be square (size is "+n[0]+"x"+n[1]+")");for(var s=r(n[0]).valueOf(),o=e;t>=1;)1==(1&t)&&(s=i(o,s)),t>>=1,o=i(o,o);return s}function l(e,t){return s(h(e.valueOf(),t))}}));function bl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bl(Object(n),!0).forEach((function(t){El(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function El(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ml="Number of decimals in function round must be an integer",Nl=du("round",["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],(e=>{var{typed:t,matrix:n,equalScalar:r,zeros:i,BigNumber:s,DenseMatrix:o}=e,a=zh({typed:t,equalScalar:r}),u=qh({typed:t,DenseMatrix:o}),c=Rh({typed:t});return t("round",_l(_l({},Sl),{},{Complex:function(e){return e.round()},"Complex, number":function(e,t){if(t%1)throw new TypeError(Ml);return e.round(t)},"Complex, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Ml);var n=t.toNumber();return e.round(n)},"number, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Ml);return new s(e).toDecimalPlaces(t.toNumber())},BigNumber:function(e){return e.toDecimalPlaces(0)},"BigNumber, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Ml);return e.toDecimalPlaces(t.toNumber())},Fraction:function(e){return e.round()},"Fraction, number":function(e,t){if(t%1)throw new TypeError(Ml);return e.round(t)},"Array | Matrix":function(e){return uh(e,this)},"SparseMatrix, number | BigNumber":function(e,t){return a(e,t,this,!1)},"DenseMatrix, number | BigNumber":function(e,t){return c(e,t,this,!1)},"number | Complex | BigNumber, SparseMatrix":function(e,t){return r(e,0)?i(t.size(),t.storage()):u(t,e,this,!0)},"number | Complex | BigNumber, DenseMatrix":function(e,t){return r(e,0)?i(t.size(),t.storage()):c(t,e,this,!0)},"Array, number | BigNumber":function(e,t){return c(n(e),t,this,!1).valueOf()},"number | Complex | BigNumber, Array":function(e,t){return c(n(t),e,this,!0).valueOf()}}))})),Sl={number:vh,"number, number":function(e,t){if(!Ba(t))throw new TypeError(Ml);if(t<0||t>15)throw new Error("Number of decimals in function round must be in te range of 0-15");return vh(e,t)}},Tl=du("equal",["typed","matrix","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:n,equalScalar:r,DenseMatrix:i}=e,s=jh({typed:t}),o=Zh({typed:t,DenseMatrix:i}),a=qh({typed:t,DenseMatrix:i}),u=Ph({typed:t}),c=Rh({typed:t});return t("equal",{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:r(e,t)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,r)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,r,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,r,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,r)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"SparseMatrix, any":function(e,t){return a(e,t,r,!1)},"DenseMatrix, any":function(e,t){return c(e,t,r,!1)},"any, SparseMatrix":function(e,t){return a(t,e,r,!0)},"any, DenseMatrix":function(e,t){return c(t,e,r,!0)},"Array, any":function(e,t){return c(n(e),t,r,!1).valueOf()},"any, Array":function(e,t){return c(n(t),e,r,!0).valueOf()}})}));du("equal",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return t("equal",{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:n(e,t)}})}));var Ol=du("smaller",["typed","config","matrix","DenseMatrix"],(e=>{var{typed:t,config:n,matrix:r,DenseMatrix:i}=e,s=jh({typed:t}),o=Zh({typed:t,DenseMatrix:i}),a=qh({typed:t,DenseMatrix:i}),u=Ph({typed:t}),c=Rh({typed:t});return t("smaller",{"boolean, boolean":function(e,t){return e<t},"number, number":function(e,t){return e<t&&!Wa(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.lt(t)&&!wh(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return-1===e.compare(t)},"Complex, Complex":function(e,t){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return a(e,t,this,!1)},"DenseMatrix, any":function(e,t){return c(e,t,this,!1)},"any, SparseMatrix":function(e,t){return a(t,e,this,!0)},"any, DenseMatrix":function(e,t){return c(t,e,this,!0)},"Array, any":function(e,t){return c(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return c(r(t),e,this,!0).valueOf()}})})),Cl=du("larger",["typed","config","matrix","DenseMatrix"],(e=>{var{typed:t,config:n,matrix:r,DenseMatrix:i}=e,s=jh({typed:t}),o=Zh({typed:t,DenseMatrix:i}),a=qh({typed:t,DenseMatrix:i}),u=Ph({typed:t}),c=Rh({typed:t});return t("larger",{"boolean, boolean":function(e,t){return e>t},"number, number":function(e,t){return e>t&&!Wa(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.gt(t)&&!wh(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return 1===e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return a(e,t,this,!1)},"DenseMatrix, any":function(e,t){return c(e,t,this,!1)},"any, SparseMatrix":function(e,t){return a(t,e,this,!0)},"any, DenseMatrix":function(e,t){return c(t,e,this,!0)},"Array, any":function(e,t){return c(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return c(r(t),e,this,!0).valueOf()}})})),Al=du("FibonacciHeap",["smaller","larger"],(e=>{var{smaller:t,larger:n}=e,r=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function s(e,t,n){t.left.right=t.right,t.right.left=t.left,n.degree--,n.child===t&&(n.child=t.right),0===n.degree&&(n.child=null),t.left=e,t.right=e.right,e.right=t,t.right.left=t,t.parent=null,t.mark=!1}function o(e,t){var n=t.parent;n&&(t.mark?(s(e,t,n),o(n)):t.mark=!0)}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(e,n){var r={key:e,value:n,degree:0};if(this._minimum){var i=this._minimum;r.left=i,r.right=i.right,i.right=r,r.right.left=r,t(e,i.key)&&(this._minimum=r)}else r.left=r,r.right=r,this._minimum=r;return this._size++,r},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return 0===this._size},i.prototype.extractMinimum=function(){var e=this._minimum;if(null===e)return e;for(var i=this._minimum,s=e.degree,o=e.child;s>0;){var u=o.right;o.left.right=o.right,o.right.left=o.left,o.left=i,o.right=i.right,i.right=o,o.right.left=o,o.parent=null,o=u,s--}return e.left.right=e.right,e.right.left=e.left,i=e===e.right?null:function(e,i){var s,o=Math.floor(Math.log(i)*r)+1,u=new Array(o),c=0,h=e;if(h)for(c++,h=h.right;h!==e;)c++,h=h.right;for(;c>0;){for(var l=h.degree,p=h.right;s=u[l];){if(n(h.key,s.key)){var f=s;s=h,h=f}a(s,h),u[l]=null,l++}u[l]=h,h=p,c--}e=null;for(var d=0;d<o;d++)(s=u[d])&&(e?(s.left.right=s.right,s.right.left=s.left,s.left=e,s.right=e.right,e.right=s,s.right.left=s,t(s.key,e.key)&&(e=s)):e=s);return e}(i=e.right,this._size),this._size--,this._minimum=i,e},i.prototype.remove=function(e){this._minimum=function(e,n,r){n.key=-1;var i=n.parent;return i&&t(n.key,i.key)&&(s(e,n,i),o(e,i)),t(n.key,e.key)&&(e=n),e}(this._minimum,e),this.extractMinimum()};var a=function(e,t){e.left.right=e.right,e.right.left=e.left,e.parent=t,t.child?(e.left=t.child,e.right=t.child.right,t.child.right=e,e.right.left=e):(t.child=e,e.right=e,e.left=e),t.degree++,e.mark=!1};return i}),{isClass:!0}),zl=du("Spa",["addScalar","equalScalar","FibonacciHeap"],(e=>{var{addScalar:t,equalScalar:n,FibonacciHeap:r}=e;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(e,t){if(this._values[e])this._values[e].value=t;else{var n=this._heap.insert(e,t);this._values[e]=n}},i.prototype.get=function(e){var t=this._values[e];return t?t.value:0},i.prototype.accumulate=function(e,n){var r=this._values[e];r?r.value=t(r.value,n):(r=this._heap.insert(e,n),this._values[e]=r)},i.prototype.forEach=function(e,t,r){var i=this._heap,s=this._values,o=[],a=i.extractMinimum();for(a&&o.push(a);a&&a.key<=t;)a.key>=e&&(n(a.value,0)||r(a.key,a.value,this)),(a=i.extractMinimum())&&o.push(a);for(var u=0;u<o.length;u++){var c=o[u];s[(a=i.insert(c.key,c.value)).key]=a}},i.prototype.swap=function(e,t){var n=this._values[e],r=this._values[t];if(!n&&r)n=this._heap.insert(e,r.value),this._heap.remove(r),this._values[e]=n,this._values[t]=void 0;else if(n&&!r)r=this._heap.insert(t,n.value),this._heap.remove(n),this._values[t]=r,this._values[e]=void 0;else if(n&&r){var i=n.value;n.value=r.value,r.value=i}},i}),{isClass:!0});Qh((function(e){return new e(1).exp()}),{hasher:Dl}),Qh((function(e){return new e(1).plus(new e(5).sqrt()).div(2)}),{hasher:Dl});var Rl=Qh((function(e){return e.acos(-1)}),{hasher:Dl});function Dl(e){return e[0].precision}function kl(){return(kl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Il(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ll(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Il(Object(n),!0).forEach((function(t){Bl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Il(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Qh((function(e){return Rl(e).times(2)}),{hasher:Dl});var Fl=du("Unit",["?on","config","addScalar","subtract","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],(e=>{var t,n,r,{on:i,config:s,addScalar:o,subtract:a,multiplyScalar:u,divideScalar:c,pow:h,abs:l,fix:p,round:f,equal:d,isNumeric:m,format:g,number:y,Complex:v,BigNumber:x,Fraction:w}=e,b=y;function _(e,t){if(!(this instanceof _))throw new Error("Constructor must be called with the new operator");if(null!=e&&!m(e)&&!Bo(e))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(void 0!==t&&("string"!=typeof t||""===t))throw new TypeError("Second parameter in Unit constructor must be a string");if(void 0!==t){var n=_.parse(t);this.units=n.units,this.dimensions=n.dimensions}else{this.units=[{unit:L,prefix:R.NONE,power:0}],this.dimensions=[];for(var r=0;r<D.length;r++)this.dimensions[r]=0}this.value=null!=e?this._normalize(e):null,this.fixPrefix=!1,this.skipAutomaticSimplification=!0}function E(){for(;" "===r||"\t"===r;)N()}function M(e){return e>="0"&&e<="9"}function N(){n++,r=t.charAt(n)}function S(e){n=e,r=t.charAt(n)}function T(){var e,t="",i=n;if("+"===r?N():"-"===r&&(t+=r,N()),!((e=r)>="0"&&e<="9"||"."===e))return S(i),null;if("."===r){if(t+=r,N(),!M(r))return S(i),null}else{for(;M(r);)t+=r,N();"."===r&&(t+=r,N())}for(;M(r);)t+=r,N();if("E"===r||"e"===r){var s="",o=n;if(s+=r,N(),"+"!==r&&"-"!==r||(s+=r,N()),!M(r))return S(o),t;for(t+=s;M(r);)t+=r,N()}return t}function O(){for(var e="";M(r)||_.isValidAlpha(r);)e+=r,N();var t=e.charAt(0);return _.isValidAlpha(t)?e:null}function C(e){return r===e?(N(),e):null}_.prototype.type="Unit",_.prototype.isUnit=!0,_.parse=function(e,i){if(i=i||{},n=-1,r="","string"!=typeof(t=e))throw new TypeError("Invalid argument in Unit.parse, string expected");var o=new _;o.units=[];var a=1,u=!1;N(),E();var c=T(),h=null;if(c){if("BigNumber"===s.number)h=new x(c);else if("Fraction"===s.number)try{h=new w(c)}catch(e){h=parseFloat(c)}else h=parseFloat(c);E(),C("*")?(a=1,u=!0):C("/")&&(a=-1,u=!0)}for(var l=[],p=1;;){for(E();"("===r;)l.push(a),p*=a,a=1,N(),E();var f;if(!r)break;var d=r;if(null===(f=O()))throw new SyntaxError('Unexpected "'+d+'" in "'+t+'" at index '+n.toString());var m=A(f);if(null===m)throw new SyntaxError('Unit "'+f+'" not found.');var g=a*p;if(E(),C("^")){E();var y=T();if(null===y)throw new SyntaxError('In "'+e+'", "^" must be followed by a floating-point number');g*=y}o.units.push({unit:m.unit,prefix:m.prefix,power:g});for(var v=0;v<D.length;v++)o.dimensions[v]+=(m.unit.dimensions[v]||0)*g;for(E();")"===r;){if(0===l.length)throw new SyntaxError('Unmatched ")" in "'+t+'" at index '+n.toString());p/=l.pop(),N(),E()}if(u=!1,C("*")?(a=1,u=!0):C("/")?(a=-1,u=!0):a=1,m.unit.base){var b=m.unit.base.key;U.auto[b]={unit:m.unit,prefix:m.prefix}}}if(E(),r)throw new SyntaxError('Could not parse: "'+e+'"');if(u)throw new SyntaxError('Trailing characters: "'+e+'"');if(0!==l.length)throw new SyntaxError('Unmatched "(" in "'+t+'"');if(0===o.units.length&&!i.allowNoUnits)throw new SyntaxError('"'+e+'" contains no units');return o.value=void 0!==h?o._normalize(h):null,o},_.prototype.clone=function(){var e=new _;e.fixPrefix=this.fixPrefix,e.skipAutomaticSimplification=this.skipAutomaticSimplification,e.value=wa(this.value),e.dimensions=this.dimensions.slice(0),e.units=[];for(var t=0;t<this.units.length;t++)for(var n in e.units[t]={},this.units[t])Oa(this.units[t],n)&&(e.units[t][n]=this.units[t][n]);return e},_.prototype._isDerived=function(){return 0!==this.units.length&&(this.units.length>1||Math.abs(this.units[0].power-1)>1e-15)},_.prototype._normalize=function(e){var t,n,r,i,s;if(null==e||0===this.units.length)return e;if(this._isDerived()){var a=e;s=_._getNumberConverter(xa(e));for(var c=0;c<this.units.length;c++)t=s(this.units[c].unit.value),i=s(this.units[c].prefix.value),r=s(this.units[c].power),a=u(a,h(u(t,i),r));return a}return t=(s=_._getNumberConverter(xa(e)))(this.units[0].unit.value),n=s(this.units[0].unit.offset),i=s(this.units[0].prefix.value),u(o(e,n),u(t,i))},_.prototype._denormalize=function(e,t){var n,r,i,s,o;if(null==e||0===this.units.length)return e;if(this._isDerived()){var l=e;o=_._getNumberConverter(xa(e));for(var p=0;p<this.units.length;p++)n=o(this.units[p].unit.value),s=o(this.units[p].prefix.value),i=o(this.units[p].power),l=c(l,h(u(n,s),i));return l}return n=(o=_._getNumberConverter(xa(e)))(this.units[0].unit.value),s=o(this.units[0].prefix.value),r=o(this.units[0].unit.offset),a(c(c(e,n),null==t?s:t),r)};var A=Qh((e=>{if(Oa(B,e)){var t=B[e];return{unit:t,prefix:t.prefixes[""]}}for(var n in B)if(Oa(B,n)&&Ya(e,n)){var r=B[n],i=e.length-n.length,s=e.substring(0,i),o=Oa(r.prefixes,s)?r.prefixes[s]:void 0;if(void 0!==o)return{unit:r,prefix:o}}return null}),{hasher:e=>e[0],limit:100});function z(e){return e.equalBase(k.NONE)&&null!==e.value&&!s.predictable?e.value:e}_.isValuelessUnit=function(e){return null!==A(e)},_.prototype.hasBase=function(e){if("string"==typeof e&&(e=k[e]),!e)return!1;for(var t=0;t<D.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;return!0},_.prototype.equalBase=function(e){for(var t=0;t<D.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;return!0},_.prototype.equals=function(e){return this.equalBase(e)&&d(this.value,e.value)},_.prototype.multiply=function(e){for(var t=this.clone(),n=0;n<D.length;n++)t.dimensions[n]=(this.dimensions[n]||0)+(e.dimensions[n]||0);for(var r=0;r<e.units.length;r++){var i=Ll({},e.units[r]);t.units.push(i)}if(null!==this.value||null!==e.value){var s=null===this.value?this._normalize(1):this.value,o=null===e.value?e._normalize(1):e.value;t.value=u(s,o)}else t.value=null;return t.skipAutomaticSimplification=!1,z(t)},_.prototype.divide=function(e){for(var t=this.clone(),n=0;n<D.length;n++)t.dimensions[n]=(this.dimensions[n]||0)-(e.dimensions[n]||0);for(var r=0;r<e.units.length;r++){var i=Ll(Ll({},e.units[r]),{},{power:-e.units[r].power});t.units.push(i)}if(null!==this.value||null!==e.value){var s=null===this.value?this._normalize(1):this.value,o=null===e.value?e._normalize(1):e.value;t.value=c(s,o)}else t.value=null;return t.skipAutomaticSimplification=!1,z(t)},_.prototype.pow=function(e){for(var t=this.clone(),n=0;n<D.length;n++)t.dimensions[n]=(this.dimensions[n]||0)*e;for(var r=0;r<t.units.length;r++)t.units[r].power*=e;return null!==t.value?t.value=h(t.value,e):t.value=null,t.skipAutomaticSimplification=!1,z(t)},_.prototype.abs=function(){var e=this.clone();for(var t in e.value=null!==e.value?l(e.value):null,e.units)"VA"!==e.units[t].unit.name&&"VAR"!==e.units[t].unit.name||(e.units[t].unit=B.W);return e},_.prototype.to=function(e){var t,n=null===this.value?this._normalize(1):this.value;if("string"==typeof e){if(t=_.parse(e),!this.equalBase(t))throw new Error("Units do not match ('".concat(t.toString(),"' != '").concat(this.toString(),"')"));if(null!==t.value)throw new Error("Cannot convert to a unit with a value");return t.value=wa(n),t.fixPrefix=!0,t.skipAutomaticSimplification=!0,t}if(Po(e)){if(!this.equalBase(e))throw new Error("Units do not match ('".concat(e.toString(),"' != '").concat(this.toString(),"')"));if(null!==e.value)throw new Error("Cannot convert to a unit with a value");return(t=e.clone()).value=wa(n),t.fixPrefix=!0,t.skipAutomaticSimplification=!0,t}throw new Error("String or Unit expected as parameter")},_.prototype.toNumber=function(e){return b(this.toNumeric(e))},_.prototype.toNumeric=function(e){var t;return(t=e?this.to(e):this.clone())._isDerived()||0===t.units.length?t._denormalize(t.value):t._denormalize(t.value,t.units[0].prefix.value)},_.prototype.toString=function(){return this.format()},_.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},_.fromJSON=function(e){var t=new _(e.value,e.unit);return t.fixPrefix=e.fixPrefix||!1,t},_.prototype.valueOf=_.prototype.toString,_.prototype.simplify=function(){var e,t,n=this.clone(),r=[];for(var i in j)if(Oa(j,i)&&n.hasBase(k[i])){e=i;break}if("NONE"===e)n.units=[];else if(e&&Oa(j,e)&&(t=j[e]),t)n.units=[{unit:t.unit,prefix:t.prefix,power:1}];else{for(var s=!1,o=0;o<D.length;o++){var a=D[o];Math.abs(n.dimensions[o]||0)>1e-12&&(Oa(j,a)?r.push({unit:j[a].unit,prefix:j[a].prefix,power:n.dimensions[o]||0}):s=!0)}r.length<n.units.length&&!s&&(n.units=r)}return n},_.prototype.toSI=function(){for(var e=this.clone(),t=[],n=0;n<D.length;n++){var r=D[n];if(Math.abs(e.dimensions[n]||0)>1e-12){if(!Oa(U.si,r))throw new Error("Cannot express custom unit "+r+" in SI units");t.push({unit:U.si[r].unit,prefix:U.si[r].prefix,power:e.dimensions[n]||0})}}return e.units=t,e.fixPrefix=!0,e.skipAutomaticSimplification=!0,e},_.prototype.formatUnits=function(){for(var e="",t="",n=0,r=0,i=0;i<this.units.length;i++)this.units[i].power>0?(n++,e+=" "+this.units[i].prefix.name+this.units[i].unit.name,Math.abs(this.units[i].power-1)>1e-15&&(e+="^"+this.units[i].power)):this.units[i].power<0&&r++;if(r>0)for(var s=0;s<this.units.length;s++)this.units[s].power<0&&(n>0?(t+=" "+this.units[s].prefix.name+this.units[s].unit.name,Math.abs(this.units[s].power+1)>1e-15&&(t+="^"+-this.units[s].power)):(t+=" "+this.units[s].prefix.name+this.units[s].unit.name,t+="^"+this.units[s].power));e=e.substr(1),t=t.substr(1),n>1&&r>0&&(e="("+e+")"),r>1&&n>0&&(t="("+t+")");var o=e;return n>0&&r>0&&(o+=" / "),o+t},_.prototype.format=function(e){var t=this.skipAutomaticSimplification||null===this.value?this.clone():this.simplify(),n=!1;for(var r in void 0!==t.value&&null!==t.value&&Bo(t.value)&&(n=Math.abs(t.value.re)<1e-14),t.units)Oa(t.units,r)&&t.units[r].unit&&("VA"===t.units[r].unit.name&&n?t.units[r].unit=B.VAR:"VAR"!==t.units[r].unit.name||n||(t.units[r].unit=B.VA));1!==t.units.length||t.fixPrefix||Math.abs(t.units[0].power-Math.round(t.units[0].power))<1e-14&&(t.units[0].prefix=t._bestPrefix());var i=t._denormalize(t.value),s=null!==t.value?g(i,e||{}):"",o=t.formatUnits();return t.value&&Bo(t.value)&&(s="("+s+")"),o.length>0&&s.length>0&&(s+=" "),s+o},_.prototype._bestPrefix=function(){if(1!==this.units.length)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var e=null!==this.value?l(this.value):0,t=l(this.units[0].unit.value),n=this.units[0].prefix;if(0===e)return n;var r=this.units[0].power,i=Math.log(e/Math.pow(n.value*t,r))/Math.LN10-1.2;if(i>-2.200001&&i<1.800001)return n;i=Math.abs(i);var s=this.units[0].unit.prefixes;for(var o in s)if(Oa(s,o)){var a=s[o];if(a.scientific){var u=Math.abs(Math.log(e/Math.pow(a.value*t,r))/Math.LN10-1.2);(u<i||u===i&&a.name.length<n.name.length)&&(n=a,i=u)}}return n},_.prototype.splitUnit=function(e){for(var t=this.clone(),n=[],r=0;r<e.length&&(t=t.to(e[r]),r!==e.length-1);r++){var i=t.toNumeric(),s=f(i),u=new _(d(s,i)?s:p(t.toNumeric()),e[r].toString());n.push(u),t=a(t,u)}for(var c=0,h=0;h<n.length;h++)c=o(c,n[h].value);return d(c,this.value)&&(t.value=0),n.push(t),n};var R={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};R.SHORTLONG=kl({},R.SHORT,R.LONG),R.BINARY_SHORT=kl({},R.BINARY_SHORT_SI,R.BINARY_SHORT_IEC),R.BINARY_LONG=kl({},R.BINARY_LONG_SI,R.BINARY_LONG_IEC);var D=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],k={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var I in k)Oa(k,I)&&(k[I].key=I);var L={name:"",base:{},value:1,offset:0,dimensions:D.map((e=>0))},B={meter:{name:"meter",base:k.LENGTH,prefixes:R.LONG,value:1,offset:0},inch:{name:"inch",base:k.LENGTH,prefixes:R.NONE,value:.0254,offset:0},foot:{name:"foot",base:k.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yard:{name:"yard",base:k.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mile:{name:"mile",base:k.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},link:{name:"link",base:k.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rod:{name:"rod",base:k.LENGTH,prefixes:R.NONE,value:5.0292,offset:0},chain:{name:"chain",base:k.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:k.LENGTH,prefixes:R.NONE,value:1e-10,offset:0},m:{name:"m",base:k.LENGTH,prefixes:R.SHORT,value:1,offset:0},in:{name:"in",base:k.LENGTH,prefixes:R.NONE,value:.0254,offset:0},ft:{name:"ft",base:k.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yd:{name:"yd",base:k.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mi:{name:"mi",base:k.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},li:{name:"li",base:k.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rd:{name:"rd",base:k.LENGTH,prefixes:R.NONE,value:5.02921,offset:0},ch:{name:"ch",base:k.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},mil:{name:"mil",base:k.LENGTH,prefixes:R.NONE,value:254e-7,offset:0},m2:{name:"m2",base:k.SURFACE,prefixes:R.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:k.SURFACE,prefixes:R.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:k.SURFACE,prefixes:R.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:k.SURFACE,prefixes:R.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:k.SURFACE,prefixes:R.NONE,value:2589988.110336,offset:0},sqrd:{name:"sqrd",base:k.SURFACE,prefixes:R.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:k.SURFACE,prefixes:R.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:k.SURFACE,prefixes:R.NONE,value:6.4516e-10,offset:0},acre:{name:"acre",base:k.SURFACE,prefixes:R.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:k.SURFACE,prefixes:R.NONE,value:1e4,offset:0},m3:{name:"m3",base:k.VOLUME,prefixes:R.CUBIC,value:1,offset:0},L:{name:"L",base:k.VOLUME,prefixes:R.SHORT,value:.001,offset:0},l:{name:"l",base:k.VOLUME,prefixes:R.SHORT,value:.001,offset:0},litre:{name:"litre",base:k.VOLUME,prefixes:R.LONG,value:.001,offset:0},cuin:{name:"cuin",base:k.VOLUME,prefixes:R.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:k.VOLUME,prefixes:R.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:k.VOLUME,prefixes:R.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:k.VOLUME,prefixes:R.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:k.VOLUME,prefixes:R.NONE,value:15e-6,offset:0},drop:{name:"drop",base:k.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:k.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},minim:{name:"minim",base:k.VOLUME,prefixes:R.NONE,value:6.161152e-8,offset:0},fluiddram:{name:"fluiddram",base:k.VOLUME,prefixes:R.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:k.VOLUME,prefixes:R.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:k.VOLUME,prefixes:R.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:k.VOLUME,prefixes:R.NONE,value:1e-6,offset:0},cup:{name:"cup",base:k.VOLUME,prefixes:R.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:k.VOLUME,prefixes:R.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:k.VOLUME,prefixes:R.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:k.VOLUME,prefixes:R.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:k.VOLUME,prefixes:R.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:k.VOLUME,prefixes:R.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:k.VOLUME,prefixes:R.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:k.VOLUME,prefixes:R.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:k.VOLUME,prefixes:R.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:k.VOLUME,prefixes:R.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:k.VOLUME,prefixes:R.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:k.VOLUME,prefixes:R.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:k.VOLUME,prefixes:R.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:k.VOLUME,prefixes:R.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:k.VOLUME,prefixes:R.NONE,value:.1173478,offset:0},obl:{name:"obl",base:k.VOLUME,prefixes:R.NONE,value:.1589873,offset:0},g:{name:"g",base:k.MASS,prefixes:R.SHORT,value:.001,offset:0},gram:{name:"gram",base:k.MASS,prefixes:R.LONG,value:.001,offset:0},ton:{name:"ton",base:k.MASS,prefixes:R.SHORT,value:907.18474,offset:0},t:{name:"t",base:k.MASS,prefixes:R.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:k.MASS,prefixes:R.LONG,value:1e3,offset:0},grain:{name:"grain",base:k.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:k.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:k.MASS,prefixes:R.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:k.MASS,prefixes:R.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:k.MASS,prefixes:R.NONE,value:45.359237,offset:0},stick:{name:"stick",base:k.MASS,prefixes:R.NONE,value:.115,offset:0},stone:{name:"stone",base:k.MASS,prefixes:R.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:k.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:k.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:k.MASS,prefixes:R.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:k.MASS,prefixes:R.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:k.MASS,prefixes:R.NONE,value:45.359237,offset:0},s:{name:"s",base:k.TIME,prefixes:R.SHORT,value:1,offset:0},min:{name:"min",base:k.TIME,prefixes:R.NONE,value:60,offset:0},h:{name:"h",base:k.TIME,prefixes:R.NONE,value:3600,offset:0},second:{name:"second",base:k.TIME,prefixes:R.LONG,value:1,offset:0},sec:{name:"sec",base:k.TIME,prefixes:R.LONG,value:1,offset:0},minute:{name:"minute",base:k.TIME,prefixes:R.NONE,value:60,offset:0},hour:{name:"hour",base:k.TIME,prefixes:R.NONE,value:3600,offset:0},day:{name:"day",base:k.TIME,prefixes:R.NONE,value:86400,offset:0},week:{name:"week",base:k.TIME,prefixes:R.NONE,value:604800,offset:0},month:{name:"month",base:k.TIME,prefixes:R.NONE,value:2629800,offset:0},year:{name:"year",base:k.TIME,prefixes:R.NONE,value:31557600,offset:0},decade:{name:"decade",base:k.TIME,prefixes:R.NONE,value:315576e3,offset:0},century:{name:"century",base:k.TIME,prefixes:R.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:k.TIME,prefixes:R.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:k.FREQUENCY,prefixes:R.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:k.FREQUENCY,prefixes:R.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:k.ANGLE,prefixes:R.SHORT,value:1,offset:0},radian:{name:"radian",base:k.ANGLE,prefixes:R.LONG,value:1,offset:0},deg:{name:"deg",base:k.ANGLE,prefixes:R.SHORT,value:null,offset:0},degree:{name:"degree",base:k.ANGLE,prefixes:R.LONG,value:null,offset:0},grad:{name:"grad",base:k.ANGLE,prefixes:R.SHORT,value:null,offset:0},gradian:{name:"gradian",base:k.ANGLE,prefixes:R.LONG,value:null,offset:0},cycle:{name:"cycle",base:k.ANGLE,prefixes:R.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:k.ANGLE,prefixes:R.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:k.ANGLE,prefixes:R.NONE,value:null,offset:0},A:{name:"A",base:k.CURRENT,prefixes:R.SHORT,value:1,offset:0},ampere:{name:"ampere",base:k.CURRENT,prefixes:R.LONG,value:1,offset:0},K:{name:"K",base:k.TEMPERATURE,prefixes:R.NONE,value:1,offset:0},degC:{name:"degC",base:k.TEMPERATURE,prefixes:R.NONE,value:1,offset:273.15},degF:{name:"degF",base:k.TEMPERATURE,prefixes:R.NONE,value:1/1.8,offset:459.67},degR:{name:"degR",base:k.TEMPERATURE,prefixes:R.NONE,value:1/1.8,offset:0},kelvin:{name:"kelvin",base:k.TEMPERATURE,prefixes:R.NONE,value:1,offset:0},celsius:{name:"celsius",base:k.TEMPERATURE,prefixes:R.NONE,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:k.TEMPERATURE,prefixes:R.NONE,value:1/1.8,offset:459.67},rankine:{name:"rankine",base:k.TEMPERATURE,prefixes:R.NONE,value:1/1.8,offset:0},mol:{name:"mol",base:k.AMOUNT_OF_SUBSTANCE,prefixes:R.SHORT,value:1,offset:0},mole:{name:"mole",base:k.AMOUNT_OF_SUBSTANCE,prefixes:R.LONG,value:1,offset:0},cd:{name:"cd",base:k.LUMINOUS_INTENSITY,prefixes:R.SHORT,value:1,offset:0},candela:{name:"candela",base:k.LUMINOUS_INTENSITY,prefixes:R.LONG,value:1,offset:0},N:{name:"N",base:k.FORCE,prefixes:R.SHORT,value:1,offset:0},newton:{name:"newton",base:k.FORCE,prefixes:R.LONG,value:1,offset:0},dyn:{name:"dyn",base:k.FORCE,prefixes:R.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:k.FORCE,prefixes:R.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:k.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:k.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:k.FORCE,prefixes:R.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:k.FORCE,prefixes:R.NONE,value:9.80665,offset:0},J:{name:"J",base:k.ENERGY,prefixes:R.SHORT,value:1,offset:0},joule:{name:"joule",base:k.ENERGY,prefixes:R.SHORT,value:1,offset:0},erg:{name:"erg",base:k.ENERGY,prefixes:R.NONE,value:1e-7,offset:0},Wh:{name:"Wh",base:k.ENERGY,prefixes:R.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:k.ENERGY,prefixes:R.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:k.ENERGY,prefixes:R.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:k.ENERGY,prefixes:R.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:k.POWER,prefixes:R.SHORT,value:1,offset:0},watt:{name:"watt",base:k.POWER,prefixes:R.LONG,value:1,offset:0},hp:{name:"hp",base:k.POWER,prefixes:R.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:k.POWER,prefixes:R.SHORT,value:v.I,offset:0},VA:{name:"VA",base:k.POWER,prefixes:R.SHORT,value:1,offset:0},Pa:{name:"Pa",base:k.PRESSURE,prefixes:R.SHORT,value:1,offset:0},psi:{name:"psi",base:k.PRESSURE,prefixes:R.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:k.PRESSURE,prefixes:R.NONE,value:101325,offset:0},bar:{name:"bar",base:k.PRESSURE,prefixes:R.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:k.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:k.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:k.PRESSURE,prefixes:R.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:k.PRESSURE,prefixes:R.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:k.ELECTRIC_CHARGE,prefixes:R.LONG,value:1,offset:0},C:{name:"C",base:k.ELECTRIC_CHARGE,prefixes:R.SHORT,value:1,offset:0},farad:{name:"farad",base:k.ELECTRIC_CAPACITANCE,prefixes:R.LONG,value:1,offset:0},F:{name:"F",base:k.ELECTRIC_CAPACITANCE,prefixes:R.SHORT,value:1,offset:0},volt:{name:"volt",base:k.ELECTRIC_POTENTIAL,prefixes:R.LONG,value:1,offset:0},V:{name:"V",base:k.ELECTRIC_POTENTIAL,prefixes:R.SHORT,value:1,offset:0},ohm:{name:"ohm",base:k.ELECTRIC_RESISTANCE,prefixes:R.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:k.ELECTRIC_INDUCTANCE,prefixes:R.LONG,value:1,offset:0},H:{name:"H",base:k.ELECTRIC_INDUCTANCE,prefixes:R.SHORT,value:1,offset:0},siemens:{name:"siemens",base:k.ELECTRIC_CONDUCTANCE,prefixes:R.LONG,value:1,offset:0},S:{name:"S",base:k.ELECTRIC_CONDUCTANCE,prefixes:R.SHORT,value:1,offset:0},weber:{name:"weber",base:k.MAGNETIC_FLUX,prefixes:R.LONG,value:1,offset:0},Wb:{name:"Wb",base:k.MAGNETIC_FLUX,prefixes:R.SHORT,value:1,offset:0},tesla:{name:"tesla",base:k.MAGNETIC_FLUX_DENSITY,prefixes:R.LONG,value:1,offset:0},T:{name:"T",base:k.MAGNETIC_FLUX_DENSITY,prefixes:R.SHORT,value:1,offset:0},b:{name:"b",base:k.BIT,prefixes:R.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:k.BIT,prefixes:R.BINARY_LONG,value:1,offset:0},B:{name:"B",base:k.BIT,prefixes:R.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:k.BIT,prefixes:R.BINARY_LONG,value:8,offset:0}},F={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function P(e){if("BigNumber"===e.number){var t=Rl(x);B.rad.value=new x(1),B.deg.value=t.div(180),B.grad.value=t.div(200),B.cycle.value=t.times(2),B.arcsec.value=t.div(648e3),B.arcmin.value=t.div(10800)}else B.rad.value=1,B.deg.value=Math.PI/180,B.grad.value=Math.PI/200,B.cycle.value=2*Math.PI,B.arcsec.value=Math.PI/648e3,B.arcmin.value=Math.PI/10800;B.radian.value=B.rad.value,B.degree.value=B.deg.value,B.gradian.value=B.grad.value}P(s),i&&i("config",(function(e,t){e.number!==t.number&&P(e)}));var U={si:{NONE:{unit:L,prefix:R.NONE[""]},LENGTH:{unit:B.m,prefix:R.SHORT[""]},MASS:{unit:B.g,prefix:R.SHORT.k},TIME:{unit:B.s,prefix:R.SHORT[""]},CURRENT:{unit:B.A,prefix:R.SHORT[""]},TEMPERATURE:{unit:B.K,prefix:R.SHORT[""]},LUMINOUS_INTENSITY:{unit:B.cd,prefix:R.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:B.mol,prefix:R.SHORT[""]},ANGLE:{unit:B.rad,prefix:R.SHORT[""]},BIT:{unit:B.bits,prefix:R.SHORT[""]},FORCE:{unit:B.N,prefix:R.SHORT[""]},ENERGY:{unit:B.J,prefix:R.SHORT[""]},POWER:{unit:B.W,prefix:R.SHORT[""]},PRESSURE:{unit:B.Pa,prefix:R.SHORT[""]},ELECTRIC_CHARGE:{unit:B.C,prefix:R.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:B.F,prefix:R.SHORT[""]},ELECTRIC_POTENTIAL:{unit:B.V,prefix:R.SHORT[""]},ELECTRIC_RESISTANCE:{unit:B.ohm,prefix:R.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:B.H,prefix:R.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:B.S,prefix:R.SHORT[""]},MAGNETIC_FLUX:{unit:B.Wb,prefix:R.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:B.T,prefix:R.SHORT[""]},FREQUENCY:{unit:B.Hz,prefix:R.SHORT[""]}}};U.cgs=JSON.parse(JSON.stringify(U.si)),U.cgs.LENGTH={unit:B.m,prefix:R.SHORT.c},U.cgs.MASS={unit:B.g,prefix:R.SHORT[""]},U.cgs.FORCE={unit:B.dyn,prefix:R.SHORT[""]},U.cgs.ENERGY={unit:B.erg,prefix:R.NONE[""]},U.us=JSON.parse(JSON.stringify(U.si)),U.us.LENGTH={unit:B.ft,prefix:R.NONE[""]},U.us.MASS={unit:B.lbm,prefix:R.NONE[""]},U.us.TEMPERATURE={unit:B.degF,prefix:R.NONE[""]},U.us.FORCE={unit:B.lbf,prefix:R.NONE[""]},U.us.ENERGY={unit:B.BTU,prefix:R.BTU[""]},U.us.POWER={unit:B.hp,prefix:R.NONE[""]},U.us.PRESSURE={unit:B.psi,prefix:R.NONE[""]},U.auto=JSON.parse(JSON.stringify(U.si));var j=U.auto;for(var V in _.setUnitSystem=function(e){if(!Oa(U,e))throw new Error("Unit system "+e+" does not exist. Choices are: "+Object.keys(U).join(", "));j=U[e]},_.getUnitSystem=function(){for(var e in U)if(Oa(U,e)&&U[e]===j)return e},_.typeConverters={BigNumber:function(e){return new x(e+"")},Fraction:function(e){return new w(e)},Complex:function(e){return e},number:function(e){return e}},_._getNumberConverter=function(e){if(!_.typeConverters[e])throw new TypeError('Unsupported type "'+e+'"');return _.typeConverters[e]},B)if(Oa(B,V)){var q=B[V];q.dimensions=q.base.dimensions}for(var H in F)if(Oa(F,H)){var $=B[F[H]],W={};for(var G in $)Oa($,G)&&(W[G]=$[G]);W.name=H,B[H]=W}return _.isValidAlpha=function(e){return/^[a-zA-Z]$/.test(e)},_.createUnit=function(e,t){if("object"!=typeof e)throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(t&&t.override)for(var n in e)if(Oa(e,n)&&_.deleteUnit(n),e[n].aliases)for(var r=0;r<e[n].aliases.length;r++)_.deleteUnit(e[n].aliases[r]);var i;for(var s in e)Oa(e,s)&&(i=_.createUnitSingle(s,e[s]));return i},_.createUnitSingle=function(e,t,n){if(null==t&&(t={}),"string"!=typeof e)throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Oa(B,e))throw new Error('Cannot create unit "'+e+'": a unit with that name already exists');!function(e){for(var t=0;t<e.length;t++){if(r=e.charAt(t),0===t&&!_.isValidAlpha(r))throw new Error('Invalid unit name (must begin with alpha character): "'+e+'"');if(t>0&&!_.isValidAlpha(r)&&!M(r))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+e+'"')}}(e);var i,s,o,a=null,u=[],c=0;if(t&&"Unit"===t.type)a=t.clone();else if("string"==typeof t)""!==t&&(i=t);else{if("object"!=typeof t)throw new TypeError('Cannot create unit "'+e+'" from "'+t.toString()+'": expecting "string" or "Unit" or "Object"');i=t.definition,s=t.prefixes,c=t.offset,o=t.baseName,t.aliases&&(u=t.aliases.valueOf())}if(u)for(var h=0;h<u.length;h++)if(Oa(B,u[h]))throw new Error('Cannot create alias "'+u[h]+'": a unit with that name already exists');if(i&&"string"==typeof i&&!a)try{a=_.parse(i,{allowNoUnits:!0})}catch(t){throw t.message='Could not create unit "'+e+'" from "'+i+'": '+t.message,t}else i&&"Unit"===i.type&&(a=i.clone());u=u||[],c=c||0,s=s&&s.toUpperCase&&R[s.toUpperCase()]||R.NONE;var l={};if(a){l={name:e,value:a.value,dimensions:a.dimensions.slice(0),prefixes:s,offset:c};var p=!1;for(var f in k)if(Oa(k,f)){for(var d=!0,m=0;m<D.length;m++)if(Math.abs((l.dimensions[m]||0)-(k[f].dimensions[m]||0))>1e-12){d=!1;break}if(d){p=!0,l.base=k[f];break}}if(!p){o=o||e+"_STUFF";var g={dimensions:a.dimensions.slice(0)};g.key=o,k[o]=g,j[o]={unit:l,prefix:R.NONE[""]},l.base=k[o]}}else{if(o=o||e+"_STUFF",D.indexOf(o)>=0)throw new Error('Cannot create new base unit "'+e+'": a base unit with that name already exists (and cannot be overridden)');for(var y in D.push(o),k)Oa(k,y)&&(k[y].dimensions[D.length-1]=0);for(var v={dimensions:[]},x=0;x<D.length;x++)v.dimensions[x]=0;v.dimensions[D.length-1]=1,v.key=o,k[o]=v,l={name:e,value:1,dimensions:k[o].dimensions.slice(0),prefixes:s,offset:c,base:k[o]},j[o]={unit:l,prefix:R.NONE[""]}}_.UNITS[e]=l;for(var w=0;w<u.length;w++){var b=u[w],E={};for(var N in l)Oa(l,N)&&(E[N]=l[N]);E.name=b,_.UNITS[b]=E}return delete A.cache,new _(null,e)},_.deleteUnit=function(e){delete _.UNITS[e]},_.PREFIXES=R,_.BASE_DIMENSIONS=D,_.BASE_UNITS=k,_.UNIT_SYSTEMS=U,_.UNITS=B,_}),{isClass:!0}),Pl=du("unit",["typed","Unit"],(e=>{var{typed:t,Unit:n}=e;return t("unit",{Unit:function(e){return e.clone()},string:function(e){return n.isValuelessUnit(e)?new n(null,e):n.parse(e,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string":function(e,t){return new n(e,t)},"Array | Matrix":function(e){return uh(e,this)}})})),Ul=du("createUnit",["typed","Unit"],(e=>{var{typed:t,Unit:n}=e;return t("createUnit",{"Object, Object":function(e,t){return n.createUnit(e,t)},Object:function(e){return n.createUnit(e,{})},"string, Unit | string | Object, Object":function(e,t,r){var i={};return i[e]=t,n.createUnit(i,r)},"string, Unit | string | Object":function(e,t){var r={};return r[e]=t,n.createUnit(r,{})},string:function(e){var t={};return t[e]={},n.createUnit(t,{})}})})),jl=du("add",["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],(e=>{var{typed:t,matrix:n,addScalar:r,equalScalar:i,DenseMatrix:s,SparseMatrix:o}=e,a=Lh({typed:t}),u=Bh({typed:t,equalScalar:i}),c=Fh({typed:t,DenseMatrix:s}),h=Ph({typed:t}),l=Rh({typed:t});return t("add",_a({"DenseMatrix, DenseMatrix":function(e,t){return h(e,t,r)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,r,!1)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,r,!0)},"SparseMatrix, SparseMatrix":function(e,t){return u(e,t,r)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"DenseMatrix, any":function(e,t){return l(e,t,r,!1)},"SparseMatrix, any":function(e,t){return c(e,t,r,!1)},"any, DenseMatrix":function(e,t){return l(t,e,r,!0)},"any, SparseMatrix":function(e,t){return c(t,e,r,!0)},"Array, any":function(e,t){return l(n(e),t,r,!1).valueOf()},"any, Array":function(e,t){return l(n(t),e,r,!0).valueOf()},"any, any":r,"any, any, ...any":function(e,t,n){for(var r=this(e,t),i=0;i<n.length;i++)r=this(r,n[i]);return r}},r.signatures))})),Vl=du("dot",["typed","addScalar","multiplyScalar","conj","size"],(e=>{var{typed:t,addScalar:n,multiplyScalar:r,conj:i,size:s}=e;return t("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(e,s){var u=o(e,s),c=Vo(e)?e._data:e,h=Vo(e)?e._datatype:void 0,l=Vo(s)?s._data:s,p=Vo(s)?s._datatype:void 0,f=2===a(e).length,d=2===a(s).length,m=n,g=r;if(h&&p&&h===p&&"string"==typeof h){var y=h;m=t.find(n,[y,y]),g=t.find(r,[y,y])}if(!f&&!d){for(var v=g(i(c[0]),l[0]),x=1;x<u;x++)v=m(v,g(i(c[x]),l[x]));return v}if(!f&&d){for(var w=g(i(c[0]),l[0][0]),b=1;b<u;b++)w=m(w,g(i(c[b]),l[b][0]));return w}if(f&&!d){for(var _=g(i(c[0][0]),l[0]),E=1;E<u;E++)_=m(_,g(i(c[E][0]),l[E]));return _}if(f&&d){for(var M=g(i(c[0][0]),l[0][0]),N=1;N<u;N++)M=m(M,g(i(c[N][0]),l[N][0]));return M}},"SparseMatrix, SparseMatrix":function(e,t){o(e,t);for(var i=e._index,s=e._values,a=t._index,u=t._values,c=0,h=n,l=r,p=0,f=0;p<i.length&&f<a.length;){var d=i[p],m=a[f];d<m?p++:d>m?f++:d===m&&(c=h(c,l(s[p],u[f])),p++,f++)}return c}});function o(e,t){var n,r,i=a(e),s=a(t);if(1===i.length)n=i[0];else{if(2!==i.length||1!==i[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+i.join(", ")+")");n=i[0]}if(1===s.length)r=s[0];else{if(2!==s.length||1!==s[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+s.join(", ")+")");r=s[0]}if(n!==r)throw new RangeError("Vectors must have equal length ("+n+" != "+r+")");if(0===n)throw new RangeError("Cannot calculate the dot product of empty vectors");return n}function a(e){return Vo(e)?e.size():s(e)}})),ql={end:!0},Hl=du("Node",["mathWithTransform"],(e=>{var{mathWithTransform:t}=e;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator")}return n.prototype.evaluate=function(e){return this.compile().evaluate(e)},n.prototype.type="Node",n.prototype.isNode=!0,n.prototype.comment="",n.prototype.compile=function(){var e=this._compile(t,{}),n={};return{evaluate:function(t){var r=t||{};return function(e){for(var t in e)if(Oa(e,t)&&t in ql)throw new Error('Scope contains an illegal symbol, "'+t+'" is a reserved keyword')}(r),e(r,n,null)}}},n.prototype._compile=function(e,t){throw new Error("Method _compile should be implemented by type "+this.type)},n.prototype.forEach=function(e){throw new Error("Cannot run forEach on a Node interface")},n.prototype.map=function(e){throw new Error("Cannot run map on a Node interface")},n.prototype._ifNode=function(e){if(!pa(e))throw new TypeError("Callback function must return a Node");return e},n.prototype.traverse=function(e){e(this,null,null),function e(t,n){t.forEach((function(t,r,i){n(t,r,i),e(t,n)}))}(this,e)},n.prototype.transform=function(e){return function t(n,r,i){var s=e(n,r,i);return s!==n?s:n.map(t)}(this,null,null)},n.prototype.filter=function(e){var t=[];return this.traverse((function(n,r,i){e(n,r,i)&&t.push(n)})),t},n.prototype.clone=function(){throw new Error("Cannot clone a Node interface")},n.prototype.cloneDeep=function(){return this.map((function(e){return e.cloneDeep()}))},n.prototype.equals=function(e){return!!e&&Ma(this,e)},n.prototype.toString=function(e){var t;if(e&&"object"==typeof e)switch(typeof e.handler){case"object":case"undefined":break;case"function":t=e.handler(this,e);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==t?t:this._toString(e)},n.prototype.toJSON=function(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)},n.prototype.toHTML=function(e){var t;if(e&&"object"==typeof e)switch(typeof e.handler){case"object":case"undefined":break;case"function":t=e.handler(this,e);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==t?t:this.toHTML(e)},n.prototype._toString=function(){throw new Error("_toString not implemented for "+this.type)},n.prototype.toTex=function(e){var t;if(e&&"object"==typeof e)switch(typeof e.handler){case"object":case"undefined":break;case"function":t=e.handler(this,e);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==t?t:this._toTex(e)},n.prototype._toTex=function(e){throw new Error("_toTex not implemented for "+this.type)},n.prototype.getIdentifier=function(){return this.type},n.prototype.getContent=function(){return this},n}),{isClass:!0,isNode:!0});function $l(e){return e&&e.isIndexError?new eu(e.index+1,e.min+1,void 0!==e.max?e.max+1:void 0):e}function Wl(e){var{subset:t}=e;return function(e,n){try{if(Array.isArray(e))return t(e,n);if(e&&"function"==typeof e.subset)return e.subset(n);if("string"==typeof e)return t(e,n);if("object"==typeof e){if(!n.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return il(e,n.getObjectProperty())}throw new TypeError("Cannot apply index: unsupported type of object")}catch(e){throw $l(e)}}}var Gl=du("AccessorNode",["subset","Node"],(e=>{var{subset:t,Node:n}=e,r=Wl({subset:t});function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(!pa(e))throw new TypeError('Node expected for parameter "object"');if(!la(t))throw new TypeError('IndexNode expected for parameter "index"');this.object=e||null,this.index=t,Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function s(e){return!(ra(e)||ia(e)||ua(e)||ha(e)||fa(e)||ma(e)||ya(e))}return i.prototype=new n,i.prototype.type="AccessorNode",i.prototype.isAccessorNode=!0,i.prototype._compile=function(e,t){var n=this.object._compile(e,t),i=this.index._compile(e,t);if(this.index.isObjectProperty()){var s=this.index.getObjectProperty();return function(e,t,r){return il(n(e,t,r),s)}}return function(e,t,s){var o=n(e,t,s),a=i(e,t,o);return r(o,a)}},i.prototype.forEach=function(e){e(this.object,"object",this),e(this.index,"index",this)},i.prototype.map=function(e){return new i(this._ifNode(e(this.object,"object",this)),this._ifNode(e(this.index,"index",this)))},i.prototype.clone=function(){return new i(this.object,this.index)},i.prototype._toString=function(e){var t=this.object.toString(e);return s(this.object)&&(t="("+t+")"),t+this.index.toString(e)},i.prototype.toHTML=function(e){var t=this.object.toHTML(e);return s(this.object)&&(t='<span class="math-parenthesis math-round-parenthesis">(</span>'+t+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+this.index.toHTML(e)},i.prototype._toTex=function(e){var t=this.object.toTex(e);return s(this.object)&&(t="\\left(' + object + '\\right)"),t+this.index.toTex(e)},i.prototype.toJSON=function(){return{mathjs:"AccessorNode",object:this.object,index:this.index}},i.fromJSON=function(e){return new i(e.object,e.index)},i}),{isClass:!0,isNode:!0}),Yl=du("ArrayNode",["Node"],(e=>{var{Node:t}=e;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(this.items=e||[],!Array.isArray(this.items)||!this.items.every(pa))throw new TypeError("Array containing Nodes expected")}return n.prototype=new t,n.prototype.type="ArrayNode",n.prototype.isArrayNode=!0,n.prototype._compile=function(e,t){var n=cu(this.items,(function(n){return n._compile(e,t)}));if("Array"!==e.config.matrix){var r=e.matrix;return function(e,t,i){return r(cu(n,(function(n){return n(e,t,i)})))}}return function(e,t,r){return cu(n,(function(n){return n(e,t,r)}))}},n.prototype.forEach=function(e){for(var t=0;t<this.items.length;t++)e(this.items[t],"items["+t+"]",this)},n.prototype.map=function(e){for(var t=[],r=0;r<this.items.length;r++)t[r]=this._ifNode(e(this.items[r],"items["+r+"]",this));return new n(t)},n.prototype.clone=function(){return new n(this.items.slice(0))},n.prototype._toString=function(e){return"["+this.items.map((function(t){return t.toString(e)})).join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"ArrayNode",items:this.items}},n.fromJSON=function(e){return new n(e.items)},n.prototype.toHTML=function(e){return'<span class="math-parenthesis math-square-parenthesis">[</span>'+this.items.map((function(t){return t.toHTML(e)})).join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},n.prototype._toTex=function(e){var t="\\begin{bmatrix}";return this.items.forEach((function(n){n.items?t+=n.items.map((function(t){return t.toTex(e)})).join("&"):t+=n.toTex(e),t+="\\\\"})),t+="\\end{bmatrix}"},n}),{isClass:!0,isNode:!0}),Zl=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{associativity:"left",associativeWith:[]}},{"OperatorNode:and":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{associativity:"left",associativeWith:[]},"OperatorNode:unequal":{associativity:"left",associativeWith:[]},"OperatorNode:smaller":{associativity:"left",associativeWith:[]},"OperatorNode:larger":{associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{associativity:"left",associativeWith:[]}},{"OperatorNode:to":{associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{associativity:"left",associativeWith:[]},"OperatorNode:mod":{associativity:"left",associativeWith:[]}},{"OperatorNode:unaryPlus":{associativity:"right"},"OperatorNode:unaryMinus":{associativity:"right"},"OperatorNode:bitNot":{associativity:"right"},"OperatorNode:not":{associativity:"right"}},{"OperatorNode:pow":{associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{associativity:"left"}},{"OperatorNode:transpose":{associativity:"left"}}];function Xl(e,t){var n=e;"keep"!==t&&(n=e.getContent());for(var r=n.getIdentifier(),i=0;i<Zl.length;i++)if(r in Zl[i])return i;return null}function Jl(e,t){var n=e;"keep"!==t&&(n=e.getContent());var r=n.getIdentifier(),i=Xl(n,t);if(null===i)return null;var s=Zl[i][r];if(Oa(s,"associativity")){if("left"===s.associativity)return"left";if("right"===s.associativity)return"right";throw Error("'"+r+"' has the invalid associativity '"+s.associativity+"'.")}return null}function Ql(e,t,n){var r="keep"!==n?e.getContent():e,i="keep"!==n?e.getContent():t,s=r.getIdentifier(),o=i.getIdentifier(),a=Xl(r,n);if(null===a)return null;var u=Zl[a][s];if(Oa(u,"associativeWith")&&u.associativeWith instanceof Array){for(var c=0;c<u.associativeWith.length;c++)if(u.associativeWith[c]===o)return!0;return!1}return null}var Kl=du("AssignmentNode",["subset","?matrix","Node"],(e=>{var{subset:t,matrix:n,Node:r}=e,i=Wl({subset:t}),s=function(e){var{subset:t,matrix:n}=e;return function(e,r,i){try{if(Array.isArray(e))return n(e).subset(r,i).valueOf();if(e&&"function"==typeof e.subset)return e.subset(r,i);if("string"==typeof e)return t(e,r,i);if("object"==typeof e){if(!r.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return sl(e,r.getObjectProperty(),i),e}throw new TypeError("Cannot apply index: unsupported type of object")}catch(e){throw $l(e)}}}({subset:t,matrix:n});function o(e,t,n){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");if(this.object=e,this.index=n?t:null,this.value=n||t,!ya(e)&&!ra(e))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(ya(e)&&"end"===e.name)throw new Error('Cannot assign to symbol "end"');if(this.index&&!la(this.index))throw new TypeError('IndexNode expected as "index"');if(!pa(this.value))throw new TypeError('Node expected as "value"');Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function a(e,t){t||(t="keep");var n=Xl(e,t),r=Xl(e.value,t);return"all"===t||null!==r&&r<=n}return o.prototype=new r,o.prototype.type="AssignmentNode",o.prototype.isAssignmentNode=!0,o.prototype._compile=function(e,t){var n=this.object._compile(e,t),r=this.index?this.index._compile(e,t):null,o=this.value._compile(e,t),a=this.object.name;if(this.index){if(this.index.isObjectProperty()){var u=this.index.getObjectProperty();return function(e,t,r){var i=n(e,t,r),s=o(e,t,r);return sl(i,u,s)}}if(ya(this.object))return function(e,t,i){var u=n(e,t,i),c=o(e,t,i),h=r(e,t,u);return sl(e,a,s(u,h,c)),c};var c=this.object.object._compile(e,t);if(this.object.index.isObjectProperty()){var h=this.object.index.getObjectProperty();return function(e,t,n){var i=c(e,t,n),a=il(i,h),u=r(e,t,a),l=o(e,t,n);return sl(i,h,s(a,u,l)),l}}var l=this.object.index._compile(e,t);return function(e,t,n){var a=c(e,t,n),u=l(e,t,a),h=i(a,u),p=r(e,t,h),f=o(e,t,n);return s(a,u,s(h,p,f)),f}}if(!ya(this.object))throw new TypeError("SymbolNode expected as object");return function(e,t,n){return sl(e,a,o(e,t,n))}},o.prototype.forEach=function(e){e(this.object,"object",this),this.index&&e(this.index,"index",this),e(this.value,"value",this)},o.prototype.map=function(e){return new o(this._ifNode(e(this.object,"object",this)),this.index?this._ifNode(e(this.index,"index",this)):null,this._ifNode(e(this.value,"value",this)))},o.prototype.clone=function(){return new o(this.object,this.index,this.value)},o.prototype._toString=function(e){var t=this.object.toString(e),n=this.index?this.index.toString(e):"",r=this.value.toString(e);return a(this,e&&e.parenthesis)&&(r="("+r+")"),t+n+" = "+r},o.prototype.toJSON=function(){return{mathjs:"AssignmentNode",object:this.object,index:this.index,value:this.value}},o.fromJSON=function(e){return new o(e.object,e.index,e.value)},o.prototype.toHTML=function(e){var t=this.object.toHTML(e),n=this.index?this.index.toHTML(e):"",r=this.value.toHTML(e);return a(this,e&&e.parenthesis)&&(r='<span class="math-paranthesis math-round-parenthesis">(</span>'+r+'<span class="math-paranthesis math-round-parenthesis">)</span>'),t+n+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+r},o.prototype._toTex=function(e){var t=this.object.toTex(e),n=this.index?this.index.toTex(e):"",r=this.value.toTex(e);return a(this,e&&e.parenthesis)&&(r="\\left(".concat(r,"\\right)")),t+n+":="+r},o}),{isClass:!0,isNode:!0}),ep=du("BlockNode",["ResultSet","Node"],(e=>{var{ResultSet:t,Node:n}=e;function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(e))throw new Error("Array expected");this.blocks=e.map((function(e){var t=e&&e.node,n=!e||void 0===e.visible||e.visible;if(!pa(t))throw new TypeError('Property "node" must be a Node');if("boolean"!=typeof n)throw new TypeError('Property "visible" must be a boolean');return{node:t,visible:n}}))}return r.prototype=new n,r.prototype.type="BlockNode",r.prototype.isBlockNode=!0,r.prototype._compile=function(e,n){var r=cu(this.blocks,(function(t){return{evaluate:t.node._compile(e,n),visible:t.visible}}));return function(e,n,i){var s=[];return hu(r,(function(t){var r=t.evaluate(e,n,i);t.visible&&s.push(r)})),new t(s)}},r.prototype.forEach=function(e){for(var t=0;t<this.blocks.length;t++)e(this.blocks[t].node,"blocks["+t+"].node",this)},r.prototype.map=function(e){for(var t=[],n=0;n<this.blocks.length;n++){var i=this.blocks[n],s=this._ifNode(e(i.node,"blocks["+n+"].node",this));t[n]={node:s,visible:i.visible}}return new r(t)},r.prototype.clone=function(){return new r(this.blocks.map((function(e){return{node:e.node,visible:e.visible}})))},r.prototype._toString=function(e){return this.blocks.map((function(t){return t.node.toString(e)+(t.visible?"":";")})).join("\n")},r.prototype.toJSON=function(){return{mathjs:"BlockNode",blocks:this.blocks}},r.fromJSON=function(e){return new r(e.blocks)},r.prototype.toHTML=function(e){return this.blocks.map((function(t){return t.node.toHTML(e)+(t.visible?"":'<span class="math-separator">;</span>')})).join('<span class="math-separator"><br /></span>')},r.prototype._toTex=function(e){return this.blocks.map((function(t){return t.node.toTex(e)+(t.visible?"":";")})).join("\\;\\;\n")},r}),{isClass:!0,isNode:!0}),tp=du("ConditionalNode",["Node"],(e=>{var{Node:t}=e;function n(e,t,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!pa(e))throw new TypeError("Parameter condition must be a Node");if(!pa(t))throw new TypeError("Parameter trueExpr must be a Node");if(!pa(r))throw new TypeError("Parameter falseExpr must be a Node");this.condition=e,this.trueExpr=t,this.falseExpr=r}return n.prototype=new t,n.prototype.type="ConditionalNode",n.prototype.isConditionalNode=!0,n.prototype._compile=function(e,t){var n=this.condition._compile(e,t),r=this.trueExpr._compile(e,t),i=this.falseExpr._compile(e,t);return function(e,t,s){return function(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e)return!!e;if(e){if(Lo(e))return!e.isZero();if(Bo(e))return!(!e.re&&!e.im);if(Po(e))return!!e.value}if(null==e)return!1;throw new TypeError('Unsupported type of condition "'+xa(e)+'"')}(n(e,t,s))?r(e,t,s):i(e,t,s)}},n.prototype.forEach=function(e){e(this.condition,"condition",this),e(this.trueExpr,"trueExpr",this),e(this.falseExpr,"falseExpr",this)},n.prototype.map=function(e){return new n(this._ifNode(e(this.condition,"condition",this)),this._ifNode(e(this.trueExpr,"trueExpr",this)),this._ifNode(e(this.falseExpr,"falseExpr",this)))},n.prototype.clone=function(){return new n(this.condition,this.trueExpr,this.falseExpr)},n.prototype._toString=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=Xl(this,t),r=this.condition.toString(e),i=Xl(this.condition,t);("all"===t||"OperatorNode"===this.condition.type||null!==i&&i<=n)&&(r="("+r+")");var s=this.trueExpr.toString(e),o=Xl(this.trueExpr,t);("all"===t||"OperatorNode"===this.trueExpr.type||null!==o&&o<=n)&&(s="("+s+")");var a=this.falseExpr.toString(e),u=Xl(this.falseExpr,t);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==u&&u<=n)&&(a="("+a+")"),r+" ? "+s+" : "+a},n.prototype.toJSON=function(){return{mathjs:"ConditionalNode",condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}},n.fromJSON=function(e){return new n(e.condition,e.trueExpr,e.falseExpr)},n.prototype.toHTML=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=Xl(this,t),r=this.condition.toHTML(e),i=Xl(this.condition,t);("all"===t||"OperatorNode"===this.condition.type||null!==i&&i<=n)&&(r='<span class="math-parenthesis math-round-parenthesis">(</span>'+r+'<span class="math-parenthesis math-round-parenthesis">)</span>');var s=this.trueExpr.toHTML(e),o=Xl(this.trueExpr,t);("all"===t||"OperatorNode"===this.trueExpr.type||null!==o&&o<=n)&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>');var a=this.falseExpr.toHTML(e),u=Xl(this.falseExpr,t);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==u&&u<=n)&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),r+'<span class="math-operator math-conditional-operator">?</span>'+s+'<span class="math-operator math-conditional-operator">:</span>'+a},n.prototype._toTex=function(e){return"\\begin{cases} {"+this.trueExpr.toTex(e)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(e)+"}\\\\{"+this.falseExpr.toTex(e)+"}, &\\quad{\\text{otherwise}}\\end{cases}"},n}),{isClass:!0,isNode:!0}),np=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rp={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},ip={"":"\\--","":"\\---"," ":"~","\t":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},sp=function(e,t){return np({},e,t)},op={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},ap={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},up={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(ap.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(ap.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(ap.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(ap.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(ap.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(ap.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(ap.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(ap.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(ap.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(ap.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(ap.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(ap.bitAnd,"${args[1]}\\right)")},bitNot:{1:ap.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(ap.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(ap.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(ap.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(ap.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(ap.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(ap.and,"${args[1]}\\right)")},not:{1:ap.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(ap.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(ap.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(ap.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},sqrtm:{1:"{${args[0]}}".concat(ap.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(ap.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(ap.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(ap.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(ap.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(ap.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(ap.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(ap.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(ap.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(ap.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(op.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},cp={deg:"^\\circ"};function hp(e){return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.preserveFormatting,r=void 0!==n&&n,i=t.escapeMapFn,s=void 0===i?sp:i,o=String(e),a="",u=s(np({},rp),r?np({},ip):{}),c=Object.keys(u),h=function(){var e=!1;c.forEach((function(t,n){e||o.length>=t.length&&o.slice(0,t.length)===t&&(a+=u[c[n]],o=o.slice(t.length,o.length),e=!0)})),e||(a+=o.slice(0,1),o=o.slice(1,o.length))};o;)h();return a}(e,{preserveFormatting:!0})}function lp(e,t){return(t=void 0!==t&&t)?Oa(cp,e)?cp[e]:"\\mathrm{"+hp(e)+"}":Oa(op,e)?op[e]:hp(e)}var pp=du("ConstantNode",["Node"],(e=>{var{Node:t}=e;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.value=e}return n.prototype=new t,n.prototype.type="ConstantNode",n.prototype.isConstantNode=!0,n.prototype._compile=function(e,t){var n=this.value;return function(){return n}},n.prototype.forEach=function(e){},n.prototype.map=function(e){return this.clone()},n.prototype.clone=function(){return new n(this.value)},n.prototype._toString=function(e){return Za(this.value,e)},n.prototype.toHTML=function(e){var t=this._toString(e);switch(xa(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+t+"</span>";case"string":return'<span class="math-string">'+t+"</span>";case"boolean":return'<span class="math-boolean">'+t+"</span>";case"null":return'<span class="math-null-symbol">'+t+"</span>";case"undefined":return'<span class="math-undefined">'+t+"</span>";default:return'<span class="math-symbol">'+t+"</span>"}},n.prototype.toJSON=function(){return{mathjs:"ConstantNode",value:this.value}},n.fromJSON=function(e){return new n(e.value)},n.prototype._toTex=function(e){var t=this._toString(e);switch(xa(this.value)){case"string":return"\\mathtt{"+hp(t)+"}";case"number":case"BigNumber":if(!isFinite(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var n=t.toLowerCase().indexOf("e");return-1!==n?t.substring(0,n)+"\\cdot10^{"+t.substring(n+1)+"}":t;case"Fraction":return this.value.toLatex();default:return t}},n}),{isClass:!0,isNode:!0}),fp=du("FunctionAssignmentNode",["typed","Node"],(e=>{var{typed:t,Node:n}=e;function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('String expected for parameter "name"');if(!Array.isArray(t))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!pa(n))throw new TypeError('Node expected for parameter "expr"');if(e in ql)throw new Error('Illegal function name, "'+e+'" is a reserved keyword');this.name=e,this.params=t.map((function(e){return e&&e.name||e})),this.types=t.map((function(e){return e&&e.type||"any"})),this.expr=n}function i(e,t){var n=Xl(e,t),r=Xl(e.expr,t);return"all"===t||null!==r&&r<=n}return r.prototype=new n,r.prototype.type="FunctionAssignmentNode",r.prototype.isFunctionAssignmentNode=!0,r.prototype._compile=function(e,n){var r=Object.create(n);hu(this.params,(function(e){r[e]=!0}));var i=this.expr._compile(e,r),s=this.name,o=this.params,a=lu(this.types,","),u=s+"("+lu(this.params,", ")+")";return function(e,n,r){var c={};c[a]=function(){for(var t=Object.create(n),s=0;s<o.length;s++)t[o[s]]=arguments[s];return i(e,t,r)};var h=t(s,c);return h.syntax=u,sl(e,s,h),h}},r.prototype.forEach=function(e){e(this.expr,"expr",this)},r.prototype.map=function(e){var t=this._ifNode(e(this.expr,"expr",this));return new r(this.name,this.params.slice(0),t)},r.prototype.clone=function(){return new r(this.name,this.params.slice(0),this.expr)},r.prototype._toString=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=this.expr.toString(e);return i(this,t)&&(n="("+n+")"),this.name+"("+this.params.join(", ")+") = "+n},r.prototype.toJSON=function(){var e=this.types;return{mathjs:"FunctionAssignmentNode",name:this.name,params:this.params.map((function(t,n){return{name:t,type:e[n]}})),expr:this.expr}},r.fromJSON=function(e){return new r(e.name,e.params,e.expr)},r.prototype.toHTML=function(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=[],r=0;r<this.params.length;r++)n.push('<span class="math-symbol math-parameter">'+Ja(this.params[r])+"</span>");var s=this.expr.toHTML(e);return i(this,t)&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+Ja(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+n.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+s},r.prototype._toTex=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=this.expr.toTex(e);return i(this,t)&&(n="\\left(".concat(n,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(lp).join(",")+"\\right):="+n},r}),{isClass:!0,isNode:!0}),dp=du("IndexNode",["Range","Node","size"],(e=>{var{Range:t,Node:n,size:r}=e;function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(this.dimensions=e,this.dotNotation=t||!1,!Array.isArray(e)||!e.every(pa))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}function s(e,n,r){return new t(Lo(e)?e.toNumber():e,Lo(n)?n.toNumber():n,Lo(r)?r.toNumber():r)}return i.prototype=new n,i.prototype.type="IndexNode",i.prototype.isIndexNode=!0,i.prototype._compile=function(e,t){var n=cu(this.dimensions,(function(n,i){if(ga(n)){if(n.needsEnd()){var o=Object.create(t);o.end=!0;var a=n.start._compile(e,o),u=n.end._compile(e,o),c=n.step?n.step._compile(e,o):function(){return 1};return function(e,t,n){var o=r(n).valueOf(),h=Object.create(t);return h.end=o[i],s(a(e,h,n),u(e,h,n),c(e,h,n))}}var h=n.start._compile(e,t),l=n.end._compile(e,t),p=n.step?n.step._compile(e,t):function(){return 1};return function(e,t,n){return s(h(e,t,n),l(e,t,n),p(e,t,n))}}if(ya(n)&&"end"===n.name){var f=Object.create(t);f.end=!0;var d=n._compile(e,f);return function(e,t,n){var s=r(n).valueOf(),o=Object.create(t);return o.end=s[i],d(e,o,n)}}var m=n._compile(e,t);return function(e,t,n){return m(e,t,n)}})),i=il(e,"index");return function(e,t,r){var s=cu(n,(function(n){return n(e,t,r)}));return i(...s)}},i.prototype.forEach=function(e){for(var t=0;t<this.dimensions.length;t++)e(this.dimensions[t],"dimensions["+t+"]",this)},i.prototype.map=function(e){for(var t=[],n=0;n<this.dimensions.length;n++)t[n]=this._ifNode(e(this.dimensions[n],"dimensions["+n+"]",this));return new i(t,this.dotNotation)},i.prototype.clone=function(){return new i(this.dimensions.slice(0),this.dotNotation)},i.prototype.isObjectProperty=function(){return 1===this.dimensions.length&&ua(this.dimensions[0])&&"string"==typeof this.dimensions[0].value},i.prototype.getObjectProperty=function(){return this.isObjectProperty()?this.dimensions[0].value:null},i.prototype._toString=function(e){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"},i.prototype.toJSON=function(){return{mathjs:"IndexNode",dimensions:this.dimensions,dotNotation:this.dotNotation}},i.fromJSON=function(e){return new i(e.dimensions,e.dotNotation)},i.prototype.toHTML=function(e){for(var t=[],n=0;n<this.dimensions.length;n++)t[n]=this.dimensions[n].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+Ja(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},i.prototype._toTex=function(e){var t=this.dimensions.map((function(t){return t.toTex(e)}));return this.dotNotation?"."+this.getObjectProperty():"_{"+t.join(",")+"}"},i}),{isClass:!0,isNode:!0}),mp=du("ObjectNode",["Node"],(e=>{var{Node:t}=e;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(this.properties=e||{},e&&("object"!=typeof e||!Object.keys(e).every((function(t){return pa(e[t])}))))throw new TypeError("Object containing Nodes expected")}return n.prototype=new t,n.prototype.type="ObjectNode",n.prototype.isObjectNode=!0,n.prototype._compile=function(e,t){var n={};for(var r in this.properties)if(Oa(this.properties,r)){var i=Xa(r),s=JSON.parse(i);if(!ol(this.properties,s))throw new Error('No access to property "'+s+'"');n[s]=this.properties[r]._compile(e,t)}return function(e,t,r){var i={};for(var s in n)Oa(n,s)&&(i[s]=n[s](e,t,r));return i}},n.prototype.forEach=function(e){for(var t in this.properties)Oa(this.properties,t)&&e(this.properties[t],"properties["+Xa(t)+"]",this)},n.prototype.map=function(e){var t={};for(var r in this.properties)Oa(this.properties,r)&&(t[r]=this._ifNode(e(this.properties[r],"properties["+Xa(r)+"]",this)));return new n(t)},n.prototype.clone=function(){var e={};for(var t in this.properties)Oa(this.properties,t)&&(e[t]=this.properties[t]);return new n(e)},n.prototype._toString=function(e){var t=[];for(var n in this.properties)Oa(this.properties,n)&&t.push(Xa(n)+": "+this.properties[n].toString(e));return"{"+t.join(", ")+"}"},n.prototype.toJSON=function(){return{mathjs:"ObjectNode",properties:this.properties}},n.fromJSON=function(e){return new n(e.properties)},n.prototype.toHTML=function(e){var t=[];for(var n in this.properties)Oa(this.properties,n)&&t.push('<span class="math-symbol math-property">'+Ja(n)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[n].toHTML(e));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'},n.prototype._toTex=function(e){var t=[];for(var n in this.properties)Oa(this.properties,n)&&t.push("\\mathbf{"+n+":} & "+this.properties[n].toTex(e)+"\\\\");return"\\left\\{\\begin{array}{ll}".concat(t.join("\n"),"\\end{array}\\right\\}")},n}),{isClass:!0,isNode:!0}),gp=du("OperatorNode",["Node"],(e=>{var{Node:t}=e;function n(e,t,r,i){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('string expected for parameter "op"');if("string"!=typeof t)throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(r)||!r.every(pa))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=!0===i,this.op=e,this.fn=t,this.args=r||[]}function r(e,t,n,r,i){var s,o=Xl(e,t),a=Jl(e,t);if("all"===t||r.length>2&&"OperatorNode:add"!==e.getIdentifier()&&"OperatorNode:multiply"!==e.getIdentifier())return r.map((function(e){switch(e.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}}));switch(r.length){case 0:s=[];break;case 1:var u=Xl(r[0],t);if(i&&null!==u){var c,h;if("keep"===t?(c=r[0].getIdentifier(),h=e.getIdentifier()):(c=r[0].getContent().getIdentifier(),h=e.getContent().getIdentifier()),!1===Zl[o][h].latexLeftParens){s=[!1];break}if(!1===Zl[u][c].latexParens){s=[!1];break}}if(null===u){s=[!1];break}if(u<=o){s=[!0];break}s=[!1];break;case 2:var l,p,f=Xl(r[0],t),d=Ql(e,r[0],t);l=null!==f&&(f===o&&"right"===a&&!d||f<o);var m,g,y,v=Xl(r[1],t),x=Ql(e,r[1],t);p=null!==v&&(v===o&&"left"===a&&!x||v<o),i&&("keep"===t?(m=e.getIdentifier(),g=e.args[0].getIdentifier(),y=e.args[1].getIdentifier()):(m=e.getContent().getIdentifier(),g=e.args[0].getContent().getIdentifier(),y=e.args[1].getContent().getIdentifier()),null!==f&&(!1===Zl[o][m].latexLeftParens&&(l=!1),!1===Zl[f][g].latexParens&&(l=!1)),null!==v&&(!1===Zl[o][m].latexRightParens&&(p=!1),!1===Zl[v][y].latexParens&&(p=!1))),s=[l,p];break;default:"OperatorNode:add"!==e.getIdentifier()&&"OperatorNode:multiply"!==e.getIdentifier()||(s=r.map((function(n){var r=Xl(n,t),i=Ql(e,n,t),s=Jl(n,t);return null!==r&&(o===r&&a===s&&!i||r<o)})))}return r.length>=2&&"OperatorNode:multiply"===e.getIdentifier()&&e.implicit&&"auto"===t&&"hide"===n&&(s=r.map((function(e,t){var n="ParenthesisNode"===e.getIdentifier();return!(!s[t]&&!n)}))),s}return n.prototype=new t,n.prototype.type="OperatorNode",n.prototype.isOperatorNode=!0,n.prototype._compile=function(e,t){if("string"!=typeof this.fn||!al(e,this.fn))throw e[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var n=il(e,this.fn),r=cu(this.args,(function(n){return n._compile(e,t)}));if(1===r.length){var i=r[0];return function(e,t,r){return n(i(e,t,r))}}if(2===r.length){var s=r[0],o=r[1];return function(e,t,r){return n(s(e,t,r),o(e,t,r))}}return function(e,t,i){return n.apply(null,cu(r,(function(n){return n(e,t,i)})))}},n.prototype.forEach=function(e){for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)},n.prototype.map=function(e){for(var t=[],r=0;r<this.args.length;r++)t[r]=this._ifNode(e(this.args[r],"args["+r+"]",this));return new n(this.op,this.fn,t,this.implicit)},n.prototype.clone=function(){return new n(this.op,this.fn,this.args.slice(0),this.implicit)},n.prototype.isUnary=function(){return 1===this.args.length},n.prototype.isBinary=function(){return 2===this.args.length},n.prototype._toString=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=e&&e.implicit?e.implicit:"hide",i=this.args,s=r(this,t,n,i,!1);if(1===i.length){var o=Jl(this,t),a=i[0].toString(e);s[0]&&(a="("+a+")");var u=/[a-zA-Z]+/.test(this.op);return"right"===o?this.op+(u?" ":"")+a:"left"===o?a+(u?" ":"")+this.op:a+this.op}if(2===i.length){var c=i[0].toString(e),h=i[1].toString(e);return s[0]&&(c="("+c+")"),s[1]&&(h="("+h+")"),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?c+" "+h:c+" "+this.op+" "+h}if(i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var l=i.map((function(t,n){return t=t.toString(e),s[n]&&(t="("+t+")"),t}));return this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?l.join(" "):l.join(" "+this.op+" ")}return this.fn+"("+this.args.join(", ")+")"},n.prototype.toJSON=function(){return{mathjs:"OperatorNode",op:this.op,fn:this.fn,args:this.args,implicit:this.implicit}},n.fromJSON=function(e){return new n(e.op,e.fn,e.args,e.implicit)},n.prototype.toHTML=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=e&&e.implicit?e.implicit:"hide",i=this.args,s=r(this,t,n,i,!1);if(1===i.length){var o=Jl(this,t),a=i[0].toHTML(e);return s[0]&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),"right"===o?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+Ja(this.op)+"</span>"+a:a+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+Ja(this.op)+"</span>"}if(2===i.length){var u=i[0].toHTML(e),c=i[1].toHTML(e);return s[0]&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),s[1]&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?u+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+c:u+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Ja(this.op)+"</span>"+c}var h=i.map((function(t,n){return t=t.toHTML(e),s[n]&&(t='<span class="math-parenthesis math-round-parenthesis">(</span>'+t+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t}));return i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())?this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?h.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):h.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Ja(this.op)+"</span>"):'<span class="math-function">'+Ja(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+h.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'},n.prototype._toTex=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=e&&e.implicit?e.implicit:"hide",i=this.args,s=r(this,t,n,i,!0),o=ap[this.fn];if(o=void 0===o?this.op:o,1===i.length){var a=Jl(this,t),u=i[0].toTex(e);return s[0]&&(u="\\left(".concat(u,"\\right)")),"right"===a?o+u:u+o}if(2===i.length){var c=i[0],h=c.toTex(e);s[0]&&(h="\\left(".concat(h,"\\right)"));var l,p=i[1].toTex(e);switch(s[1]&&(p="\\left(".concat(p,"\\right)")),l="keep"===t?c.getIdentifier():c.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return o+"{"+h+"}{"+p+"}";case"OperatorNode:pow":switch(h="{"+h+"}",p="{"+p+"}",l){case"ConditionalNode":case"OperatorNode:divide":h="\\left(".concat(h,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&"hide"===n)return h+"~"+p}return h+o+p}if(i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var f=i.map((function(t,n){return t=t.toTex(e),s[n]&&(t="\\left(".concat(t,"\\right)")),t}));return"OperatorNode:multiply"===this.getIdentifier()&&this.implicit?f.join("~"):f.join(o)}return"\\mathrm{"+this.fn+"}\\left("+i.map((function(t){return t.toTex(e)})).join(",")+"\\right)"},n.prototype.getIdentifier=function(){return this.type+":"+this.fn},n}),{isClass:!0,isNode:!0}),yp=du("ParenthesisNode",["Node"],(e=>{var{Node:t}=e;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!pa(e))throw new TypeError('Node expected for parameter "content"');this.content=e}return n.prototype=new t,n.prototype.type="ParenthesisNode",n.prototype.isParenthesisNode=!0,n.prototype._compile=function(e,t){return this.content._compile(e,t)},n.prototype.getContent=function(){return this.content.getContent()},n.prototype.forEach=function(e){e(this.content,"content",this)},n.prototype.map=function(e){return new n(e(this.content,"content",this))},n.prototype.clone=function(){return new n(this.content)},n.prototype._toString=function(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"("+this.content.toString(e)+")":this.content.toString(e)},n.prototype.toJSON=function(){return{mathjs:"ParenthesisNode",content:this.content}},n.fromJSON=function(e){return new n(e.content)},n.prototype.toHTML=function(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(e)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(e)},n.prototype._toTex=function(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"\\left(".concat(this.content.toTex(e),"\\right)"):this.content.toTex(e)},n}),{isClass:!0,isNode:!0}),vp=du("RangeNode",["Node"],(e=>{var{Node:t}=e;function n(e,t,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!pa(e))throw new TypeError("Node expected");if(!pa(t))throw new TypeError("Node expected");if(r&&!pa(r))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=e,this.end=t,this.step=r||null}function r(e,t){var n=Xl(e,t),r={},i=Xl(e.start,t);if(r.start=null!==i&&i<=n||"all"===t,e.step){var s=Xl(e.step,t);r.step=null!==s&&s<=n||"all"===t}var o=Xl(e.end,t);return r.end=null!==o&&o<=n||"all"===t,r}return n.prototype=new t,n.prototype.type="RangeNode",n.prototype.isRangeNode=!0,n.prototype.needsEnd=function(){return this.filter((function(e){return ya(e)&&"end"===e.name})).length>0},n.prototype._compile=function(e,t){var n=e.range,r=this.start._compile(e,t),i=this.end._compile(e,t);if(this.step){var s=this.step._compile(e,t);return function(e,t,o){return n(r(e,t,o),i(e,t,o),s(e,t,o))}}return function(e,t,s){return n(r(e,t,s),i(e,t,s))}},n.prototype.forEach=function(e){e(this.start,"start",this),e(this.end,"end",this),this.step&&e(this.step,"step",this)},n.prototype.map=function(e){return new n(this._ifNode(e(this.start,"start",this)),this._ifNode(e(this.end,"end",this)),this.step&&this._ifNode(e(this.step,"step",this)))},n.prototype.clone=function(){return new n(this.start,this.end,this.step&&this.step)},n.prototype._toString=function(e){var t,n=r(this,e&&e.parenthesis?e.parenthesis:"keep"),i=this.start.toString(e);if(n.start&&(i="("+i+")"),t=i,this.step){var s=this.step.toString(e);n.step&&(s="("+s+")"),t+=":"+s}var o=this.end.toString(e);return n.end&&(o="("+o+")"),t+":"+o},n.prototype.toJSON=function(){return{mathjs:"RangeNode",start:this.start,end:this.end,step:this.step}},n.fromJSON=function(e){return new n(e.start,e.end,e.step)},n.prototype.toHTML=function(e){var t,n=r(this,e&&e.parenthesis?e.parenthesis:"keep"),i=this.start.toHTML(e);if(n.start&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t=i,this.step){var s=this.step.toHTML(e);n.step&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+='<span class="math-operator math-range-operator">:</span>'+s}var o=this.end.toHTML(e);return n.end&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+'<span class="math-operator math-range-operator">:</span>'+o},n.prototype._toTex=function(e){var t=r(this,e&&e.parenthesis?e.parenthesis:"keep"),n=this.start.toTex(e);if(t.start&&(n="\\left(".concat(n,"\\right)")),this.step){var i=this.step.toTex(e);t.step&&(i="\\left(".concat(i,"\\right)")),n+=":"+i}var s=this.end.toTex(e);return t.end&&(s="\\left(".concat(s,"\\right)")),n+":"+s},n}),{isClass:!0,isNode:!0}),xp=du("RelationalNode",["Node"],(e=>{var{Node:t}=e;function n(e,t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(e))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(t))throw new TypeError("Parameter params must be an array");if(e.length!==t.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=e,this.params=t}return n.prototype=new t,n.prototype.type="RelationalNode",n.prototype.isRelationalNode=!0,n.prototype._compile=function(e,t){var n=this,r=this.params.map((n=>n._compile(e,t)));return function(t,i,s){for(var o,a=r[0](t,i,s),u=0;u<n.conditionals.length;u++)if(o=a,a=r[u+1](t,i,s),!il(e,n.conditionals[u])(o,a))return!1;return!0}},n.prototype.forEach=function(e){this.params.forEach(((t,n)=>e(t,"params["+n+"]",this)),this)},n.prototype.map=function(e){return new n(this.conditionals.slice(),this.params.map(((t,n)=>this._ifNode(e(t,"params["+n+"]",this))),this))},n.prototype.clone=function(){return new n(this.conditionals,this.params)},n.prototype._toString=function(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=Xl(this,t),r=this.params.map((function(r,i){var s=Xl(r,t);return"all"===t||null!==s&&s<=n?"("+r.toString(e)+")":r.toString(e)})),i={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},s=r[0],o=0;o<this.conditionals.length;o++)s+=" "+i[this.conditionals[o]]+" "+r[o+1];return s},n.prototype.toJSON=function(){return{mathjs:"RelationalNode",conditionals:this.conditionals,params:this.params}},n.fromJSON=function(e){return new n(e.conditionals,e.params)},n.prototype.toHTML=function(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=Xl(this,t),r=this.params.map((function(r,i){var s=Xl(r,t);return"all"===t||null!==s&&s<=n?'<span class="math-parenthesis math-round-parenthesis">(</span>'+r.toHTML(e)+'<span class="math-parenthesis math-round-parenthesis">)</span>':r.toHTML(e)})),i={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},s=r[0],o=0;o<this.conditionals.length;o++)s+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Ja(i[this.conditionals[o]])+"</span>"+r[o+1];return s},n.prototype._toTex=function(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=Xl(this,t),r=this.params.map((function(r,i){var s=Xl(r,t);return"all"===t||null!==s&&s<=n?"\\left("+r.toTex(e)+"\right)":r.toTex(e)})),i=r[0],s=0;s<this.conditionals.length;s++)i+=ap[this.conditionals[s]]+r[s+1];return i},n}),{isClass:!0,isNode:!0});function wp(){return(wp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bp(){return(bp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _p={createBigNumberClass:Qc},Ep={createComplexClass:th},Mp={createMatrixClass:oh},Np={MatrixDependencies:Mp,createDenseMatrixClass:ah},Sp={createFractionClass:ih},Tp={BigNumberDependencies:_p,ComplexDependencies:Ep,DenseMatrixDependencies:Np,FractionDependencies:Sp,createTyped:vu},Op={typedDependencies:Tp,createEqualScalar:_h},Cp={MatrixDependencies:Mp,equalScalarDependencies:Op,typedDependencies:Tp,createSparseMatrixClass:Eh},Ap={typedDependencies:Tp,createNumber:Mh},zp={FractionDependencies:Sp,typedDependencies:Tp,createFraction:Sh},Rp={DenseMatrixDependencies:Np,MatrixDependencies:Mp,SparseMatrixDependencies:Cp,typedDependencies:Tp,createMatrix:Th},Dp={typedDependencies:Tp,createUnaryMinus:Oh},kp={typedDependencies:Tp,createAbs:Ch},Ip={typedDependencies:Tp,createAddScalar:Ah},Lp={BigNumberDependencies:_p,DenseMatrixDependencies:Np,equalScalarDependencies:Op,matrixDependencies:Rp,typedDependencies:Tp,zerosDependencies:{BigNumberDependencies:_p,matrixDependencies:Rp,typedDependencies:Tp,createZeros:gl},createRound:Nl},Bp={DenseMatrixDependencies:Np,equalScalarDependencies:Op,matrixDependencies:Rp,typedDependencies:Tp,createMod:Hh},Fp={typedDependencies:Tp,createMultiplyScalar:$h},Pp={matrixDependencies:Rp,typedDependencies:Tp,createSize:rl},Up={addScalarDependencies:Ip,dotDependencies:{addScalarDependencies:Ip,conjDependencies:{typedDependencies:Tp,createConj:Xh},multiplyScalarDependencies:Fp,sizeDependencies:Pp,typedDependencies:Tp,createDot:Vl},equalScalarDependencies:Op,matrixDependencies:Rp,multiplyScalarDependencies:Fp,typedDependencies:Tp,createMultiply:Wh},jp={DenseMatrixDependencies:Np,addScalarDependencies:Ip,equalScalarDependencies:Op,matrixDependencies:Rp,typedDependencies:Tp,unaryMinusDependencies:Dp,createSubtract:Gh},Vp={DenseMatrixDependencies:Np,matrixDependencies:Rp,typedDependencies:Tp,createLarger:Cl},qp={BigNumberDependencies:_p,DenseMatrixDependencies:Np,SparseMatrixDependencies:Cp,matrixDependencies:Rp,typedDependencies:Tp,createIdentity:Kh},Hp={DenseMatrixDependencies:Np,SparseMatrixDependencies:Cp,addScalarDependencies:Ip,equalScalarDependencies:Op,matrixDependencies:Rp,typedDependencies:Tp,createAdd:jl},$p={bignumberDependencies:{BigNumberDependencies:_p,typedDependencies:Tp,createBignumber:Nh},fractionDependencies:zp,numberDependencies:Ap,createNumeric:vl},Wp={numericDependencies:$p,typedDependencies:Tp,createDivideScalar:xl},Gp={matrixDependencies:Rp,typedDependencies:Tp,createSubset:ll},Yp={BigNumberDependencies:_p,ComplexDependencies:Ep,FractionDependencies:Sp,absDependencies:kp,addScalarDependencies:Ip,divideScalarDependencies:Wp,equalDependencies:{DenseMatrixDependencies:Np,equalScalarDependencies:Op,matrixDependencies:Rp,typedDependencies:Tp,createEqual:Tl},fixDependencies:{ComplexDependencies:Ep,ceilDependencies:{equalScalarDependencies:Op,matrixDependencies:Rp,roundDependencies:Lp,typedDependencies:Tp,createCeil:Dh},floorDependencies:{equalScalarDependencies:Op,matrixDependencies:Rp,roundDependencies:Lp,typedDependencies:Tp,createFloor:Ih},matrixDependencies:Rp,typedDependencies:Tp,createFix:kh},formatDependencies:{typedDependencies:Tp,createFormat:yl},isNumericDependencies:{typedDependencies:Tp,createIsNumeric:xh},multiplyScalarDependencies:Fp,numberDependencies:Ap,powDependencies:{ComplexDependencies:Ep,fractionDependencies:zp,identityDependencies:qp,matrixDependencies:Rp,multiplyDependencies:Up,numberDependencies:Ap,typedDependencies:Tp,createPow:wl},roundDependencies:Lp,subtractDependencies:jp,createUnitClass:Fl},Zp={UnitDependencies:Yp,typedDependencies:Tp,createUnitFunction:Pl},Xp={UnitDependencies:Yp,typedDependencies:Tp,createCreateUnit:Ul},Jp={createNode:Hl},Qp={UnitDependencies:Yp,NodeDependencies:Jp,createSymbolNode:du("SymbolNode",["math","?Unit","Node"],(e=>{var{math:t,Unit:n,Node:r}=e;function i(e){return!!n&&n.isValuelessUnit(e)}function s(e){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('String expected for parameter "name"');this.name=e}return s.prototype=new r,s.prototype.type="SymbolNode",s.prototype.isSymbolNode=!0,s.prototype._compile=function(e,t){var r=this.name;if(!0===t[r])return function(e,t,n){return t[r]};if(r in e)return function(t,n,i){return il(r in t?t:e,r)};var s=i(r);return function(e,t,i){return r in e?il(e,r):s?new n(null,r):function(e){throw new Error("Undefined symbol "+e)}(r)}},s.prototype.forEach=function(e){},s.prototype.map=function(e){return this.clone()},s.prototype.clone=function(){return new s(this.name)},s.prototype._toString=function(e){return this.name},s.prototype.toHTML=function(e){var t=Ja(this.name);return"true"===t||"false"===t?'<span class="math-symbol math-boolean">'+t+"</span>":"i"===t?'<span class="math-symbol math-imaginary-symbol">'+t+"</span>":"Infinity"===t?'<span class="math-symbol math-infinity-symbol">'+t+"</span>":"NaN"===t?'<span class="math-symbol math-nan-symbol">'+t+"</span>":"null"===t?'<span class="math-symbol math-null-symbol">'+t+"</span>":"undefined"===t?'<span class="math-symbol math-undefined-symbol">'+t+"</span>":'<span class="math-symbol">'+t+"</span>"},s.prototype.toJSON=function(){return{mathjs:"SymbolNode",name:this.name}},s.fromJSON=function(e){return new s(e.name)},s.prototype._toTex=function(e){var n=!1;void 0===t[this.name]&&i(this.name)&&(n=!0);var r=lp(this.name,n);return"\\"===r[0]?r:" "+r},s}),{isClass:!0,isNode:!0})},Kp={parseDependencies:{AccessorNodeDependencies:{NodeDependencies:Jp,subsetDependencies:Gp,createAccessorNode:Gl},ArrayNodeDependencies:{NodeDependencies:Jp,createArrayNode:Yl},AssignmentNodeDependencies:{matrixDependencies:Rp,NodeDependencies:Jp,subsetDependencies:Gp,createAssignmentNode:Kl},BlockNodeDependencies:{NodeDependencies:Jp,ResultSetDependencies:{createResultSet:Mu},createBlockNode:ep},ConditionalNodeDependencies:{NodeDependencies:Jp,createConditionalNode:tp},ConstantNodeDependencies:{NodeDependencies:Jp,createConstantNode:pp},FunctionAssignmentNodeDependencies:{NodeDependencies:Jp,typedDependencies:Tp,createFunctionAssignmentNode:fp},FunctionNodeDependencies:{NodeDependencies:Jp,SymbolNodeDependencies:Qp,createFunctionNode:du("FunctionNode",["math","Node","SymbolNode"],(e=>{var{math:t,Node:n,SymbolNode:r}=e;function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if("string"==typeof e&&(e=new r(e)),!pa(e))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(t)||!t.every(pa))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=e,this.args=t||[],Object.defineProperty(this,"name",{get:function(){return this.fn.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}i.prototype=new n,i.prototype.type="FunctionNode",i.prototype.isFunctionNode=!0,i.prototype._compile=function(e,t){if(!(this instanceof i))throw new TypeError("No valid FunctionNode");var n=cu(this.args,(function(n){return n._compile(e,t)}));if(ya(this.fn)){var r=this.fn.name,s=r in e?il(e,r):void 0;if("function"==typeof s&&!0===s.rawArgs){var o=this.args;return function(t,n,i){return(r in t?il(t,r):s)(o,e,wp({},t,n))}}if(1===n.length){var a=n[0];return function(e,t,n){return(r in e?il(e,r):s)(a(e,t,n))}}if(2===n.length){var u=n[0],c=n[1];return function(e,t,n){return(r in e?il(e,r):s)(u(e,t,n),c(e,t,n))}}return function(e,t,i){return(r in e?il(e,r):s).apply(null,cu(n,(function(n){return n(e,t,i)})))}}if(ra(this.fn)&&la(this.fn.index)&&this.fn.index.isObjectProperty()){var h=this.fn.object._compile(e,t),l=this.fn.index.getObjectProperty(),p=this.args;return function(t,r,i){var s=h(t,r,i);return function(e,t){if(!al(e,t))throw new Error('No access to method "'+t+'"')}(s,l),s[l]&&s[l].rawArgs?s[l](p,e,wp({},t,r)):s[l].apply(s,cu(n,(function(e){return e(t,r,i)})))}}var f=this.fn._compile(e,t),d=this.args;return function(t,r,i){var s=f(t,r,i);return s&&s.rawArgs?s(d,e,wp({},t,r)):s.apply(s,cu(n,(function(e){return e(t,r,i)})))}},i.prototype.forEach=function(e){e(this.fn,"fn",this);for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)},i.prototype.map=function(e){for(var t=this._ifNode(e(this.fn,"fn",this)),n=[],r=0;r<this.args.length;r++)n[r]=this._ifNode(e(this.args[r],"args["+r+"]",this));return new i(t,n)},i.prototype.clone=function(){return new i(this.fn,this.args.slice(0))};var s=i.prototype.toString;function o(e,t,n){for(var r,i="",s=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,o=0;null!==(r=s.exec(e));)if(i+=e.substring(o,r.index),o=r.index,"$$"===r[0])i+="$",o++;else{o+=r[0].length;var a=t[r[1]];if(!a)throw new ReferenceError("Template: Property "+r[1]+" does not exist.");if(void 0===r[2])switch(typeof a){case"string":i+=a;break;case"object":if(pa(a))i+=a.toTex(n);else{if(!Array.isArray(a))throw new TypeError("Template: "+r[1]+" has to be a Node, String or array of Nodes");i+=a.map((function(e,t){if(pa(e))return e.toTex(n);throw new TypeError("Template: "+r[1]+"["+t+"] is not a Node.")})).join(",")}break;default:throw new TypeError("Template: "+r[1]+" has to be a Node, String or array of Nodes")}else{if(!pa(a[r[2]]&&a[r[2]]))throw new TypeError("Template: "+r[1]+"["+r[2]+"] is not a Node.");i+=a[r[2]].toTex(n)}}return i+e.slice(o)}i.prototype.toString=function(e){var t,n=this.fn.toString(e);return e&&"object"==typeof e.handler&&Oa(e.handler,n)&&(t=e.handler[n](this,e)),void 0!==t?t:s.call(this,e)},i.prototype._toString=function(e){var t=this.args.map((function(t){return t.toString(e)}));return(ca(this.fn)?"("+this.fn.toString(e)+")":this.fn.toString(e))+"("+t.join(", ")+")"},i.prototype.toJSON=function(){return{mathjs:"FunctionNode",fn:this.fn,args:this.args}},i.fromJSON=function(e){return new i(e.fn,e.args)},i.prototype.toHTML=function(e){var t=this.args.map((function(t){return t.toHTML(e)}));return'<span class="math-function">'+Ja(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'};var a=i.prototype.toTex;return i.prototype.toTex=function(e){var t;return e&&"object"==typeof e.handler&&Oa(e.handler,this.name)&&(t=e.handler[this.name](this,e)),void 0!==t?t:a.call(this,e)},i.prototype._toTex=function(e){var n,r,i=this.args.map((function(t){return t.toTex(e)}));switch(up[this.name]&&(n=up[this.name]),!t[this.name]||"function"!=typeof t[this.name].toTex&&"object"!=typeof t[this.name].toTex&&"string"!=typeof t[this.name].toTex||(n=t[this.name].toTex),typeof n){case"function":r=n(this,e);break;case"string":r=o(n,this,e);break;case"object":switch(typeof n[i.length]){case"function":r=n[i.length](this,e);break;case"string":r=o(n[i.length],this,e)}}return void 0!==r?r:o("\\mathrm{${name}}\\left(${args}\\right)",this,e)},i.prototype.getIdentifier=function(){return this.type+":"+this.name},i}),{isClass:!0,isNode:!0})},IndexNodeDependencies:{NodeDependencies:Jp,RangeDependencies:{createRangeClass:sh},sizeDependencies:Pp,createIndexNode:dp},ObjectNodeDependencies:{NodeDependencies:Jp,createObjectNode:mp},OperatorNodeDependencies:{NodeDependencies:Jp,createOperatorNode:gp},ParenthesisNodeDependencies:{NodeDependencies:Jp,createParenthesisNode:yp},RangeNodeDependencies:{NodeDependencies:Jp,createRangeNode:vp},RelationalNodeDependencies:{NodeDependencies:Jp,createRelationalNode:xp},SymbolNodeDependencies:Qp,numericDependencies:$p,typedDependencies:Tp,createParse:du("parse",["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],(e=>{var{typed:t,numeric:n,config:r,AccessorNode:i,ArrayNode:s,AssignmentNode:o,BlockNode:a,ConditionalNode:u,ConstantNode:c,FunctionAssignmentNode:h,FunctionNode:l,IndexNode:p,ObjectNode:f,OperatorNode:d,ParenthesisNode:m,RangeNode:g,RelationalNode:y,SymbolNode:v}=e,x=t("parse",{string:function(e){return k(e,{})},"Array | Matrix":function(e){return w(e,{})},"string, Object":function(e,t){return k(e,void 0!==t.nodes?t.nodes:{})},"Array | Matrix, Object":w});function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0!==t.nodes?t.nodes:{};return uh(e,(function(e){if("string"!=typeof e)throw new TypeError("String expected");return k(e,n)}))}var b={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},_={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},E={true:!0,false:!1,null:null,undefined:void 0},M=["NaN","Infinity"];function N(e,t){return e.expression.substr(e.index,t)}function S(e){return N(e,1)}function T(e){e.index++}function O(e){return e.expression.charAt(e.index-1)}function C(e){return e.expression.charAt(e.index+1)}function A(e){for(e.tokenType=0,e.token="",e.comment="";x.isWhitespace(S(e),e.nestingLevel);)T(e);if("#"===S(e))for(;"\n"!==S(e)&&""!==S(e);)e.comment+=S(e),T(e);if(""!==S(e)){if("\n"===S(e)&&!e.nestingLevel)return e.tokenType=1,e.token=S(e),void T(e);var t=S(e),n=N(e,2),r=N(e,3);if(3===r.length&&b[r])return e.tokenType=1,e.token=r,T(e),T(e),void T(e);if(2===n.length&&b[n])return e.tokenType=1,e.token=n,T(e),void T(e);if(b[t])return e.tokenType=1,e.token=t,void T(e);if(x.isDigitDot(t)){e.tokenType=2;var i=N(e,2);if("0b"===i||"0o"===i||"0x"===i){for(e.token+=S(e),T(e),e.token+=S(e),T(e);x.isHexDigit(S(e));)e.token+=S(e),T(e);return}if("."===S(e))e.token+=S(e),T(e),x.isDigit(S(e))||(e.tokenType=1);else{for(;x.isDigit(S(e));)e.token+=S(e),T(e);x.isDecimalMark(S(e),C(e))&&(e.token+=S(e),T(e))}for(;x.isDigit(S(e));)e.token+=S(e),T(e);if("E"===S(e)||"e"===S(e))if(x.isDigit(C(e))||"-"===C(e)||"+"===C(e)){if(e.token+=S(e),T(e),"+"!==S(e)&&"-"!==S(e)||(e.token+=S(e),T(e)),!x.isDigit(S(e)))throw te(e,'Digit expected, got "'+S(e)+'"');for(;x.isDigit(S(e));)e.token+=S(e),T(e);if(x.isDecimalMark(S(e),C(e)))throw te(e,'Digit expected, got "'+S(e)+'"')}else if("."===C(e))throw T(e),te(e,'Digit expected, got "'+S(e)+'"')}else{if(!x.isAlpha(S(e),O(e),C(e))){for(e.tokenType=4;""!==S(e);)e.token+=S(e),T(e);throw te(e,'Syntax error in part "'+e.token+'"')}for(;x.isAlpha(S(e),O(e),C(e))||x.isDigit(S(e));)e.token+=S(e),T(e);Oa(_,e.token)?e.tokenType=1:e.tokenType=3}}else e.tokenType=1}function z(e){do{A(e)}while("\n"===e.token)}function R(e){e.nestingLevel++}function D(e){e.nestingLevel--}function k(e,t){var n={extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:0,nestingLevel:0,conditionalLevel:null};bp(n,{expression:e,extraNodes:t}),A(n);var r=function(e){var t,n,r=[];for(""!==e.token&&"\n"!==e.token&&";"!==e.token&&((t=I(e)).comment=e.comment);"\n"===e.token||";"===e.token;)0===r.length&&t&&(n=";"!==e.token,r.push({node:t,visible:n})),A(e),"\n"!==e.token&&";"!==e.token&&""!==e.token&&((t=I(e)).comment=e.comment,n=";"!==e.token,r.push({node:t,visible:n}));return r.length>0?new a(r):(t||((t=new c(void 0)).comment=e.comment),t)}(n);if(""!==n.token)throw 1===n.tokenType?ne(n,"Unexpected operator "+n.token):te(n,'Unexpected part "'+n.token+'"');return r}function I(e){var t,n,r,i,s=function(e){for(var t=function(e){for(var t=L(e);"or"===e.token;)z(e),t=new d("or","or",[t,L(e)]);return t}(e);"?"===e.token;){var n=e.conditionalLevel;e.conditionalLevel=e.nestingLevel,z(e);var r=t,i=I(e);if(":"!==e.token)throw te(e,"False part of conditional expression expected");e.conditionalLevel=null,z(e);var s=I(e);t=new u(r,i,s),e.conditionalLevel=n}return t}(e);if("="===e.token){if(ya(s))return t=s.name,z(e),r=I(e),new o(new v(t),r);if(ra(s))return z(e),r=I(e),new o(s.object,s.index,r);if(ha(s)&&ya(s.fn)&&(i=!0,n=[],t=s.name,s.args.forEach((function(e,t){ya(e)?n[t]=e.name:i=!1})),i))return z(e),r=I(e),new h(t,n,r);throw te(e,"Invalid left hand side of assignment operator =")}return s}function L(e){for(var t=B(e);"xor"===e.token;)z(e),t=new d("xor","xor",[t,B(e)]);return t}function B(e){for(var t=F(e);"and"===e.token;)z(e),t=new d("and","and",[t,F(e)]);return t}function F(e){for(var t=P(e);"|"===e.token;)z(e),t=new d("|","bitOr",[t,P(e)]);return t}function P(e){for(var t=U(e);"^|"===e.token;)z(e),t=new d("^|","bitXor",[t,U(e)]);return t}function U(e){for(var t=j(e);"&"===e.token;)z(e),t=new d("&","bitAnd",[t,j(e)]);return t}function j(e){for(var t=[V(e)],n=[],r={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Oa(r,e.token);){var i={name:e.token,fn:r[e.token]};n.push(i),z(e),t.push(V(e))}return 1===t.length?t[0]:2===t.length?new d(n[0].name,n[0].fn,t):new y(n.map((e=>e.fn)),t)}function V(e){var t,n,r,i;t=q(e);for(var s={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Oa(s,e.token);)r=s[n=e.token],z(e),i=[t,q(e)],t=new d(n,r,i);return t}function q(e){var t,n,r,i;t=H(e);for(var s={to:"to",in:"to"};Oa(s,e.token);)r=s[n=e.token],z(e),"in"===n&&""===e.token?t=new d("*","multiply",[t,new v("in")],!0):(i=[t,H(e)],t=new d(n,r,i));return t}function H(e){var t,n=[];if(t=":"===e.token?new c(1):$(e),":"===e.token&&e.conditionalLevel!==e.nestingLevel){for(n.push(t);":"===e.token&&n.length<3;)z(e),")"===e.token||"]"===e.token||","===e.token||""===e.token?n.push(new v("end")):n.push($(e));t=3===n.length?new g(n[0],n[2],n[1]):new g(n[0],n[1])}return t}function $(e){var t,n,r,i;t=W(e);for(var s={"+":"add","-":"subtract"};Oa(s,e.token);)r=s[n=e.token],z(e),i=[t,W(e)],t=new d(n,r,i);return t}function W(e){var t,n,r,i;n=t=G(e);for(var s={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};Oa(s,e.token);)i=s[r=e.token],z(e),n=G(e),t=new d(r,i,[t,n]);return t}function G(e){var t,n;for(n=t=Y(e);3===e.tokenType||"in"===e.token&&ua(t)||!(2!==e.tokenType||ua(n)||da(n)&&"!"!==n.op)||"("===e.token;)n=Y(e),t=new d("*","multiply",[t,n],!0);return t}function Y(e){for(var t=Z(e),n=t,r=[];"/"===e.token&&ua(n);){if(r.push(bp({},e)),z(e),2!==e.tokenType){bp(e,r.pop());break}if(r.push(bp({},e)),z(e),3!==e.tokenType&&"("!==e.token){r.pop(),bp(e,r.pop());break}bp(e,r.pop()),r.pop(),n=Z(e),t=new d("/","divide",[t,n])}return t}function Z(e){var t,i,o,a={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Oa(a,e.token)?(o=a[e.token],t=e.token,z(e),i=[Z(e)],new d(t,o,i)):function(e){var t,i,o,a;return t=function(e){var t,i,o;t=function(e){var t=[];if(3===e.tokenType&&Oa(e.extraNodes,e.token)){var i=e.extraNodes[e.token];if(A(e),"("===e.token){if(t=[],R(e),A(e),")"!==e.token)for(t.push(I(e));","===e.token;)A(e),t.push(I(e));if(")"!==e.token)throw te(e,"Parenthesis ) expected");D(e),A(e)}return new i(t)}return function(e){var t;return 3===e.tokenType||1===e.tokenType&&e.token in _?(t=e.token,A(e),X(e,Oa(E,t)?new c(E[t]):-1!==M.indexOf(t)?new c(n(t,"number")):new v(t))):function(e){var t;return'"'===e.token?(t=J(e),X(e,new c(t))):function(e){var t;return"'"===e.token?(t=Q(e),X(e,new c(t))):function(e){var t,i,o,a;if("["===e.token){if(R(e),A(e),"]"!==e.token){var u=K(e);if(";"===e.token){for(o=1,i=[u];";"===e.token;)A(e),i[o]=K(e),o++;if("]"!==e.token)throw te(e,"End of matrix ] expected");D(e),A(e),a=i[0].items.length;for(var h=1;h<o;h++)if(i[h].items.length!==a)throw ne(e,"Column dimensions mismatch ("+i[h].items.length+" !== "+a+")");t=new s(i)}else{if("]"!==e.token)throw te(e,"End of matrix ] expected");D(e),A(e),t=u}}else D(e),A(e),t=new s([]);return X(e,t)}return function(e){if("{"===e.token){var t;R(e);var i={};do{if(A(e),"}"!==e.token){if('"'===e.token)t=J(e);else if("'"===e.token)t=Q(e);else{if(!(3===e.tokenType||1===e.tokenType&&e.token in _))throw te(e,"Symbol or string expected as object key");t=e.token,A(e)}if(":"!==e.token)throw te(e,"Colon : expected after object key");A(e),i[t]=I(e)}}while(","===e.token);if("}"!==e.token)throw te(e,"Comma , or bracket } expected after object value");D(e),A(e);var s=new f(i);return X(e,s)}return function(e){var t;return 2===e.tokenType?(t=e.token,A(e),new c(n(t,r.number))):function(e){var t;if("("===e.token){if(R(e),A(e),t=I(e),")"!==e.token)throw te(e,"Parenthesis ) expected");return D(e),A(e),X(e,t=new m(t))}return function(e){throw""===e.token?te(e,"Unexpected end of expression"):te(e,"Value expected")}(e)}(e)}(e)}(e)}(e)}(e)}(e)}(e)}(e);for(var a={"!":"factorial","'":"ctranspose"};Oa(a,e.token);)o=a[i=e.token],A(e),t=X(e,t=new d(i,o,[t]));return t}(e),("^"===e.token||".^"===e.token)&&(o="^"===(i=e.token)?"pow":"dotPow",z(e),a=[t,Z(e)],t=new d(i,o,a)),t}(e)}function X(e,t,n){for(var r;!("("!==e.token&&"["!==e.token&&"."!==e.token||n&&-1===n.indexOf(e.token));)if(r=[],"("===e.token){if(!ya(t)&&!ra(t))return t;if(R(e),A(e),")"!==e.token)for(r.push(I(e));","===e.token;)A(e),r.push(I(e));if(")"!==e.token)throw te(e,"Parenthesis ) expected");D(e),A(e),t=new l(t,r)}else if("["===e.token){if(R(e),A(e),"]"!==e.token)for(r.push(I(e));","===e.token;)A(e),r.push(I(e));if("]"!==e.token)throw te(e,"Parenthesis ] expected");D(e),A(e),t=new i(t,new p(r))}else{if(A(e),3!==e.tokenType)throw te(e,"Property name expected after dot");r.push(new c(e.token)),A(e),t=new i(t,new p(r,!0))}return t}function J(e){for(var t="";""!==S(e)&&'"'!==S(e);)"\\"===S(e)&&(t+=S(e),T(e)),t+=S(e),T(e);if(A(e),'"'!==e.token)throw te(e,'End of string " expected');return A(e),JSON.parse('"'+t+'"')}function Q(e){for(var t="";""!==S(e)&&"'"!==S(e);)"\\"===S(e)&&(t+=S(e),T(e)),t+=S(e),T(e);if(A(e),"'"!==e.token)throw te(e,"End of string ' expected");return A(e),JSON.parse('"'+t+'"')}function K(e){for(var t=[I(e)],n=1;","===e.token;)A(e),t[n]=I(e),n++;return new s(t)}function ee(e){return e.index-e.token.length+1}function te(e,t){var n=ee(e),r=new SyntaxError(t+" (char "+n+")");return r.char=n,r}function ne(e,t){var n=ee(e),r=new SyntaxError(t+" (char "+n+")");return r.char=n,r}return x.isAlpha=function(e,t,n){return x.isValidLatinOrGreek(e)||x.isValidMathSymbol(e,n)||x.isValidMathSymbol(t,e)},x.isValidLatinOrGreek=function(e){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(e)},x.isValidMathSymbol=function(e,t){return/^[\uD835]$/.test(e)&&/^[\uDC00-\uDFFF]$/.test(t)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(t)},x.isWhitespace=function(e,t){return" "===e||"\t"===e||"\n"===e&&t>0},x.isDecimalMark=function(e,t){return"."===e&&"/"!==t&&"*"!==t&&"^"!==t},x.isDigitDot=function(e){return e>="0"&&e<="9"||"."===e},x.isDigit=function(e){return e>="0"&&e<="9"},x.isHexDigit=function(e){return e>="0"&&e<="9"||e>="a"&&e<="f"||e>="A"&&e<="F"},x}))},typedDependencies:Tp,createEvaluate:du("evaluate",["typed","parse"],(e=>{var{typed:t,parse:n}=e;return t("evaluate",{string:function(e){return n(e).compile().evaluate({})},"string, Object":function(e,t){return n(e).compile().evaluate(t)},"Array | Matrix":function(e){var t={};return uh(e,(function(e){return n(e).compile().evaluate(t)}))},"Array | Matrix, Object":function(e,t){return uh(e,(function(e){return n(e).compile().evaluate(t)}))}})}))},ef={divideScalarDependencies:Wp,equalScalarDependencies:Op,invDependencies:{absDependencies:kp,addScalarDependencies:Ip,detDependencies:{lupDependencies:{DenseMatrixDependencies:Np,SpaDependencies:{FibonacciHeapDependencies:{largerDependencies:Vp,smallerDependencies:{DenseMatrixDependencies:Np,matrixDependencies:Rp,typedDependencies:Tp,createSmaller:Ol},createFibonacciHeapClass:Al},addScalarDependencies:Ip,equalScalarDependencies:Op,createSpaClass:zl},SparseMatrixDependencies:Cp,absDependencies:kp,addScalarDependencies:Ip,divideScalarDependencies:Wp,equalScalarDependencies:Op,largerDependencies:Vp,matrixDependencies:Rp,multiplyScalarDependencies:Fp,subtractDependencies:jp,typedDependencies:Tp,unaryMinusDependencies:Dp,createLup:du("lup",["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],(e=>{var{typed:t,matrix:n,abs:r,addScalar:i,divideScalar:s,multiplyScalar:o,subtract:a,larger:u,equalScalar:c,unaryMinus:h,DenseMatrix:l,SparseMatrix:p,Spa:f}=e;return t("lup",{DenseMatrix:function(e){return d(e)},SparseMatrix:function(e){return function(e){var t,n,i,a=e._size[0],l=e._size[1],d=Math.min(a,l),m=e._values,g=e._index,y=e._ptr,v=[],x=[],w=[],b=[a,d],_=[],E=[],M=[],N=[d,l],S=[],T=[];for(t=0;t<a;t++)S[t]=t,T[t]=t;var O=function(e,t){var n=T[e],r=T[t];S[n]=t,S[r]=e,T[e]=r,T[t]=n},C=function(){var e=new f;n<a&&(w.push(v.length),v.push(1),x.push(n)),M.push(_.length);var l=y[n],d=y[n+1];for(i=l;i<d;i++)t=g[i],e.set(S[t],m[i]);n>0&&e.forEach(0,n-1,(function(t,n){p._forEachRow(t,v,x,w,(function(r,i){r>t&&e.accumulate(r,h(o(i,n)))}))}));var T=n,C=e.get(n),A=r(C);e.forEach(n+1,a-1,(function(e,t){var n=r(t);u(n,A)&&(T=e,A=n,C=t)})),n!==T&&(p._swapRows(n,T,b[1],v,x,w),p._swapRows(n,T,N[1],_,E,M),e.swap(n,T),O(n,T)),e.forEach(0,a-1,(function(e,t){e<=n?(_.push(t),E.push(e)):(t=s(t,C),c(t,0)||(v.push(t),x.push(e)))}))};for(n=0;n<l;n++)C();return M.push(_.length),w.push(v.length),{L:new p({values:v,index:x,ptr:w,size:b}),U:new p({values:_,index:E,ptr:M,size:N}),p:S,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}(e)},Array:function(e){var t=d(n(e));return{L:t.L.valueOf(),U:t.U.valueOf(),p:t.p}}});function d(e){var t,n,h,p=e._size[0],f=e._size[1],d=Math.min(p,f),m=wa(e._data),g=[],y=[p,d],v=[],x=[d,f],w=[];for(t=0;t<p;t++)w[t]=t;for(n=0;n<f;n++){if(n>0)for(t=0;t<p;t++){var b=Math.min(t,n),_=0;for(h=0;h<b;h++)_=i(_,o(m[t][h],m[h][n]));m[t][n]=a(m[t][n],_)}var E=n,M=0,N=0;for(t=n;t<p;t++){var S=m[t][n],T=r(S);u(T,M)&&(E=t,M=T,N=S)}if(n!==E&&(w[n]=[w[E],w[E]=w[n]][0],l._swapRows(n,E,m)),n<p)for(t=n+1;t<p;t++){var O=m[t][n];c(O,0)||(m[t][n]=s(m[t][n],N))}}for(n=0;n<f;n++)for(t=0;t<p;t++)0===n&&(t<f&&(v[t]=[]),g[t]=[]),t<n?(t<f&&(v[t][n]=m[t][n]),n<p&&(g[t][n]=0)):t!==n?(t<f&&(v[t][n]=0),n<p&&(g[t][n]=m[t][n])):(t<f&&(v[t][n]=m[t][n]),n<p&&(g[t][n]=1));var C=new l({data:g,size:y}),A=new l({data:v,size:x}),z=[];for(t=0,d=w.length;t<d;t++)z[w[t]]=t;return{L:C,U:A,p:z,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}}))},matrixDependencies:Rp,multiplyDependencies:Up,subtractDependencies:jp,typedDependencies:Tp,unaryMinusDependencies:Dp,createDet:du("det",["typed","matrix","subtract","multiply","unaryMinus","lup"],(e=>{var{typed:t,matrix:n,subtract:r,multiply:i,unaryMinus:s,lup:o}=e;return t("det",{any:function(e){return wa(e)},"Array | Matrix":function(e){var t;switch((t=Vo(e)?e.size():Array.isArray(e)?(e=n(e)).size():[]).length){case 0:return wa(e);case 1:if(1===t[0])return wa(e.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+Za(t)+")");case 2:var a=t[0];if(a===t[1])return function(e,t,n){if(1===t)return wa(e[0][0]);if(2===t)return r(i(e[0][0],e[1][1]),i(e[1][0],e[0][1]));for(var a=o(e),u=a.U[0][0],c=1;c<t;c++)u=i(u,a.U[c][c]);for(var h=0,l=0,p=[];;){for(;p[l];)l++;if(l>=t)break;for(var f=l,d=0;!p[a.p[f]];)p[a.p[f]]=!0,f=a.p[f],d++;d%2==0&&h++}return h%2==0?u:s(u)}(e.clone().valueOf(),a);throw new RangeError("Matrix must be square (size: "+Za(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Za(t)+")")}}})}))},divideScalarDependencies:Wp,identityDependencies:qp,matrixDependencies:Rp,multiplyDependencies:Up,typedDependencies:Tp,unaryMinusDependencies:Dp,createInv:du("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],(e=>{var{typed:t,matrix:n,divideScalar:r,addScalar:i,multiply:s,unaryMinus:o,det:a,identity:u,abs:c}=e;return t("inv",{"Array | Matrix":function(e){var t=Vo(e)?e.size():tu(e);switch(t.length){case 1:if(1===t[0])return Vo(e)?n([r(1,e.valueOf()[0])]):[r(1,e[0])];throw new RangeError("Matrix must be square (size: "+Za(t)+")");case 2:var i=t[0],s=t[1];if(i===s)return Vo(e)?n(h(e.valueOf(),i,s),e.storage()):h(e,i,s);throw new RangeError("Matrix must be square (size: "+Za(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Za(t)+")")}},any:function(e){return r(1,e)}});function h(e,t,n){var h,l,p,f,d;if(1===t){if(0===(f=e[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,f)]]}if(2===t){var m=a(e);if(0===m)throw Error("Cannot calculate inverse, determinant is zero");return[[r(e[1][1],m),r(o(e[0][1]),m)],[r(o(e[1][0]),m),r(e[0][0],m)]]}var g=e.concat();for(h=0;h<t;h++)g[h]=g[h].concat();for(var y=u(t).valueOf(),v=0;v<n;v++){var x=c(g[v][v]),w=v;for(h=v+1;h<t;)c(g[h][v])>x&&(x=c(g[h][v]),w=h),h++;if(0===x)throw Error("Cannot calculate inverse, determinant is zero");(h=w)!==v&&(d=g[v],g[v]=g[h],g[h]=d,d=y[v],y[v]=y[h],y[h]=d);var b=g[v],_=y[v];for(h=0;h<t;h++){var E=g[h],M=y[h];if(h!==v){if(0!==E[v]){for(p=r(o(E[v]),b[v]),l=v;l<n;l++)E[l]=i(E[l],s(p,b[l]));for(l=0;l<n;l++)M[l]=i(M[l],s(p,_[l]))}}else{for(p=b[v],l=v;l<n;l++)E[l]=r(E[l],p);for(l=0;l<n;l++)M[l]=r(M[l],p)}}}return y}}))},matrixDependencies:Rp,multiplyDependencies:Up,typedDependencies:Tp,createDivide:du("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],(e=>{var{typed:t,matrix:n,multiply:r,equalScalar:i,divideScalar:s,inv:o}=e,a=zh({typed:t,equalScalar:i}),u=Rh({typed:t});return t("divide",_a({"Array | Matrix, Array | Matrix":function(e,t){return r(e,o(t))},"DenseMatrix, any":function(e,t){return u(e,t,s,!1)},"SparseMatrix, any":function(e,t){return a(e,t,s,!1)},"Array, any":function(e,t){return u(n(e),t,s,!1).valueOf()},"any, Array | Matrix":function(e,t){return r(e,o(t))}},s.signatures))}))},tf={exports:{}};function nf(){}nf.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function i(){r.off(e,i),t.apply(n,arguments)}return i._=t,this.on(e,i,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var s=0,o=r.length;s<o;s++)r[s].fn!==t&&r[s].fn._!==t&&i.push(r[s]);return i.length?n[e]=i:delete n[e],this}},tf.exports=nf,tf.exports.TinyEmitter=nf;var rf=tf.exports;function sf(){return(sf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function of(e,t){var n=sf({},ko,t);if("function"!=typeof Object.create)throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var r,i,s=(r={isNumber:Io,isComplex:Bo,isBigNumber:Lo,isFraction:Fo,isUnit:Po,isString:Uo,isArray:jo,isMatrix:Vo,isCollection:qo,isDenseMatrix:Ho,isSparseMatrix:$o,isRange:Wo,isIndex:Go,isBoolean:Yo,isResultSet:Zo,isHelp:Xo,isFunction:Jo,isDate:Qo,isRegExp:Ko,isObject:ea,isNull:ta,isUndefined:na,isAccessorNode:ra,isArrayNode:ia,isAssignmentNode:sa,isBlockNode:oa,isConditionalNode:aa,isConstantNode:ua,isFunctionAssignmentNode:ca,isFunctionNode:ha,isIndexNode:la,isNode:pa,isObjectNode:fa,isOperatorNode:da,isParenthesisNode:ma,isRangeNode:ga,isSymbolNode:ya,isChain:va},i=new rf,r.on=i.on.bind(i),r.off=i.off.bind(i),r.once=i.once.bind(i),r.emit=i.emit.bind(i),r);s.config=Ra(n,s.emit),s.expression={transform:{},mathWithTransform:{config:s.config}};var o={},a=function(e,t,n,r){function i(t,i,o){var a;if(o.wrap&&"function"==typeof i&&(i=function(e){var t=function(){for(var t=[],r=0,i=arguments.length;r<i;r++){var s=arguments[r];t[r]=s&&s.valueOf()}return e.apply(n,t)};return e.transform&&(t.transform=e.transform),t}(i)),"function"==typeof(a=i)&&"string"==typeof a.signature&&(i=e(t,{[i.signature]:i})),c(n[t])&&c(i))return i=o.override?e(t,i.signatures):e(n[t],i),n[t]=i,delete r[t],s(t,i),void n.emit("import",t,(function(){return i}));if(void 0===n[t]||o.override)return n[t]=i,delete r[t],s(t,i),void n.emit("import",t,(function(){return i}));if(!o.silent)throw new Error('Cannot import "'+t+'": already exists')}function s(e,t){t&&"function"==typeof t.transform?(n.expression.transform[e]=t.transform,h(e)&&(n.expression.mathWithTransform[e]=t.transform)):(delete n.expression.transform[e],h(e)&&(n.expression.mathWithTransform[e]=t))}function o(e){delete n.expression.transform[e],h(e)?n.expression.mathWithTransform[e]=n[e]:delete n.expression.mathWithTransform[e]}function a(t,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.fn;if(fu(s,"."))throw new Error("Factory name should not contain a nested path. Name: "+JSON.stringify(s));var a=p(t)?n.expression.transform:n,u=s in n.expression.transform,h=Oa(a,s)?a[s]:void 0,f=function(){var r={};t.dependencies.map(gu).forEach((e=>{if(fu(e,"."))throw new Error("Factory dependency should not contain a nested path. Name: "+JSON.stringify(e));"math"===e?r.math=n:"mathWithTransform"===e?r.mathWithTransform=n.expression.mathWithTransform:"classes"===e?r.classes=n:r[e]=n[e]}));var o=t(r);if(o&&"function"==typeof o.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(void 0===h||i.override)return o;if(c(h)&&c(o))return e(h,o);if(i.silent)return h;throw new Error('Cannot import "'+s+'": already exists')};t.meta&&!1===t.meta.lazy?(a[s]=f(),h&&u?o(s):(p(t)||l(t))&&Ta(n.expression.mathWithTransform,s,(()=>a[s]))):(Ta(a,s,f),h&&u?o(s):(p(t)||l(t))&&Ta(n.expression.mathWithTransform,s,(()=>a[s]))),r[s]=t,n.emit("import",s,f)}function u(e){return"function"==typeof e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e||null===e||Po(e)||Bo(e)||Lo(e)||Fo(e)||Vo(e)||Array.isArray(e)}function c(e){return"function"==typeof e&&"object"==typeof e.signatures}function h(e){return!Oa(f,e)}function l(e){return!(-1!==e.fn.indexOf(".")||Oa(f,e.fn)||e.meta&&e.meta.isClass)}function p(e){return void 0!==e&&void 0!==e.meta&&!0===e.meta.isTransformFunction||!1}var f={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return function(e,t){var n=arguments.length;if(1!==n&&2!==n)throw new nl("import",n,1,2);function r(e,n,i){if(Array.isArray(n))n.forEach((t=>r(e,t)));else if("object"==typeof n)for(var s in n)Oa(n,s)&&r(e,n[s],s);else if(mu(n)||void 0!==i){var o=mu(n)?p(n)?n.fn+".transform":n.fn:i;if(Oa(e,o)&&e[o]!==n&&!t.silent)throw new Error('Cannot import "'+o+'" twice');e[o]=n}else if(!t.silent)throw new TypeError("Factory, Object, or Array expected")}t||(t={});var s={};for(var o in r(s,e),s)if(Oa(s,o)){var c=s[o];if(mu(c))a(c,t);else if(u(c))i(o,c,t);else if(!t.silent)throw new TypeError("Factory, Object, or Array expected")}}}((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.typed.apply(s.typed,t)}),0,s,o);return s.import=a,s.on("config",(()=>{Ca(o).forEach((e=>{e&&e.meta&&e.meta.recreateOnConfigChange&&a(e,{override:!0})}))})),s.create=of.bind(null,e),s.factory=du,s.import(Ca(Na(e))),s.ArgumentsError=nl,s.DimensionError=Ka,s.IndexError=eu,s}class af{constructor(e,t){this.viewNode=e,this.bindings=t,this.math=of({evaluateDependencies:Kp,addDependencies:Hp,subtractDependencies:jp,multiplyDependencies:Up,divideDependencies:ef,modDependencies:Bp,numberDependencies:Ap,createUnitDependencies:Xp,unitDependencies:Zp},{predictable:!0}),this.mathCompiledExpressions=new Map,this.mathScope={ratio:void 0,degree:this.math.unit("degree"),meter:this.math.unit("meter"),pixel:this.math.createUnit("pixel",{aliases:["pixels","px"]}),percent:void 0,vdeg:void 0,vw:void 0,vh:void 0},this.epsillonMeters=1e-10,this.epsillonRadians=1e-10,this.epsillonRatio=1e-10,this.transition=new Mo({multiplier:1,duration:0,easing:_o.easeInOut,threshold:0,delay:0,debounce:0,maxWait:10,blend:!0}),this.optimize=new Ls({minFeasibleTime:.02,maxInfeasibleTime:5,relativeTolerance:.001,maxIterationsPerFrame:10,swarmSize:10,pulseFrequencyMin:0,pulseFrequencyMax:1,pulseRate:.4,stepSizeMin:1e-4,stepSizeMax:4,stepSizeStart:1.5}),this.optimizer=new Bs(this),this.viewFrustum=new Do,this.viewResolution=new bi(1e3,1e3),this.deltaTime=1/60,this.time=0,this.maxDeltaTime=1/60,this.nodeMetrics=new Map,this.nodeAdapters=new Map,this.transitionables=[],this.getMetrics=e=>{if(!e)throw new Error("node must be defined");let t=this.nodeMetrics.get(e);return t||(t=new Is(this,e),this.nodeMetrics.set(e,t)),t},this.getState=e=>{if(!e)throw new Error("node must be defined");return this.getMetrics(e).target},this.getAdapter=e=>{let t=this.nodeAdapters.get(e);return t||(t=new Ro(this,e),this.nodeAdapters.set(e,t)),t},this.createTransitionable=(e,t)=>{const n=new zo(this,e,t,this.transition);return this.transitionables.push(n),n},this._prevResolution=new bi,this._prevSize=new bi,this.measureNumberCache={}}get viewMetrics(){if(!this.viewNode)throw new Error("EtherealSystem.viewNode must be defined");return this.getMetrics(this.viewNode)}update(e,t){this.deltaTime=Math.max(e,this.maxDeltaTime),this.time=t,this._prevResolution.equals(this.viewResolution)&&this._prevSize.equals(this.viewFrustum.sizeDegrees)||(this.mathScope.vdeg=this.math.unit(this.viewResolution.y/this.viewFrustum.sizeDegrees.y,"px"),this.mathScope.vw=this.math.unit(this.viewResolution.x/100,"px"),this.mathScope.vh=this.math.unit(this.viewResolution.y/100,"px"),this.measureNumberCache={}),this._prevResolution.copy(this.viewResolution),this._prevSize.copy(this.viewFrustum.sizeDegrees);for(const e of this.nodeMetrics.values()){e.needsUpdate=!0;const t=this.nodeAdapters.get(e.node);t&&(t.opacity.needsUpdate=!0,t.orientation.needsUpdate=!0,t.bounds.needsUpdate=!0,t.outerOrigin.needsUpdate=!0,t.outerOrientation.needsUpdate=!0,t.outerBounds.needsUpdate=!0,t.outerVisualBounds.needsUpdate=!0)}for(const e of this.transitionables)e.needsUpdate=!0;for(const e of this.transitionables)e.update();this.viewMetrics.update();for(const e of this.nodeAdapters.values())e.metrics.update()}measureNumber(e,t){if("number"==typeof e)return e;if(e in this.measureNumberCache)return this.measureNumberCache[e];if(!this.mathCompiledExpressions.has(e)){const t=this.math.parse(e).compile();this.mathCompiledExpressions.set(e,t)}const n=this.mathCompiledExpressions.get(e),r=n.evaluate(this.mathScope),i="number"==typeof r?r:this.math.number(n.evaluate(this.mathScope),t);return this.measureNumberCache[e]=i,i}}function uf(e,t,n,r=0){var i;r++;for(let s=(e=e.shadowRoot||e).firstElementChild;s;s=s.nextElementSibling){if(s.assignedSlot)continue;const e=null==(i=s.assignedElements)?void 0:i.call(s,{flatten:!0});if(e)for(const i of e)t.call(n,i,r)&&uf(s,t,n,r);t.call(n,s,r)&&uf(s,t,n,r)}}new Ai,function(e){function t(){}function n(e,t){if(e=void 0===e?"utf-8":e,t=void 0===t?{fatal:!1}:t,-1===i.indexOf(e.toLowerCase()))throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+e+"') is invalid.");if(t.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function r(e){for(var t=0,n=Math.min(65536,e.length+1),r=new Uint16Array(n),i=[],s=0;;){var o=t<e.length;if(!o||s>=n-1){if(i.push(String.fromCharCode.apply(null,r.subarray(0,s))),!o)return i.join("");e=e.subarray(t),s=t=0}if(0==(128&(o=e[t++])))r[s++]=o;else if(192==(224&o)){var a=63&e[t++];r[s++]=(31&o)<<6|a}else if(224==(240&o)){a=63&e[t++];var u=63&e[t++];r[s++]=(31&o)<<12|a<<6|u}else 240==(248&o)&&(65535<(o=(7&o)<<18|(a=63&e[t++])<<12|(u=63&e[t++])<<6|63&e[t++])&&(o-=65536,r[s++]=o>>>10&1023|55296,o=56320|1023&o),r[s++]=o)}}if(e.TextEncoder&&e.TextDecoder)return!1;var i=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(t.prototype,"encoding",{value:"utf-8"}),t.prototype.encode=function(e,t){if((t=void 0===t?{stream:!1}:t).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");t=0;for(var n=e.length,r=0,i=Math.max(32,n+(n>>>1)+7),s=new Uint8Array(i>>>3<<3);t<n;){var o=e.charCodeAt(t++);if(55296<=o&&56319>=o){if(t<n){var a=e.charCodeAt(t);56320==(64512&a)&&(++t,o=((1023&o)<<10)+(1023&a)+65536)}if(55296<=o&&56319>=o)continue}if(r+4>s.length&&(i+=8,i=(i*=1+t/e.length*2)>>>3<<3,(a=new Uint8Array(i)).set(s),s=a),0==(4294967168&o))s[r++]=o;else{if(0==(4294965248&o))s[r++]=o>>>6&31|192;else if(0==(4294901760&o))s[r++]=o>>>12&15|224,s[r++]=o>>>6&63|128;else{if(0!=(4292870144&o))continue;s[r++]=o>>>18&7|240,s[r++]=o>>>12&63|128,s[r++]=o>>>6&63|128}s[r++]=63&o|128}}return s.slice?s.slice(0,r):s.subarray(0,r)},Object.defineProperty(n.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(n.prototype,"fatal",{value:!1}),Object.defineProperty(n.prototype,"ignoreBOM",{value:!1});var s=r;"function"==typeof Buffer&&Buffer.from?s=function(e){return Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf-8")}:"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&(s=function(e){var t=URL.createObjectURL(new Blob([e],{type:"text/plain;charset=UTF-8"}));try{var n=new XMLHttpRequest;return n.open("GET",t,!1),n.send(),n.responseText}catch(t){return r(e)}finally{URL.revokeObjectURL(t)}}),n.prototype.decode=function(e,t){if((t=void 0===t?{stream:!1}:t).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return e=e instanceof Uint8Array?e:e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer):new Uint8Array(e),s(e)},e.TextEncoder=t,e.TextDecoder=n}("undefined"!=typeof window?window:ka);class cf{constructor(){this.left=0,this.top=0,this.width=0,this.height=0}copy(e){return this.top=e.top,this.left=e.left,this.width=e.width,this.height=e.height,this}}class hf{constructor(){this.left=0,this.top=0,this.right=0,this.bottom=0}copy(e){return this.top=e.top,this.left=e.left,this.right=e.right,this.bottom=e.bottom,this}}function lf(e,t=new cf,n){const r=e.ownerDocument,i=r.documentElement,s=r.body;if(e===i)return function(e,t){const n=e.documentElement,r=e.body,i=getComputedStyle(n),s=getComputedStyle(r);return t.top=r.offsetTop+parseFloat(i.marginTop)||0+parseFloat(s.marginTop)||0,t.left=r.offsetLeft+parseFloat(i.marginLeft)||0+parseFloat(s.marginLeft)||0,t.width=Math.max(Math.max(r.scrollWidth,n.scrollWidth),Math.max(r.offsetWidth,n.offsetWidth),Math.max(r.clientWidth,n.clientWidth)),t.height=Math.max(Math.max(r.scrollHeight,n.scrollHeight),Math.max(r.offsetHeight,n.offsetHeight),Math.max(r.clientHeight,n.clientHeight)),t}(r,t);if(n===e)return t.left=0,t.top=0,t.width=e.offsetWidth,void(t.height=e.offsetHeight);const o=e.ownerDocument.defaultView;let a,u=e,c=u.offsetParent,h=o.getComputedStyle(u,null),l=u.offsetTop,p=u.offsetLeft;for(c&&n&&c.contains(n)&&c!==n&&(lf(n,t,c),p-=t.left,l-=t.top);(u=u.parentElement)&&u!==s&&u!==i&&u!==n&&"fixed"!==h.position;)a=o.getComputedStyle(u,null),l-=u.scrollTop,p-=u.scrollLeft,u===c&&(l+=u.offsetTop,p+=u.offsetLeft,l+=parseFloat(a.borderTopWidth)||0,p+=parseFloat(a.borderLeftWidth)||0,c=u.offsetParent),h=a;return"fixed"===h.position&&(l+=Math.max(i.scrollTop,s.scrollTop),p+=Math.max(i.scrollLeft,s.scrollLeft)),t.left=p,t.top=l,t.width=e.offsetWidth,t.height=e.offsetHeight,t}function pf(e,t){if(null===e.offsetParent)return void(t.left=t.right=t.top=t.bottom=0);let n=getComputedStyle(e);t.left=parseFloat(n.marginLeft)||0,t.right=parseFloat(n.marginRight)||0,t.top=parseFloat(n.marginTop)||0,t.bottom=parseFloat(n.marginBottom)||0}const ff=document.createElement("div");ff.id="VIEWPORT",ff.style.position="fixed",ff.style.width="100vw",ff.style.height="100vh",ff.style.visibility="hidden",ff.style.pointerEvents="none";var df={};!function(e){const t=Symbol("newer"),n=Symbol("older");function r(e,t){"number"!=typeof e&&(t=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,t&&(this.assign(t),e<1&&(this.limit=this.size))}function i(e,r){this.key=e,this.value=r,this[t]=void 0,this[n]=void 0}function s(e){this.entry=e}function o(e){this.entry=e}function a(e){this.entry=e}e.LRUMap=r,r.prototype._markEntryAsUsed=function(e){e!==this.newest&&(e[t]&&(e===this.oldest&&(this.oldest=e[t]),e[t][n]=e[n]),e[n]&&(e[n][t]=e[t]),e[t]=void 0,e[n]=this.newest,this.newest&&(this.newest[t]=e),this.newest=e)},r.prototype.assign=function(e){let r,s=this.limit||Number.MAX_VALUE;this._keymap.clear();let o=e[Symbol.iterator]();for(let e=o.next();!e.done;e=o.next()){let o=new i(e.value[0],e.value[1]);if(this._keymap.set(o.key,o),r?(r[t]=o,o[n]=r):this.oldest=o,r=o,0==s--)throw new Error("overflow")}this.newest=r,this.size=this._keymap.size},r.prototype.get=function(e){var t=this._keymap.get(e);if(t)return this._markEntryAsUsed(t),t.value},r.prototype.set=function(e,r){var s=this._keymap.get(e);return s?(s.value=r,this._markEntryAsUsed(s),this):(this._keymap.set(e,s=new i(e,r)),this.newest?(this.newest[t]=s,s[n]=this.newest):this.oldest=s,this.newest=s,++this.size,this.size>this.limit&&this.shift(),this)},r.prototype.shift=function(){var e=this.oldest;if(e)return this.oldest[t]?(this.oldest=this.oldest[t],this.oldest[n]=void 0):(this.oldest=void 0,this.newest=void 0),e[t]=e[n]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]},r.prototype.find=function(e){let t=this._keymap.get(e);return t?t.value:void 0},r.prototype.has=function(e){return this._keymap.has(e)},r.prototype.delete=function(e){var r=this._keymap.get(e);if(r)return this._keymap.delete(r.key),r[t]&&r[n]?(r[n][t]=r[t],r[t][n]=r[n]):r[t]?(r[t][n]=void 0,this.oldest=r[t]):r[n]?(r[n][t]=void 0,this.newest=r[n]):this.oldest=this.newest=void 0,this.size--,r.value},r.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()},s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:[e.key,e.value]}):{done:!0,value:void 0}},o.prototype[Symbol.iterator]=function(){return this},o.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.key}):{done:!0,value:void 0}},a.prototype[Symbol.iterator]=function(){return this},a.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.value}):{done:!0,value:void 0}},r.prototype.keys=function(){return new o(this.oldest)},r.prototype.values=function(){return new a(this.oldest)},r.prototype.entries=function(){return this},r.prototype[Symbol.iterator]=function(){return new s(this.oldest)},r.prototype.forEach=function(e,n){"object"!=typeof n&&(n=this);let r=this.oldest;for(;r;)e.call(n,r.value,r.key,this),r=r[t]},r.prototype.toJSON=function(){for(var e=new Array(this.size),n=0,r=this.oldest;r;)e[n++]={key:r.key,value:r.value},r=r[t];return e},r.prototype.toString=function(){for(var e="",n=this.oldest;n;)e+=String(n.key)+":"+n.value,(n=n[t])&&(e+=" < ");return e}}(df);var mf={exports:{}};function gf(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function yf(e,t){return" "+e+'="'+gf(t)+'"'}async function vf(e,t){let n=[];for(const r of e.childNodes)n.push(xf(r,t));return Promise.all(n).then((e=>e.join("")))}async function xf(e,t){var n;const r=null==(n=t.replacer)?void 0:n.call(t,e);if("string"==typeof r)return r;if("#document"===e.nodeName||"#document-fragment"===e.nodeName)return vf(e,t);if(e.tagName)return async function(e,t){const n=e.tagName.toLowerCase();let r="<"+n;r+=function(e,t){return e.hasAttribute("xmlns")||!t&&e.namespaceURI===e.parentElement.namespaceURI?"":' xmlns="'+e.namespaceURI+'"'}(e,0===t.depth);const i=vf(e,t);for(const t of e.attributes)"src"===t.name?r+=yf(t.name,await pd.getDataURL(t.value)):r+=yf(t.name,t.value);return e.childNodes.length>0?(t.depth++,r+=">",r+=await i,r+="</"+n+">",t.depth--):r+="/>",r}(e,t);if("#text"===e.nodeName)return function(e){return(e.nodeValue||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(e);if("#comment"===e.nodeName);else if("#cdata-section"===e.nodeName)return function(e){return"<![CDATA["+e.nodeValue+"]]>"}(e);return""}!function(e){!function(t,n){var r={};!function(e){e.__esModule=!0,e.digestLength=32,e.blockSize=64;var t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function n(e,n,r,i,s){for(var o,a,u,c,h,l,p,f,d,m,g,y,v;s>=64;){for(o=n[0],a=n[1],u=n[2],c=n[3],h=n[4],l=n[5],p=n[6],f=n[7],m=0;m<16;m++)g=i+4*m,e[m]=(255&r[g])<<24|(255&r[g+1])<<16|(255&r[g+2])<<8|255&r[g+3];for(m=16;m<64;m++)y=((d=e[m-2])>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,v=((d=e[m-15])>>>7|d<<25)^(d>>>18|d<<14)^d>>>3,e[m]=(y+e[m-7]|0)+(v+e[m-16]|0);for(m=0;m<64;m++)y=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&l^~h&p)|0)+(f+(t[m]+e[m]|0)|0)|0,v=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&a^o&u^a&u)|0,f=p,p=l,l=h,h=c+y|0,c=u,u=a,a=o,o=y+v|0;n[0]+=o,n[1]+=a,n[2]+=u,n[3]+=c,n[4]+=h,n[5]+=l,n[6]+=p,n[7]+=f,i+=64,s-=64}return i}var r=function(){function t(){this.digestLength=e.digestLength,this.blockSize=e.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return t.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},t.prototype.clean=function(){for(var e=0;e<this.buffer.length;e++)this.buffer[e]=0;for(e=0;e<this.temp.length;e++)this.temp[e]=0;this.reset()},t.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var r=0;if(this.bytesHashed+=t,this.bufferLength>0){for(;this.bufferLength<64&&t>0;)this.buffer[this.bufferLength++]=e[r++],t--;64===this.bufferLength&&(n(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(t>=64&&(r=n(this.temp,this.state,e,r,t),t%=64);t>0;)this.buffer[this.bufferLength++]=e[r++],t--;return this},t.prototype.finish=function(e){if(!this.finished){var t=this.bytesHashed,r=this.bufferLength,i=t/536870912|0,s=t<<3,o=t%64<56?64:128;this.buffer[r]=128;for(var a=r+1;a<o-8;a++)this.buffer[a]=0;this.buffer[o-8]=i>>>24&255,this.buffer[o-7]=i>>>16&255,this.buffer[o-6]=i>>>8&255,this.buffer[o-5]=i>>>0&255,this.buffer[o-4]=s>>>24&255,this.buffer[o-3]=s>>>16&255,this.buffer[o-2]=s>>>8&255,this.buffer[o-1]=s>>>0&255,n(this.temp,this.state,this.buffer,0,o),this.finished=!0}for(a=0;a<8;a++)e[4*a+0]=this.state[a]>>>24&255,e[4*a+1]=this.state[a]>>>16&255,e[4*a+2]=this.state[a]>>>8&255,e[4*a+3]=this.state[a]>>>0&255;return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype._saveState=function(e){for(var t=0;t<this.state.length;t++)e[t]=this.state[t]},t.prototype._restoreState=function(e,t){for(var n=0;n<this.state.length;n++)this.state[n]=e[n];this.bytesHashed=t,this.finished=!1,this.bufferLength=0},t}();e.Hash=r;var i=function(){function e(e){this.inner=new r,this.outer=new r,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var t=new Uint8Array(this.blockSize);if(e.length>this.blockSize)(new r).update(e).finish(t).clean();else for(var n=0;n<e.length;n++)t[n]=e[n];for(n=0;n<t.length;n++)t[n]^=54;for(this.inner.update(t),n=0;n<t.length;n++)t[n]^=106;for(this.outer.update(t),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate),n=0;n<t.length;n++)t[n]=0}return e.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},e.prototype.clean=function(){for(var e=0;e<this.istate.length;e++)this.ostate[e]=this.istate[e]=0;this.inner.clean(),this.outer.clean()},e.prototype.update=function(e){return this.inner.update(e),this},e.prototype.finish=function(e){return this.outer.finished?this.outer.finish(e):(this.inner.finish(e),this.outer.update(e,this.digestLength).finish(e)),this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e}();function s(e){var t=(new r).update(e),n=t.digest();return t.clean(),n}function o(e,t){var n=new i(e).update(t),r=n.digest();return n.clean(),r}function a(e,t,n,r){var i=r[0];if(0===i)throw new Error("hkdf: cannot expand more");t.reset(),i>1&&t.update(e),n&&t.update(n),t.update(r),t.finish(e),r[0]++}e.HMAC=i,e.hash=s,e.default=s,e.hmac=o;var u=new Uint8Array(e.digestLength);e.hkdf=function(e,t,n,r){void 0===t&&(t=u),void 0===r&&(r=32);for(var s=new Uint8Array([1]),c=o(t,e),h=new i(c),l=new Uint8Array(h.digestLength),p=l.length,f=new Uint8Array(r),d=0;d<r;d++)p===l.length&&(a(l,h,n,s),p=0),f[d]=l[p++];return h.clean(),l.fill(0),s.fill(0),f},e.pbkdf2=function(e,t,n,r){for(var s=new i(e),o=s.digestLength,a=new Uint8Array(4),u=new Uint8Array(o),c=new Uint8Array(o),h=new Uint8Array(r),l=0;l*o<r;l++){var p=l+1;a[0]=p>>>24&255,a[1]=p>>>16&255,a[2]=p>>>8&255,a[3]=p>>>0&255,s.reset(),s.update(t),s.update(a),s.finish(c);for(var f=0;f<o;f++)u[f]=c[f];for(f=2;f<=n;f++){s.reset(),s.update(c).finish(c);for(var d=0;d<o;d++)u[d]^=c[d]}for(f=0;f<o&&l*o+f<r;f++)h[l*o+f]=u[f]}for(l=0;l<o;l++)u[l]=c[l]=0;for(l=0;l<4;l++)a[l]=0;return s.clean(),h}}(r);var i=r.default;for(var s in r)i[s]=r[s];e.exports=i}()}(mf);const wf=new TextEncoder,bf=class{constructor(e,t){this.element=e,this.eventCallback=t,this.needsRefresh=!0,this.needsRemoval=!1,this.pseudoStates={hover:!1,active:!1,focus:!1,target:!1},this.svgImage=new Image,this.bounds=new cf,this.padding=new hf,this.margin=new hf,this.border=new hf,this.childLayers=[],this.rasterizationCount=new Map,this.cachedBounds=new Map,this.cachedMargin=new Map,this._dynamicAttributes="",this._svgHash="",this._svgDocument="",this._svgHashRasterizing="",this._svgSrc="",this._hashingCanvas=document.createElement("canvas"),this.serializationReplacer=e=>{var t;if(this.element===e)return;const n=e,r=null==(t=n.tagName)?void 0:t.toLowerCase();if("style"===r||"link"===r)return"";const i=pd.layers.get(n);if(i){const e=i.bounds;let t="";const r=`box-sizing:border-box;max-width:${e.width+1}px;max-height:${e.height+1}px;min-width:${e.width}px;min-height:${e.height}px;visibility:hidden`;let s=!1;for(const e of i.element.attributes)"src"!==e.name&&("style"==e.name?(t+=yf(e.name,e.value+";"+r),s=!0):t+=yf(e.name,e.value));s||(t+=yf("style",r));const o=n.tagName.toLowerCase();return`<${o} ${t}></${o}>`}},pd.layers.set(e,this),this.id=e.getAttribute(pd.ELEMENT_UID_ATTRIBUTE)||pd.generateElementUID(),e.setAttribute(pd.ELEMENT_UID_ATTRIBUTE,this.id),e.setAttribute(pd.LAYER_ATTRIBUTE,""),this.parentLayer=pd.getClosestLayer(this.element,!1),this.eventCallback("layercreated",{target:e}),bf.cachedCanvases.limit=pd.layers.size*bf.DEFAULT_CACHE_SIZE,this._hashingCanvas.width=20,this._hashingCanvas.height=20}trySetFromSVGHash(e){const t=this.cachedBounds.get(e),n=this.cachedMargin.get(e);if(e==this._currentSVGHash)return t&&n&&(this._currentBounds=t,this._currentMargin=n),!0;{const r=bf.svgCanvasHash.get(this._currentSVGHash),i=bf.svgCanvasHash.get(e),s=bf.cachedCanvases.get(i);if(s&&t&&n)return this._currentSVGHash=e,this._currentCanvas=s,this._currentBounds=t,this._currentMargin=n,r!==i&&this.eventCallback&&this.eventCallback("layerpainted",{target:this.element}),!0}return!1}get currentCanvas(){return this._currentCanvas}get currentBounds(){return this._currentBounds}get currentMargin(){return this._currentMargin}get depth(){let e=0,t=this;for(;t.parentLayer;)t=t.parentLayer,e++;return e}get rootLayer(){let e=this;for(;e.parentLayer;)e=e.parentLayer;return e}traverseParentLayers(e){const t=this.parentLayer;t&&(t.traverseParentLayers(e),e(t))}traverseLayers(e){e(this),this.traverseChildLayers(e)}traverseChildLayers(e){for(const t of this.childLayers)t.traverseLayers(e)}refresh(){this._currentSVGHash||(lf(this.element,this.bounds,this.parentLayer&&this.parentLayer.element),pf(this.element,this.margin),this._currentBounds=this.bounds,this._currentMargin=this.margin),this.needsRefresh=!1,this._updateParentAndChildLayers(),pd.addToSerializeQueue(this)}_updateParentAndChildLayers(){const e=this.element,t=this.childLayers,n=t.slice(),r=this.parentLayer;this.parentLayer=pd.getClosestLayer(this.element,!1),r!==this.parentLayer&&(this.parentLayer&&this.parentLayer.childLayers.push(this),this.eventCallback("layermoved",{target:e})),t.length=0,uf(e,this._tryConvertElementToWebLayer,this);for(const e of n)pd.getClosestLayer(e.element,!1)||(e.needsRemoval=!0,t.push(e))}_tryConvertElementToWebLayer(e){if(this.needsRemoval)return!1;const t=e,n=getComputedStyle(t);if(t.getAttribute(pd.ELEMENT_UID_ATTRIBUTE)||t.setAttribute(pd.ELEMENT_UID_ATTRIBUTE,pd.generateElementUID()),t.hasAttribute(pd.LAYER_ATTRIBUTE)||"VIDEO"===t.nodeName||"none"!==n.transform){let e=pd.layers.get(t);return e||(e=new bf(t,this.eventCallback)),this.childLayers.push(e),!1}return!0}async serialize(){var e;const t=this.element;if("VIDEO"===t.nodeName)return;lf(t,this.bounds,null==(e=this.parentLayer)?void 0:e.element),pf(t,this.margin);let{width:n,height:r}=this.bounds;if(n+=Math.max(this.margin.left,0)+Math.max(this.margin.right,0),r+=Math.max(this.margin.top,0)+Math.max(this.margin.bottom,0),n*r>0){!function(e,t){let n=getComputedStyle(e);t.left=parseFloat(n.paddingLeft)||0,t.right=parseFloat(n.paddingRight)||0,t.top=parseFloat(n.paddingTop)||0,t.bottom=parseFloat(n.paddingBottom)||0}(t,this.padding),function(e,t){let n=getComputedStyle(e);t.left=parseFloat(n.borderLeftWidth)||0,t.right=parseFloat(n.borderRightWidth)||0,t.top=parseFloat(n.borderTopWidth)||0,t.bottom=parseFloat(n.borderBottomWidth)||0}(t,this.border);const e=pd.attributeHTML(pd.ELEMENT_UID_ATTRIBUTE,""+this.id),i="inline"===getComputedStyle(t).display;pd.updateInputAttributes(t);const s=this._getParentsHTML(t);s[0]=s[0].replace("html","html "+pd.RENDERING_DOCUMENT_ATTRIBUTE+'="" ');const o=await pd.getAllEmbeddedStyles(t);let a=await async function(e,t){return(await xf(e,{depth:0,replacer:t})).replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")}(t,this.serializationReplacer);a=a.replace(e,`${e} ${pd.RENDERING_ATTRIBUTE}="" ${i?`${pd.RENDERING_INLINE_ATTRIBUTE}="" `:" "} `+pd.getPsuedoAttributes(this.pseudoStates));const u='<svg width="'+n+'" height="'+r+'" xmlns="http://www.w3.org/2000/svg"><defs><style type="text/css"><![CDATA[\n'+o.join("\n")+']]></style></defs><foreignObject x="0" y="0" width="'+(n+1)+'" height="'+(r+1)+'">'+s[0]+a+s[1]+"</foreignObject></svg>",c=this._svgDocument=u,h=this._svgHash=pd.arrayBufferToBase64(mf.exports.hash(wf.encode(c)))+"?w="+n+";h="+r;if(this.cachedBounds.set(h,(new cf).copy(this.bounds)),this.cachedMargin.set(h,(new hf).copy(this.margin)),this.trySetFromSVGHash(h))return;pd.addToRasterizeQueue(this)}else this._currentBounds.copy(this.bounds),this._currentMargin.copy(this.margin)}async rasterize(){return new Promise(((e,t)=>{const n=()=>{pd.addToRenderQueue(this),this.svgImage.onload=null,e()};this.svgImage.onload=()=>{setTimeout(n,10)},this.svgImage.onerror=e=>{t(e)},this._svgHashRasterizing=this._svgHash,this.svgImage.src=this._svgSrc="data:image/svg+xml;utf8,"+encodeURIComponent(this._svgDocument)}))}render(){if(!this.svgImage.complete||this.svgImage.currentSrc!==this.svgImage.src)return void setTimeout((()=>pd.addToRenderQueue(this)),100);const e=this._svgHashRasterizing;if(!this.cachedBounds.has(e)||!this.cachedMargin.has(e))return void(this.needsRefresh=!0);let{width:t,height:n}=this.cachedBounds.get(e),{left:r,top:i,right:s,bottom:o}=this.cachedMargin.get(e);const a=t+r+s,u=n+i+o,c=this._hashingCanvas;let h=c.width,l=c.height;const p=c.getContext("2d");p.clearRect(0,0,h,l),p.imageSmoothingEnabled=!1,p.drawImage(this.svgImage,0,0,a,u,0,0,h,l);const f=p.getImageData(0,0,h,l).data,d=pd.arrayBufferToBase64(mf.exports.hash(new Uint8Array(f))),m=bf.svgCanvasHash.get(e);bf.svgCanvasHash.set(e,d),m!==d&&bf.svgRetryCount.set(e,0);const g=bf.svgRetryCount.get(e)||0;if(bf.svgRetryCount.set(e,g+1),g>3&&bf.cachedCanvases.has(d))return void(this._svgHash===this._svgHashRasterizing&&this.trySetFromSVGHash(this._svgHash));if(setTimeout((()=>pd.addToRenderQueue(this)),2*(500+1e3*Math.random())^g),m===d&&bf.cachedCanvases.has(m))return;const y=this.pixelRatio||parseFloat(this.element.getAttribute(pd.PIXEL_RATIO_ATTRIBUTE))||window.devicePixelRatio,v=bf.cachedCanvases.size===bf.cachedCanvases.limit?bf.cachedCanvases.shift()[1]:document.createElement("canvas");let x=v.width=a*y,w=v.height=u*y;const b=v.getContext("2d");b.imageSmoothingEnabled=!1,b.clearRect(0,0,x,w),b.drawImage(this.svgImage,0,0,a,u,0,0,x,w),bf.cachedCanvases.set(d,v),this._svgHash===this._svgHashRasterizing&&this.trySetFromSVGHash(e)}_getParentsHTML(e){const t=[],n=[];let r=e.parentElement;r||(r=document.documentElement);do{let e=r.tagName.toLowerCase(),i=" ",s="";for(const e of r.attributes){const t=gf(e.value);"style"!==e.name?i+=`${e.name}="${t}" `:s=t}const o="<"+e+("html"===e?` xmlns="http://www.w3.org/1999/xhtml" style="--x-width:${this.bounds.width}px;--x-height:${this.bounds.height}px;--x-inline-top:${this.border.top+this.margin.top+this.padding.top}px; ${s}" `:` style="${s}" ${pd.RENDERING_PARENT_ATTRIBUTE}="" `)+i+" >";t.unshift(o);const a="</"+e+">";if(n.push(a),"html"==e)break}while(r=r!==document.documentElement?r.parentElement||document.documentElement:null);return[t.join(""),n.join("")]}};let _f=bf;_f.DEFAULT_CACHE_SIZE=4,_f.svgRetryCount=new Map,_f.svgCanvasHash=new df.LRUMap(1e3),_f.cachedCanvases=new df.LRUMap(bf.DEFAULT_CACHE_SIZE);var Ef,Mf,Nf=[],Sf="ResizeObserver loop completed with undelivered notifications.";(Mf=Ef||(Ef={})).BORDER_BOX="border-box",Mf.CONTENT_BOX="content-box",Mf.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box";var Tf,Of=function(e){return Object.freeze(e)},Cf=function(e,t){this.inlineSize=e,this.blockSize=t,Of(this)},Af=function(){function e(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Of(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),zf=function(e){return e instanceof SVGElement&&"getBBox"in e},Rf=function(e){if(zf(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var i=e,s=i.offsetWidth,o=i.offsetHeight;return!(s||o||e.getClientRects().length)},Df=function(e){var t,n;if(e instanceof Element)return!0;var r=null===(n=null===(t=e)||void 0===t?void 0:t.ownerDocument)||void 0===n?void 0:n.defaultView;return!!(r&&e instanceof r.Element)},kf="undefined"!=typeof window?window:{},If=new WeakMap,Lf=/auto|scroll/,Bf=/^tb|vertical/,Ff=/msie|trident/i.test(kf.navigator&&kf.navigator.userAgent),Pf=function(e){return parseFloat(e||"0")},Uf=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=!1),new Cf((n?t:e)||0,(n?e:t)||0)},jf=Of({devicePixelContentBoxSize:Uf(),borderBoxSize:Uf(),contentBoxSize:Uf(),contentRect:new Af(0,0,0,0)}),Vf=function(e,t){if(void 0===t&&(t=!1),If.has(e)&&!t)return If.get(e);if(Rf(e))return If.set(e,jf),jf;var n=getComputedStyle(e),r=zf(e)&&e.ownerSVGElement&&e.getBBox(),i=!Ff&&"border-box"===n.boxSizing,s=Bf.test(n.writingMode||""),o=!r&&Lf.test(n.overflowY||""),a=!r&&Lf.test(n.overflowX||""),u=r?0:Pf(n.paddingTop),c=r?0:Pf(n.paddingRight),h=r?0:Pf(n.paddingBottom),l=r?0:Pf(n.paddingLeft),p=r?0:Pf(n.borderTopWidth),f=r?0:Pf(n.borderRightWidth),d=r?0:Pf(n.borderBottomWidth),m=l+c,g=u+h,y=(r?0:Pf(n.borderLeftWidth))+f,v=p+d,x=a?e.offsetHeight-v-e.clientHeight:0,w=o?e.offsetWidth-y-e.clientWidth:0,b=i?m+y:0,_=i?g+v:0,E=r?r.width:Pf(n.width)-b-w,M=r?r.height:Pf(n.height)-_-x,N=E+m+w+y,S=M+g+x+v,T=Of({devicePixelContentBoxSize:Uf(Math.round(E*devicePixelRatio),Math.round(M*devicePixelRatio),s),borderBoxSize:Uf(N,S,s),contentBoxSize:Uf(E,M,s),contentRect:new Af(l,u,E,M)});return If.set(e,T),T},qf=function(e,t,n){var r=Vf(e,n),i=r.borderBoxSize,s=r.contentBoxSize,o=r.devicePixelContentBoxSize;switch(t){case Ef.DEVICE_PIXEL_CONTENT_BOX:return o;case Ef.BORDER_BOX:return i;default:return s}},Hf=function(e){var t=Vf(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=Of([t.borderBoxSize]),this.contentBoxSize=Of([t.contentBoxSize]),this.devicePixelContentBoxSize=Of([t.devicePixelContentBoxSize])},$f=function(e){if(Rf(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},Wf=function(){var e=1/0,t=[];Nf.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(t){var n=new Hf(t.target),i=$f(t.target);r.push(n),t.lastReportedSize=qf(t.target,t.observedBox),i<e&&(e=i)})),t.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=t;n<r.length;n++)(0,r[n])();return e},Gf=function(e){Nf.forEach((function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach((function(n){n.isActive()&&($f(n.target)>e?t.activeTargets.push(n):t.skippedTargets.push(n))}))}))},Yf=[],Zf=0,Xf={attributes:!0,characterData:!0,childList:!0,subtree:!0},Jf=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Qf=function(e){return void 0===e&&(e=0),Date.now()+e},Kf=!1,ed=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!Kf){Kf=!0;var n,r=Qf(e);n=function(){var n=!1;try{n=function(){var e,t=0;for(Gf(t);Nf.some((function(e){return e.activeTargets.length>0}));)t=Wf(),Gf(t);return Nf.some((function(e){return e.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:Sf}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=Sf),window.dispatchEvent(e)),t>0}()}finally{if(Kf=!1,e=r-Qf(),!Zf)return;n?t.run(1e3):e>0?t.run(e):t.start()}},function(e){if(!Tf){var t=0,n=document.createTextNode("");new MutationObserver((function(){return Yf.splice(0).forEach((function(e){return e()}))})).observe(n,{characterData:!0}),Tf=function(){n.textContent=""+(t?t--:t++)}}Yf.push(e),Tf()}((function(){requestAnimationFrame(n)}))}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,Xf)};document.body?t():kf.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Jf.forEach((function(t){return kf.addEventListener(t,e.listener,!0)})))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Jf.forEach((function(t){return kf.removeEventListener(t,e.listener,!0)})),this.stopped=!0)},e}()),td=function(e){!Zf&&e>0&&ed.start(),!(Zf+=e)&&ed.stop()},nd=function(){function e(e,t){this.target=e,this.observedBox=t||Ef.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=qf(this.target,this.observedBox,!0);return e=this.target,zf(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),rd=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},id=new WeakMap,sd=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},od=function(){function e(){}return e.connect=function(e,t){var n=new rd(e,t);id.set(e,n)},e.observe=function(e,t,n){var r=id.get(e),i=0===r.observationTargets.length;sd(r.observationTargets,t)<0&&(i&&Nf.push(r),r.observationTargets.push(new nd(t,n&&n.box)),td(1),ed.schedule())},e.unobserve=function(e,t){var n=id.get(e),r=sd(n.observationTargets,t),i=1===n.observationTargets.length;r>=0&&(i&&Nf.splice(Nf.indexOf(n),1),n.observationTargets.splice(r,1),td(-1))},e.disconnect=function(e){var t=this,n=id.get(e);n.observationTargets.slice().forEach((function(n){return t.unobserve(e,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},e}(),ad=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");od.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Df(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");od.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Df(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");od.unobserve(this,e)},e.prototype.disconnect=function(){od.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();const ud=self.ResizeObserver||ad,cd=new Di,hd=new Di;new TextDecoder,Promise.resolve();const ld=class{static get ELEMENT_UID_ATTRIBUTE(){return this.ATTRIBUTE_PREFIX+"-uid"}static get HOVER_ATTRIBUTE(){return this.ATTRIBUTE_PREFIX+"-hover"}static get ACTIVE_ATTRIBUTE(){return this.ATTRIBUTE_PREFIX+"-active"}static get FOCUS_ATTRIBUTE(){return this.ATTRIBUTE_PREFIX+"-focus"}static get TARGET_ATTRIBUTE(){return this.ATTRIBUTE_PREFIX+"-target"}static get LAYER_ATTRIBUTE(){return this.ATTRIBUTE_PREFIX+"-layer"}static get PIXEL_RATIO_ATTRIBUTE(){return this.ATTRIBUTE_PREFIX+"-pixel-ratio"}static get RENDERING_ATTRIBUTE(){return this.ATTRIBUTE_PREFIX+"-rendering"}static get RENDERING_PARENT_ATTRIBUTE(){return this.ATTRIBUTE_PREFIX+"-rendering-parent"}static get RENDERING_CONTAINER_ATTRIBUTE(){return this.ATTRIBUTE_PREFIX+"-rendering-container"}static get RENDERING_INLINE_ATTRIBUTE(){return this.ATTRIBUTE_PREFIX+"-rendering-inline"}static get RENDERING_DOCUMENT_ATTRIBUTE(){return this.ATTRIBUTE_PREFIX+"-rendering-document"}static generateElementUID(){return""+this._nextUID++}static getPsuedoAttributes(e){return`${e.hover?`${this.HOVER_ATTRIBUTE}="" `:" "}${e.focus?`${this.FOCUS_ATTRIBUTE}="" `:" "}${e.active?`${this.ACTIVE_ATTRIBUTE}="" `:" "}${e.target?`${this.TARGET_ATTRIBUTE}="" `:" "}`}static initRootNodeObservation(e){const t=e.ownerDocument,n=e.getRootNode(),r="head"in n?n.head:n;if(this.rootNodeObservers.get(n))return;const i=this.containerStyleElement=t.createElement("style");t.head.appendChild(i),i.innerHTML=`\n      [${ld.RENDERING_CONTAINER_ATTRIBUTE}] {\n        all: initial;\n        position: fixed;\n        width: 100%;\n        height: 100%;\n        top: 0px;\n      }\n    `;const s=`\n    [${ld.RENDERING_DOCUMENT_ATTRIBUTE}] * {\n      transform: none !important;\n    }\n\n    [${ld.RENDERING_ATTRIBUTE}], [${ld.RENDERING_ATTRIBUTE}] * {\n      visibility: visible !important;\n      /* the following is a hack for Safari; \n      without some kind of css filter active, \n      any box-shadow effect will fail to rasterize properly */\n      filter: opacity(1);\n    }\n    \n    [${ld.RENDERING_ATTRIBUTE}] [${ld.LAYER_ATTRIBUTE}], [${ld.RENDERING_ATTRIBUTE}] [${ld.LAYER_ATTRIBUTE}] * {\n      visibility: hidden !important;\n    }\n\n    [${ld.RENDERING_ATTRIBUTE}] {\n      position: relative !important;\n      top: 0 !important;\n      left: 0 !important;\n      float: left !important; /* prevent margin-collapse in SVG foreign-element for Webkit */\n      box-sizing:border-box;\n      min-width:var(--x-width);\n      min-height:var(--x-height);\n    }\n    \n    [${ld.RENDERING_INLINE_ATTRIBUTE}] {\n      top: var(--x-inline-top) !important;\n      width:auto !important;\n    }\n\n    [${ld.RENDERING_PARENT_ATTRIBUTE}] {\n      transform: none !important;\n      left: 0 !important;\n      top: 0 !important;\n      margin: 0 !important;\n      border:0 !important;\n      border-radius:0 !important;\n      width: 100% !important;\n      height:100% !important;\n      padding:0 !important;\n      visibility:hidden !important;\n      filter:none !important;\n    }\n    \n    [${ld.RENDERING_PARENT_ATTRIBUTE}]::before, [${ld.RENDERING_PARENT_ATTRIBUTE}]::after {\n      content:none !important;\n      box-shadow:none !important;\n    }\n    `,o=t.createElement("style");if(o.textContent=s,r.append(o),n===t){let e="";const t=()=>{if(e!=window.location.hash&&window.location.hash)try{this.targetElement=n.querySelector(window.location.hash)}catch{}e=window.location.hash};window.addEventListener("hashchange",t,!1),t(),window.addEventListener("focusin",(e=>{this.focusElement=e.target}),!1),window.addEventListener("focusout",(e=>{this.focusElement=null}),!1),window.addEventListener("load",(e=>{a()}))}const a=()=>{for(const[e,t]of this.layers)t.needsRefresh=!0},u=e=>{var t=e.nodeName.toUpperCase();-1!==c.indexOf(t)&&e.addEventListener("load",a)},c=["STYLE","LINK"],h=new MutationObserver((e=>{for(const t of e){-1!==c.indexOf(t.target.nodeName.toUpperCase())&&a();for(const e of t.addedNodes)u(e)}}));h.observe(t,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),this.rootNodeObservers.set(n,h)}static addToSerializeQueue(e){-1===this.serializeQueue.indexOf(e)&&this.serializeQueue.push(e)}static addToRasterizeQueue(e){-1===this.rasterizeQueue.indexOf(e)&&this.rasterizeQueue.push(e)}static addToRenderQueue(e){-1===this.renderQueue.indexOf(e)&&this.renderQueue.push(e)}static _runTasks(){ld.tasksPending=!1;const e=ld.serializeQueue,t=ld.rasterizeQueue,n=ld.renderQueue,r=ld.TASK_SYNC_MAX_TIME/2;let i=performance.now();for(;n.length&&performance.now()-i<r;)n.shift().render();for(i=performance.now();e.length&&performance.now()-i<r;)e.shift().serialize();t.length&&ld.rasterizeTaskCount<ld.TASK_ASYNC_MAX_COUNT&&(ld.rasterizeTaskCount++,t.shift().rasterize().finally((()=>{ld.rasterizeTaskCount--})))}static scheduleTasksIfNeeded(){this.tasksPending||0===ld.serializeQueue.length&&0===ld.renderQueue.length&&(0===ld.rasterizeQueue.length||ld.rasterizeTaskCount===ld.TASK_ASYNC_MAX_COUNT)||(this.tasksPending=!0,ld.scheduleIdle(ld._runTasks))}static scheduleIdle(e){setTimeout(e,1)}static setLayerNeedsRefresh(e){e.needsRefresh=!0}static createLayerTree(e,t,n){if(ld.getClosestLayer(e))throw new Error("A root WebLayer for the given element already exists");!function(e,t){if(document.contains(e))return e;const n=document.createElement("div");n.setAttribute(pd.RENDERING_CONTAINER_ATTRIBUTE,""),n.style.visibility="hidden",n.style.pointerEvents="none",n.style.touchAction="none",n.attachShadow({mode:"open"}).appendChild(e),document.documentElement.appendChild(n)}(e),ld.initRootNodeObservation(e);const r=new MutationObserver(ld._handleMutations);this.mutationObservers.set(e,r),this.startMutationObserver(e);const i=new ud((e=>{for(const t of e){const e=this.getClosestLayer(t.target);e.traverseLayers(ld.setLayerNeedsRefresh),e.traverseParentLayers(ld.setLayerNeedsRefresh)}}));i.observe(e),this.resizeObservers.set(e,i),e.addEventListener("input",this._triggerRefresh,{capture:!0}),e.addEventListener("keydown",this._triggerRefresh,{capture:!0}),e.addEventListener("submit",this._triggerRefresh,{capture:!0}),e.addEventListener("change",this._triggerRefresh,{capture:!0}),e.addEventListener("focus",this._triggerRefresh,{capture:!0}),e.addEventListener("blur",this._triggerRefresh,{capture:!0}),e.addEventListener("transitionend",this._triggerRefresh,{capture:!0});const s=new _f(e,n);return this.rootLayers.set(e,s),s}static disposeLayer(e){this.rootLayers.has(e.element)&&(this.rootLayers.delete(e.element),this.mutationObservers.get(e.element).disconnect(),this.mutationObservers.delete(e.element),this.resizeObservers.get(e.element).disconnect(),this.resizeObservers.delete(e.element),e.element.removeEventListener("input",this._triggerRefresh,{capture:!0}),e.element.removeEventListener("keydown",this._triggerRefresh,{capture:!0}),e.element.removeEventListener("submit",this._triggerRefresh,{capture:!0}),e.element.removeEventListener("change",this._triggerRefresh,{capture:!0}),e.element.removeEventListener("focus",this._triggerRefresh,{capture:!0}),e.element.removeEventListener("blur",this._triggerRefresh,{capture:!0}),e.element.removeEventListener("transitionend",this._triggerRefresh,{capture:!0}))}static getClosestLayer(e,t=!0){let n=t?e:e.parentElement;const r=null==n?void 0:n.closest(`[${ld.LAYER_ATTRIBUTE}]`);if(!r){const n=(null==e?void 0:e.getRootNode()).host;if(n)return this.getClosestLayer(n,t)}return this.layers.get(r)}static parseCSSTransform(e,t,n,r,i=new Di){const s=e.transform,o=e.transformOrigin;if(0==s.indexOf("matrix(")){i.identity();var a=s.substring(7,s.length-1).split(", ").map(parseFloat);i.elements[0]=a[0],i.elements[1]=a[1],i.elements[4]=a[2],i.elements[5]=a[3],i.elements[12]=a[4],i.elements[13]=a[5]}else{if(0!=s.indexOf("matrix3d("))return null;a=s.substring(9,s.length-1).split(", ").map(parseFloat),i.fromArray(a)}0===i.elements[0]&&(i.elements[0]=1e-15),0===i.elements[5]&&(i.elements[5]=1e-15),0===i.elements[10]&&(i.elements[10]=1e-15),i.elements[12]*=r,i.elements[13]*=-1*r;var u=o.split(" ").map(parseFloat),c=(u[0]-t/2)*r,h=(u[1]-n/2)*r*-1,l=u[2]||0,p=cd.identity().makeTranslation(-c,-h,-l),f=hd.identity().makeTranslation(c,h,l);for(const e of i.elements)if(isNaN(e))return null;return i.premultiply(f).multiply(p)}static pauseMutationObservers(){const e=ld.mutationObservers.values();for(const t of e)ld._handleMutations(t.takeRecords()),t.disconnect()}static resumeMutationObservers(){for(const[e]of ld.mutationObservers)this.startMutationObserver(e)}static startMutationObserver(e){ld.mutationObservers.get(e).observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0})}static _addDynamicPseudoClassRules(e){const t=e.styleSheets;for(let e=0;e<t.length;e++)try{const i=t[e],s=i.cssRules;if(!s)continue;const o=[];for(var n=0;n<s.length;n++){s[n].cssText.indexOf(":hover")>-1&&o.push(s[n].cssText.replace(new RegExp(":hover","g"),`[${ld.HOVER_ATTRIBUTE}]`)),s[n].cssText.indexOf(":active")>-1&&o.push(s[n].cssText.replace(new RegExp(":active","g"),`[${ld.ACTIVE_ATTRIBUTE}]`)),s[n].cssText.indexOf(":focus")>-1&&o.push(s[n].cssText.replace(new RegExp(":focus","g"),`[${ld.FOCUS_ATTRIBUTE}]`)),s[n].cssText.indexOf(":target")>-1&&o.push(s[n].cssText.replace(new RegExp(":target","g"),`[${ld.TARGET_ATTRIBUTE}]`));var r=o.indexOf(s[n].cssText);r>-1&&o.splice(r,1)}for(n=0;n<o.length;n++)i.insertRule(o[n])}catch(e){}}static arrayBufferToBase64(e){for(var t="",n=e.byteLength,r=0;r<n;r++)t+=String.fromCharCode(e[r]);return window.btoa(t)}static attributeCSS(e,t){return t?`[${e}]=${t}`:`[${e}]`}static attributeHTML(e,t){return t?`${e}="${t}"`:`${e}=""`}static async generateEmbeddedCSS(e,t){let n;const r=[];t=(t=(t=(t=t.replace(new RegExp(":hover","g"),this.attributeCSS(this.HOVER_ATTRIBUTE))).replace(new RegExp(":active","g"),this.attributeCSS(this.ACTIVE_ATTRIBUTE))).replace(new RegExp(":focus","g"),this.attributeCSS(this.FOCUS_ATTRIBUTE))).replace(new RegExp(":target","g"),this.attributeCSS(this.TARGET_ATTRIBUTE));const i=RegExp(/(@import.*?["']([^"']+)["'].*?|url\((?!['"]?(?:data):)['"]?([^'"\)]*)['"]?\))/gi);for(;n=i.exec(t);){const i=n[2]?"type/css":void 0,s=n[2]||n[3];r.push(this.getDataURL(new URL(s,e).href,i).then((e=>{t=t.replace(s,e)})))}return await Promise.all(r),t}static async getAllEmbeddedStyles(e){const t=e.getRootNode(),n=this.embeddedStyles.get(t)||new Map;this.embeddedStyles.set(t,n);const r=Array.from(t.querySelectorAll("style, link[type='text/css'], link[rel='stylesheet']")),i=e.getRootNode()instanceof ShadowRoot;for(const e of r)n.has(e)||n.set(e,new Promise((t=>{if("style"===e.tagName.toLowerCase())t(e.textContent||"");else{const n=e;t(this.getEmbeddedCSS(n.href))}})).then((e=>{const t=RegExp(/@font-face[^{]*{([^{}]|{[^{}]*})*}/gi),r=e.match(t);if(i&&r){const e=document.createElement("style");e.innerHTML=r.reduce(((e,t)=>t+"\n\n"+e),""),document.head.appendChild(e),n.set(e,Promise.resolve(""))}return this.generateEmbeddedCSS(window.location.href,e)})));return Promise.all(n.values())}static async getDataURL(e,t){if(e.startsWith("data"))return e;if(this.dataURLMap.has(e))return this.dataURLMap.get(e);const n=new Promise((async n=>{const r=await fetch(e,t?{headers:{accept:t}}:void 0),i=r.headers.get("content-type");if("text/css"==i){const t=await this.generateEmbeddedCSS(e,await r.text());this.embeddedCSSMap.set(e,t),n("data:"+i+";base64,"+window.btoa(t))}else{const e=new Uint8Array(await r.arrayBuffer());n("data:"+i+";base64,"+this.arrayBufferToBase64(e))}}));return this.dataURLMap.set(e,n),n}static async getEmbeddedCSS(e){if(this.embeddedCSSMap.has(e))return this.embeddedCSSMap.get(e);const t=await fetch(e,{headers:{accept:"text/css"}}),n=await this.generateEmbeddedCSS(e,await t.text());return this.embeddedCSSMap.set(e,n),this.embeddedCSSMap.get(e)}static updateInputAttributes(e){e.matches("input")&&this._updateInputAttribute(e);for(const t of e.getElementsByTagName("input"))this._updateInputAttribute(t)}static _updateInputAttribute(e){e.hasAttribute("checked")?e.checked||e.removeAttribute("checked"):e.checked&&e.setAttribute("checked",""),e.getAttribute("value")!==e.value&&e.setAttribute("value",e.value)}static isBlankImage(e){return!new Uint32Array(e.buffer).some((e=>0!==e))}};let pd=ld;if(pd.ATTRIBUTE_PREFIX="xr",pd._nextUID=0,pd.serializer=new XMLSerializer,pd.rootLayers=new Map,pd.layers=new Map,pd.mutationObservers=new Map,pd.resizeObservers=new Map,pd.serializeQueue=[],pd.rasterizeQueue=[],pd.renderQueue=[],pd.focusElement=null,pd.activeElement=null,pd.targetElement=null,pd.rootNodeObservers=new Map,pd.TASK_ASYNC_MAX_COUNT=2,pd.TASK_SYNC_MAX_TIME=200,pd.rasterizeTaskCount=0,pd.tasksPending=!1,pd._handleMutations=e=>{for(const t of e){if("attributes"===t.type&&t.target.getAttribute(t.attributeName)===t.oldValue)continue;if("characterData"===t.type&&t.target.data===t.oldValue)continue;const e=t.target.nodeType===Node.ELEMENT_NODE?t.target:t.target.parentElement;if(!e)continue;const n=ld.getClosestLayer(e);if(n){if("attributes"===t.type&&"class"===t.attributeName&&(t.oldValue?t.oldValue:"")===t.target.className)continue;n.parentLayer?n.parentLayer.traverseChildLayers(ld.setLayerNeedsRefresh):n.traverseLayers(ld.setLayerNeedsRefresh)}}},pd._triggerRefresh=async e=>{const t=ld.getClosestLayer(e.target);t&&(t.parentLayer?t.parentLayer.traverseChildLayers(ld.setLayerNeedsRefresh):t.traverseLayers(ld.setLayerNeedsRefresh))},pd.embeddedStyles=new Map,pd.dataURLMap=new Map,pd.embeddedCSSMap=new Map,self.THREE)var fd=self.THREE;else fd=wi;const dd=new fd.Matrix4,md=new fd.Vector3,gd=new fd.Vector3,yd=new cf,vd=new cf,xd=Symbol("ON_BEFORE_UPDATE");class wd extends fd.Object3D{constructor(e,t={}){super(),this.element=e,this.options=t,this.isRoot=!1,this._localZ=0,this._viewZ=0,this._renderZ=0,this.textures=new Map,this.textureNeedsUpdate=!1,this.contentMesh=new fd.Mesh(_d.GEOMETRY,new fd.MeshBasicMaterial({side:fd.DoubleSide,depthWrite:!1,transparent:!0,alphaTest:.001,opacity:1})),this._boundsMesh=new fd.Mesh(_d.GEOMETRY,new fd.MeshBasicMaterial({visible:!1})),this.cursor=new fd.Object3D,this.depthMaterial=new fd.MeshDepthMaterial({depthPacking:fd.RGBADepthPacking,alphaTest:.001}),this.domLayout=new fd.Object3D,this.domSize=new fd.Vector3(1,1,1),this.bounds=new cf,this.margin=new hf,this.childWebLayers=[],this.shouldApplyDOMLayout="auto",this.name=e.id,this._webLayer=pd.getClosestLayer(e),e.layer=this,this.add(this.contentMesh),this.add(this._boundsMesh),this.cursor.visible=!1,this.matrixAutoUpdate=!0,this.contentMesh.matrixAutoUpdate=!0,this.contentMesh.visible=!1,this.contentMesh.customDepthMaterial=this.depthMaterial,this.contentMesh.onBeforeRender=(e,t,n)=>{this._camera=n},this._boundsMesh.matrixAutoUpdate=!0,_d.layersByElement.set(this.element,this),_d.layersByMesh.set(this.contentMesh,this)}get currentTexture(){if("VIDEO"===this._webLayer.element.tagName){const e=this._webLayer.element;let t=this.textures.get(e);return t||(t=new fd.VideoTexture(e),t.wrapS=fd.ClampToEdgeWrapping,t.wrapT=fd.ClampToEdgeWrapping,t.minFilter=fd.LinearFilter,this.options.textureEncoding&&(t.encoding=this.options.textureEncoding),this.textures.set(e,t)),t}const e=this._webLayer.currentCanvas;let t=this.textures.get(e);return e&&!t&&(t=new fd.Texture(e),t.needsUpdate=!0,t.wrapS=fd.ClampToEdgeWrapping,t.wrapT=fd.ClampToEdgeWrapping,t.minFilter=fd.LinearFilter,this.options.textureEncoding&&(t.encoding=this.options.textureEncoding),this.textures.set(e,t)),t}get pseudoStates(){return this._webLayer.pseudoStates}get depth(){return this._webLayer.depth}get index(){return this.parentWebLayer?this.parentWebLayer.childWebLayers.indexOf(this):0}get needsRefresh(){return this._webLayer.needsRefresh}setNeedsRefresh(){this._webLayer.traverseLayers(pd.setLayerNeedsRefresh)}get needsRemoval(){return this._webLayer.needsRemoval}get parentWebLayer(){return this._webLayer.parentLayer&&_d.layersByElement.get(this._webLayer.parentLayer.element)}refresh(e=!1){var t;this._webLayer.refresh(),this.childWebLayers.length=0;for(const n of this._webLayer.childLayers){const r=_d.layersByElement.get(null==(t=pd.getClosestLayer(n.element))?void 0:t.element);r&&(this.childWebLayers.push(r),e&&r.refresh(e))}this._refreshVideoBounds()}updateLayout(){if(this._updateDOMLayout(),this._camera){this._localZ=Math.abs(md.setFromMatrixPosition(this.matrix).z+md.setFromMatrixPosition(this.contentMesh.matrix).z),this._viewZ=Math.abs(this.contentMesh.getWorldPosition(md).applyMatrix4(this._camera.matrixWorldInverse).z);let e=this.parentWebLayer?this.parentWebLayer._renderZ:this._viewZ;this._localZ<.001?this._renderZ=e:this._renderZ=this._viewZ,this.contentMesh.renderOrder=(this.options.renderOrderOffset||0)+(1-Math.log(this._renderZ+1)/Math.log(this._camera.far+1))+1e-7*(this.depth+.001*this.index)}}updateContent(){const e=this.contentMesh,t=this.currentTexture,n=e.material;if(t&&(t.image&&n.map!==t||this.textureNeedsUpdate)){const e=this.contentMesh.scale,r=Math.abs(e.x*this.scale.x/e.y*this.scale.y),i=this.domSize.x/this.domSize.y;Math.abs(i-r)<1e3&&(n.map=t,this.depthMaterial.map=t,this.textureNeedsUpdate=!1,n.needsUpdate=!0,t.needsUpdate=!0,this.depthMaterial.needsUpdate=!0)}n.transparent=!0;const r=e.material.opacity<.005;r?e.visible=!1:e.material.map&&(e.visible=!0),this.needsRemoval&&r&&(this.parent&&this.parent.remove(this),this.dispose())}get rootWebLayer(){return _d.layersByElement.get(this._webLayer.rootLayer.element)}[xd](){}_doUpdate(){this[xd](),this.updateContent(),this.updateLayout(),this.position.copy(this.domLayout.position),this.quaternion.copy(this.domLayout.quaternion),this.scale.copy(this.domLayout.scale),this.contentMesh.position.set(0,0,0),this.contentMesh.scale.copy(this.domSize),this.contentMesh.quaternion.set(0,0,0,1),this._boundsMesh.position.set(0,0,0),this._boundsMesh.scale.copy(this.domSize),this._boundsMesh.quaternion.set(0,0,0,1),this.needsRefresh&&!1!==this.options.autoRefresh&&this.refresh(),pd.scheduleTasksIfNeeded()}update(e=!1){e?this.traverseLayersPreOrder(this._doUpdate):this._doUpdate()}querySelector(e){var t;const n=this.element.querySelector(e)||(null==(t=this.element.shadowRoot)?void 0:t.querySelector(e));if(n)return _d.layersByElement.get(n)}traverseLayerAncestors(e){const t=this.parentWebLayer;t&&(t.traverseLayerAncestors(e),e.call(this,t))}traverseLayersPreOrder(e){if(!1===e.call(this,this))return!1;for(const t of this.childWebLayers)if(!1===t.traverseLayersPreOrder(e))return!1;return!0}traverseLayersPostOrder(e){for(const t of this.childWebLayers)if(!1===t.traverseLayersPostOrder(e))return!1;return e.call(this,this)||!0}dispose(){for(const e of this.textures.values())e.dispose();this.contentMesh.geometry.dispose(),this._boundsMesh.geometry.dispose(),pd.disposeLayer(this._webLayer);for(const e of this.childWebLayers)e.dispose()}_refreshVideoBounds(){if("VIDEO"===this.element.nodeName){const e=this.element,t=this.currentTexture,n=getComputedStyle(this.element),{objectFit:r}=n,{width:i,height:s}=this.bounds.copy(this._webLayer.currentBounds),{videoWidth:o,videoHeight:a}=e,u=o/a,c=i/s;switch(t.center.set(.5,.5),r){case"none":t.repeat.set(i/o,s/a).clampScalar(0,1);break;case"contain":case"scale-down":if(t.repeat.set(1,1),c>u){const e=this.bounds.height*u||0;this.bounds.left+=(this.bounds.width-e)/2,this.bounds.width=e}else{const e=this.bounds.width/u||0;this.bounds.top+=(this.bounds.height-e)/2,this.bounds.height=e}break;case"cover":if(t.repeat.set(i/o,s/a),c<u){const e=this.bounds.height*u||0;this.bounds.left+=(this.bounds.width-e)/2,this.bounds.width=e}else{const e=this.bounds.width/u||0;this.bounds.top+=(this.bounds.height-e)/2,this.bounds.height=e}break;default:case"fill":t.repeat.set(1,1)}}}_updateDOMLayout(){if(this.needsRemoval)return;const{currentBounds:e,currentMargin:t}=this._webLayer;this.domLayout.position.set(0,0,0),this.domLayout.scale.set(1,1,1),this.domLayout.quaternion.set(0,0,0,1);const n="VIDEO"===this.element.nodeName,r=n?this.bounds:this.bounds.copy(e),i=n?this.margin:this.margin.copy(t),s=r.width+i.left+i.right,o=r.height+i.top+i.bottom,a=r.width,u=r.height,c=1/_d.DEFAULT_PIXELS_PER_UNIT;if(this.domSize.set(Math.max(c*(a+i.left+i.right),1e-5),Math.max(c*(u+i.top+i.bottom),1e-5),1),!_d.shouldApplyDOMLayout(this))return;const h=this.parentWebLayer;if(!h)return;const l=h.bounds,p=h.margin,f=l.width+p.left+p.right,d=l.height+p.bottom+p.top,m=-f/2+p.left,g=d/2-p.top;this.domLayout.position.set(c*(m+s/2+r.left-i.left),c*(g-o/2-r.top+i.top),0);const y=getComputedStyle(this.element),v=y.transform;if(v&&"none"!==v){const e=pd.parseCSSTransform(y,r.width,r.height,c,dd);e&&(this.domLayout.updateMatrix(),this.domLayout.matrix.multiply(e),this.domLayout.matrix.decompose(this.domLayout.position,this.domLayout.quaternion,this.domLayout.scale))}}}const bd=class extends fd.Object3D{constructor(e,t={}){super(),this.options=t,this._interactionRays=[],this._raycaster=new fd.Raycaster,this._hitIntersections=[],this._previousHoverLayers=new Set,this._contentMeshes=[],this._prepareHitTest=e=>{e.pseudoStates.hover&&this._previousHoverLayers.add(e),e.cursor.visible=!1,e.pseudoStates.hover=!1,this._contentMeshes.push(e.contentMesh)};const n="string"==typeof e?function(e){const t=document.createElement("div");t.innerHTML=e;const n=t.firstElementChild;return t.removeChild(n),n}(e):e;pd.createLayerTree(n,t,((e,{target:t})=>{var r,i,s,o,a,u;if("layercreated"===e){const e=new wd(t,this.options);t===n?(e[xd]=()=>this._updateInteractions(),e.isRoot=!0,this.rootLayer=e,this.add(e)):null==(r=e.parentWebLayer)||r.add(e),null==(s=(i=this.options).onLayerCreate)||s.call(i,e)}else if("layerpainted"===e){const e=pd.layers.get(t),n=bd.layersByElement.get(e.element);n.textureNeedsUpdate=!0,null==(a=(o=this.options).onLayerPaint)||a.call(o,n)}else if("layermoved"===e){const e=bd.layersByElement.get(t);null==(u=e.parentWebLayer)||u.add(e)}})),this.refresh(),this.update()}static shouldApplyDOMLayout(e){const t=e.shouldApplyDOMLayout;return"always"===t||!0===t||"never"!==t&&!1!==t&&!("auto"!==t||!e.parentWebLayer||e.parent!==e.parentWebLayer)}get interactionRays(){return this._interactionRays}set interactionRays(e){this._interactionRays=e}querySelector(e){return this.rootLayer.querySelector(e)}refresh(){this.rootLayer.refresh(!0)}update(){this.rootLayer.update(!0)}get contentMesh(){return this.rootLayer.contentMesh}_intersectionSort(e,t){const n=e.object.parent,r=t.object.parent;return n.depth!==r.depth?r.depth-n.depth:r.index-n.index}_updateInteractions(){const e=this._previousHoverLayers;e.clear(),this._contentMeshes.length=0,this.rootLayer.traverseLayersPreOrder(this._prepareHitTest);for(const t of this._interactionRays){t instanceof fd.Ray?this._raycaster.ray.copy(t):this._raycaster.ray.set(t.getWorldPosition(md),t.getWorldDirection(gd).negate()),this._hitIntersections.length=0;const n=this._raycaster.intersectObjects(this._contentMeshes,!1,this._hitIntersections);n.sort(this._intersectionSort);const r=n[0];if(r){const t=r.object.parent;t.cursor.position.copy(r.point),t.cursor.visible=!0,t.pseudoStates.hover=!0,e.has(t)||t.setNeedsRefresh()}}for(const t of e)t.pseudoStates.hover||t.setNeedsRefresh()}hitTest(e){const t=this._raycaster,n=this._hitIntersections,r=bd.layersByMesh;e instanceof fd.Ray?this._raycaster.ray.copy(e):this._raycaster.ray.set(e.getWorldPosition(md),e.getWorldDirection(gd).negate()),n.length=0,t.intersectObject(this,!0,n),n.sort(this._intersectionSort);for(const e of n){const t=r.get(e.object);if(!t)continue;const n=lf(t.element,yd);if(!n.width||!n.height)continue;let i=t.element;const s=e.uv.x*n.width,o=(1-e.uv.y)*n.height;return uf(t.element,(e=>{if(!i.contains(e))return!1;const t=lf(e,vd),r=t.left-n.left,a=t.top-n.top,{width:u,height:c}=t;return s>r&&s<r+u&&o>a&&o<a+c&&(i=e,!0)})),{layer:t,intersection:e,target:i}}}};let _d=bd;_d.layersByElement=new WeakMap,_d.layersByMesh=new WeakMap,_d.DEFAULT_LAYER_SEPARATION=.001,_d.DEFAULT_PIXELS_PER_UNIT=1e3,_d.GEOMETRY=new fd.PlaneGeometry(1,1,2,2);const Ed=new Di,Md=new Di,Nd={getChildren(e,t){const n=e.node;if(n.isObject3D){t.length=0;for(let e=0;e<n.children.length;e++)t[e]=n.children[e]}},getState(e){var t;if(e.system.viewNode===e.node){const t=e.node;t.updateMatrixWorld(),e.system.viewFrustum.setFromPerspectiveProjectionMatrix(t.projectionMatrix)}const n=e.node;if(!n.isObject3D)return;let r,i;if(e.isAdaptive){const s=null==(t=e.referenceMetrics)?void 0:t.target.worldMatrix;i=Ed.compose(n.position,n.quaternion,n.scale),r=s?Md.multiplyMatrices(s,i):i}else r=n.matrixWorld,i=n.matrix;e.raw.parent=n.parent,e.raw.worldMatrix.copy(r),e.raw.relativeMatrix.copy(i),e.raw.opacity=Sd(e)||1},getIntrinsicBounds(e,t){const n=e.node;if(n.isObject3D)return n.geometry?(n.geometry.boundingBox||n.geometry.computeBoundingBox(),t.copy(n.geometry.boundingBox)):t},apply(e,t){const n=e.node;if(!n.isObject3D)return;if(t.parent!==n.parent){const e=t.parent;e&&e.add(n)}let r=t.localMatrix;if(isNaN(r.elements[0])||isNaN(r.elements[13])||isNaN(r.elements[14])||isNaN(r.elements[15])||0===r.elements[0])throw new Error;if(r=t.worldMatrix,isNaN(r.elements[0])||isNaN(r.elements[13])||isNaN(r.elements[14])||isNaN(r.elements[15])||0===r.elements[0])throw new Error;n.matrixAutoUpdate=!1,n.matrix.copy(t.localMatrix),n.matrixWorld.copy(t.worldMatrix),Td(e,t.opacity)}};function Sd(e){const t=e.node;if(t.material){const e=t.material;if(e.length){for(const t of e)if(void 0!==t.opacity)return t.opacity}else if("opacity"in t.material)return t.material.opacity}for(const t of e.boundingChildMetrics){const e=Sd(t);if(void 0!==e)return e}}function Td(e,t){const n=e.node;if(n.material){const e=n.material;if(e.length)for(const n of e)"opacity"in n&&(n.opacity=t);else n.material.opacity=t}for(const n of e.boundingChildMetrics)Td(n,t)}const Od={getChildren(e,t){e.node.isObject3D&&Nd.getChildren(e,t)},getState(e){e.node.isObject3D&&Nd.getState(e)},getIntrinsicBounds:(e,t)=>(e.node.isObject3D&&Nd.getIntrinsicBounds(e,t),t),apply(e,t){e.node.isObject3D&&Nd.apply(e,t)}};function Cd(){zd.initializeEthereal()}function Ad(e,t){zd.systemTick(e,t)}class zd extends class{takeOwnership;setSharedData;width;height;vueApp;vueRoot;constructor(e,t,n,r={}){this.takeOwnership=this.takeOwnershipProto.bind(this),this.setSharedData=this.setSharedDataProto.bind(this),this.width=t,this.height=n,this.vueApp=li(e,r)}mount(){}takeOwnershipProto(){return!0}setSharedDataProto(e){return!0}}{static system;static etherealCamera=new THREE.PerspectiveCamera;static playerCamera;isEthereal;isInteractive;isNetworked;isStatic;updateTime;raycaster;size;webLayer3D;needsUpdate=!1;headDiv;static initializeEthereal(){let e=window.APP.scene;this.etherealCamera.matrixAutoUpdate=!0,this.playerCamera=document.getElementById("viewing-camera").getObject3D("camera"),this.system=function(e,t=Od){return new af(e,t)}(this.playerCamera?this.playerCamera:e.camera),window.ethSystem=this.system}static systemTick(e,t){let n=window.APP.scene;var r,i;(this.playerCamera||(this.playerCamera=document.getElementById("viewing-camera").getObject3D("camera")),this.playerCamera)&&(r=this.playerCamera,i=this.etherealCamera,r.updateMatrixWorld(),i.fov=r.fov,i.zoom=r.zoom,i.near=r.near,i.far=r.far,i.aspect=r.aspect,r.matrixWorld.decompose(i.position,i.quaternion,i.scale),i.rotation.setFromQuaternion(i.quaternion,void 0,!1),i.updateMatrix(),i.updateMatrixWorld(!0),this.etherealCamera!=this.system.viewNode&&(this.system.viewNode=this.etherealCamera),n.renderer.getSize(zd.system.viewResolution),this.system.viewFrustum.setFromPerspectiveProjectionMatrix(this.etherealCamera.projectionMatrix),this.system.update(t,e))}constructor(e,t,n,r={}){super(e,t,n,r),this.isEthereal=!1,this.isInteractive=!1,this.isNetworked=!1,this.isStatic=!0,this.updateTime=100,this.raycaster=new THREE.Raycaster,this.size={width:t/1e3,height:n/1e3},this.headDiv=document.createElement("div")}mount(e){this.isEthereal=!0===e,this.vueRoot=this.vueApp.mount(this.headDiv),this.vueRoot.$el.setAttribute("style","width: "+this.width+"px; height: "+this.height+"px;");let t=document.createElement("link");t.setAttribute("href","https://resources.realitymedia.digital/vue-apps/dist/hubs.css"),t.setAttribute("rel","stylesheet"),t.setAttribute("crossorigin","anonymous"),this.vueRoot.$el.insertBefore(t,this.vueRoot.$el.firstChild),this.webLayer3D=new _d(this.vueRoot.$el,{autoRefresh:!0,onLayerCreate:e?e=>{const t=zd.system.getAdapter(e);t.opacity.enabled=!0,t.onUpdate=()=>e.update()}:e=>{},onLayerPaint:e=>{this.isStatic&&(this.needsUpdate=!0)},textureEncoding:THREE.sRGBEncoding,renderOrderOffset:0})}setNetworkMethods(e,t){this.takeOwnership=e,this.setSharedData=t}updateSharedData(e){this.needsUpdate=!0}getSize(){return console.log("div size: {"+this.size.width+", "+this.size.height+"}"),this.size}getSharedData(e){throw new Error("getSharedData should be overridden by subclasses")}clicked(e){if(!this.isInteractive)return;const t=e.object3D;this.raycaster.ray.set(t.position,this.webLayer3D.getWorldDirection(new THREE.Vector3).negate());const n=this.webLayer3D.hitTest(this.raycaster.ray);n&&(n.target.click(),n.target.focus(),console.log("hit",n.target,n.layer))}dragStart(e){}dragEnd(e){}play(){}pause(){}destroy(){}tick(e){if(this.isEthereal);else{var t=this.needsUpdate;this.needsUpdate=!1,this.isStatic&&this.updateTime<e&&(t=!0,this.updateTime=2e3*Math.random()+1e3),this.isStatic||(this.updateTime=e,t=!0),t&&this.webLayer3D.update()}}}class Rd{_state;state;app;constructor(e){this._state=rt({count:0}),this.app=e,this.state=it(this._state)}increment(){this.app.takeOwnership()&&(this._state.count++,this.app.setSharedData(this.state))}updateSharedData(e){this._state.count=e.count}}class Dd extends zd{shared;constructor(){super(vi,400,475),this.shared=new Rd(this),this.vueApp.provide("shared",this.shared),this.isInteractive=!0,this.isNetworked=!0,this.isStatic=!1}updateSharedData(e){super.updateSharedData(e),this.shared.updateSharedData(e)}getSharedData(){return this.shared.state}}var kd=function(){let e=new Dd;return e.mount(),e};Ot("data-v-b474cdac");const Id={"xr-layer":"",class:"fade"},Ld=Xn("p",null,[Xn("a",{href:"https://vitejs.dev/guide/features.html",target:"_blank"}," Vite Documentation and Then Some! "),Kn(" | "),Xn("a",{href:"https://v3.vuejs.org/",target:"_blank"},"Vue 3 Documentation")],-1);Ct();var Bd={props:{msg:String},setup(e){const t=rt({count:0});return(n,r)=>(Un(),Hn(kn,null,[Xn("h1",Id,u(e.msg),1),Ld,Xn("button",{"xr-layer":"",onClick:r[0]||(r[0]=e=>pt(t).count++)},"count is: "+u(pt(t).count),1)],64))},__scopeId:"data-v-b474cdac"};Ot("data-v-6a11ec38");const Fd={id:"top"},Pd=Xn("img",{alt:"Vue logo",src:pi},null,-1),Ud=[Kn(" Edit code in "),Xn("code",null,"src/apps",-1),Kn(' to test hot module replacement while running project as "npm run dev". ')];Ct();var jd={setup(e){const t=kt("shared");return(e,n)=>(Un(),Hn("div",Fd,[Pd,Jn(Bd,{msg:"Vue Component with Local Button Count"}),Xn("p",{id:"edit",class:a({upclose:pt(t).state.close}),"xr-layer":""},Ud,2)]))},__scopeId:"data-v-6a11ec38"};class Vd{_state;state;app;constructor(e){this._state=rt({close:0}),this.app=e,this.state=it(this._state)}setClose(e){this._state.close!=e&&(this._state.close=e)}}class qd extends zd{shared;constructor(){super(jd,500,500),this.isInteractive=!0,this.shared=new Vd(this),this.vueApp.provide("shared",this.shared)}docs;boundsSize=new THREE.Vector3;bounds=new THREE.Box3;mount(){if(super.mount(!0),this.docs=this.webLayer3D.querySelector("#edit"),!this.docs)return void console.warn("Vue app needs #edit div");let e=qd.system.getAdapter(this.docs);e.onUpdate=()=>{this.bounds=e.metrics.target.visualBounds,this.bounds.getSize(this.boundsSize);var t=Math.sqrt(this.boundsSize.x*this.boundsSize.x+this.boundsSize.y*this.boundsSize.y);this.shared.state.close?this.shared.setClose(t<210):this.shared.setClose(t<190),this.docs.update()}}}var Hd=function(){let e=new qd;return e.mount(),e},$d={props:{msg:String},setup:e=>(rt({count:0}),(t,n)=>(Un(),Hn("h2",null,u(e.msg),1))),__scopeId:"data-v-ecd9120c"};const Wd={id:"room"},Gd=Xn("img",{src:"https://resources.realitymedia.digital/vue-apps/dist/38d6d7a1e02fc2f9.png",width:"250"},null,-1),Yd=Xn("div",{class:"displaytext"},"AR allows us to extend our physical reality; VR creates for us a different reality.",-1);var Zd={setup:e=>(e,t)=>(Un(),Hn("div",Wd,[Jn($d,{msg:"Reality Media"}),Gd,Yd]))};class Xd extends zd{constructor(e,t){super(Zd,e,t)}}var Jd=function(){let e=new Xd(300,475);return e.mount(),e};const Qd={id:"room"},Kd={class:"spacer"},em=Xn("img",{src:"https://resources.realitymedia.digital/vue-apps/dist/7af7b95b35fd7616.jpg",width:"250"},null,-1),tm=Xn("div",{class:"squareoff"}," Each reality medium mediates and remediates. It offers a new representation of the world that we implicitly compare to our experience of the world in itself, but also through other media.",-1);var nm={setup:e=>(e,t)=>(Un(),Hn("div",Qd,[Xn("div",Kd,[Jn($d,{msg:"AR & VR as reality media"}),em,tm])]))};class rm extends zd{constructor(e,t){super(nm,e,t)}}var im=function(){let e=new rm(300,475);return e.mount(),e};const sm={id:"room"},om=Xn("div",{class:"spacer"},[Xn("img",{src:"https://resources.realitymedia.digital/vue-apps/dist/7ab3d86afd48dbfb.jpg",width:"250"}),Xn("div",{class:"squareoff"},"Film became one of the most important reality media of the twentieth century, and in some ways, it is a forerunner of virtual reality.")],-1);var am={setup:e=>(e,t)=>(Un(),Hn("div",sm,[Jn($d,{msg:"The LaCiotat Effect"}),om]))};class um extends zd{constructor(e,t){super(am,e,t)}}var cm=function(){let e=new um(300,475);return e.mount(),e};const hm={id:"room"},lm={class:"spacer"},pm=Xn("img",{src:"https://resources.realitymedia.digital/vue-apps/dist/91fdfa811e752dc8.jpg",width:"200"},null,-1),fm=Xn("div",{class:"squareoff"},"3-D computer graphics help to construct the visual realities of AR and VR, that is photorealism. The uncanny valley.",-1);var dm={setup:e=>(e,t)=>(Un(),Hn("div",hm,[Xn("div",lm,[Jn($d,{msg:"3-D Graphics & Tracking"}),pm,fm])]))};class mm extends zd{constructor(e,t){super(dm,e,t)}}var gm=function(){let e=new mm(300,475);return e.mount(),e},ym="https://resources.realitymedia.digital/vue-apps/dist/dc05c04546a69e64.png";const vm={id:"room"},xm=Xn("div",{class:"spacer"},[Xn("img",{src:ym,width:"250"}),Xn("div",{class:"squareoff"},"Presence in VR is usually conceived of as forgetting that the medium is there. The idea is that if the user can be enticed into behaving as if she were not aware of all the complex technology, then she feels presence.")],-1);var wm={setup:e=>(e,t)=>(Un(),Hn("div",vm,[Jn($d,{msg:"Presence"}),xm]))};class bm extends zd{constructor(e,t){super(wm,e,t)}}var _m=function(){let e=new bm(300,475);return e.mount(),e};const Em={id:"room"},Mm=Xn("div",{class:"spacer"},[Xn("img",{src:ym,width:"250"}),Xn("div",{class:"squareoff"},"Reality media applications often function as additions to established genres. Most current AR and VR applications behave like applications or artifacts that we know from earlier media.")],-1);var Nm={setup:e=>(e,t)=>(Un(),Hn("div",Em,[Jn($d,{msg:"Genres"}),Mm]))};class Sm extends zd{constructor(e,t){super(Nm,e,t)}}var Tm=function(){let e=new Sm(300,475);return e.mount(),e};const Om={id:"room"},Cm=Xn("div",{class:"spacer"},[Xn("img",{src:ym,width:"250"}),Xn("div",{class:"squareoff"},"VR will continue to construct special realities, apart from the everyday. VR worlds will continue to be metaphoric worlds.")],-1);var Am={setup:e=>(e,t)=>(Un(),Hn("div",Om,[Jn($d,{msg:"The Future of AR & VR"}),Cm]))};class zm extends zd{constructor(e,t){super(Am,e,t)}}var Rm=function(){let e=new zm(300,475);return e.mount(),e};const Dm={id:"room"},km=Xn("div",{class:"spacer"},[Xn("div",{class:"squareoff"},"Pervasive, always-on AR applications have the potential to provide companies or government authorities even more information and with more precision than our current mobile applications do, both by aggregating our habits as consumers and by identifying us as individuals.")],-1);var Im={setup:e=>(e,t)=>(Un(),Hn("div",Dm,[Jn($d,{msg:"Privacy and Public Space"}),km]))};class Lm extends zd{constructor(e,t){super(Im,e,t)}}var Bm=function(){let e=new Lm(300,475);return e.mount(),e};const Fm={id:"room"},Pm=Xn("div",{class:"spacer"},[Xn("div",{class:"flushleft"},[Xn("br"),Xn("h3",null," Some of the key differences between classic VR and AR"),Xn("br"),Xn("h3",null," Extended reality (XR) and the immersive web "),Xn("br"),Xn("h3",null," Where AR and VR fit on Milgram and Kishinos virtuality continuum")])],-1);var Um={setup:e=>(e,t)=>(Un(),Hn("div",Fm,[Jn($d,{msg:"AR & VR as reality media"}),Pm]))};class jm extends zd{constructor(e,t){super(Um,e,t)}}var Vm=function(){let e=new jm(300,475);return e.mount(),e};const qm={id:"room"},Hm=Xn("div",{class:"spacer"},[Xn("div",{class:"flushleft"},[Xn("br"),Xn("h3",null," Some of the key differences between classic VR and AR"),Xn("br"),Xn("h3",null," Extended reality (XR) and the immersive web "),Xn("br"),Xn("h3",null," Where AR and VR fit on Milgram and Kishinos virtuality continuum")])],-1);var $m={setup:e=>(e,t)=>(Un(),Hn("div",qm,[Jn($d,{msg:"The History of Reality Media"}),Hm]))};class Wm extends zd{constructor(e,t){super($m,e,t)}}var Gm=function(){let e=new Wm(300,475);return e.mount(),e};const Ym={id:"room"},Zm=Xn("div",{class:"spacer"},[Xn("div",{class:"flushleft"},[Xn("br"),Xn("h3",null," Some of the key differences between classic VR and AR"),Xn("br"),Xn("h3",null," Extended reality (XR) and the immersive web "),Xn("br"),Xn("h3",null," Where AR and VR fit on Milgram and Kishinos virtuality continuum")])],-1);var Xm={setup:e=>(e,t)=>(Un(),Hn("div",Ym,[Jn($d,{msg:"3-D & Tracking"}),Zm]))};class Jm extends zd{constructor(e,t){super(Xm,e,t)}}var Qm=function(){let e=new Jm(300,475);return e.mount(),e};const Km={id:"room"},eg=Xn("div",{class:"spacer"},[Xn("div",{class:"flushleft"},[Xn("br"),Xn("h3",null," Some of the key differences between classic VR and AR"),Xn("br"),Xn("h3",null," Extended reality (XR) and the immersive web "),Xn("br"),Xn("h3",null," Where AR and VR fit on Milgram and Kishinos virtuality continuum")])],-1);var tg={setup:e=>(e,t)=>(Un(),Hn("div",Km,[Jn($d,{msg:"Presence"}),eg]))};class ng extends zd{constructor(e,t){super(tg,e,t)}}var rg=function(){let e=new ng(300,475);return e.mount(),e};const ig={id:"room"},sg=Xn("div",{class:"spacer"},[Xn("div",{class:"flushleft"},[Xn("br"),Xn("h3",null," Some of the key differences between classic VR and AR"),Xn("br"),Xn("h3",null," Extended reality (XR) and the immersive web "),Xn("br"),Xn("h3",null," Where AR and VR fit on Milgram and Kishinos virtuality continuum")])],-1);var og={setup:e=>(e,t)=>(Un(),Hn("div",ig,[Jn($d,{msg:"Genres"}),sg]))};class ag extends zd{constructor(e,t){super(og,e,t)}}var ug=function(){let e=new ag(300,475);return e.mount(),e};const cg={id:"room"},hg=Xn("div",{class:"spacer"},[Xn("div",{class:"flushleft"},[Xn("br"),Xn("h3",null," Some of the key differences between classic VR and AR"),Xn("br"),Xn("h3",null," Extended reality (XR) and the immersive web "),Xn("br"),Xn("h3",null," Where AR and VR fit on Milgram and Kishinos virtuality continuum")])],-1);var lg={setup:e=>(e,t)=>(Un(),Hn("div",cg,[Jn($d,{msg:"Future"}),hg]))};class pg extends zd{constructor(e,t){super(lg,e,t)}}var fg=function(){let e=new pg(300,475);return e.mount(),e};const dg={id:"room"},mg=Xn("div",{class:"spacer"},[Xn("div",{class:"flushleft"},[Xn("br"),Xn("h3",null," Some of the key differences between classic VR and AR"),Xn("br"),Xn("h3",null," Extended reality (XR) and the immersive web "),Xn("br"),Xn("h3",null," Where AR and VR fit on Milgram and Kishinos virtuality continuum")])],-1);var gg={setup:e=>(e,t)=>(Un(),Hn("div",dg,[Jn($d,{msg:"Privacy"}),mg]))};class yg extends zd{constructor(e,t){super(gg,e,t)}}var vg=function(){let e=new yg(300,475);return e.mount(),e};export{im as Center1,cm as Center2,gm as Center3,_m as Center4,Tm as Center5,Rm as Center6,Bm as Center7,Jd as Map,Vm as Monolith1,Gm as Monolith2,Qm as Monolith3,rg as Monolith4,ug as Monolith5,fg as Monolith6,vg as Monolith7,kd as hubsTest1,Hd as hubsTest2,Cd as initializeEthereal,Ad as systemTick};
